<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Extract Values for Hyper-Parameters — components.bage_mod • bage</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract Values for Hyper-Parameters — components.bage_mod"><meta name="description" content="Extract values for hyper-parameters
from a model object. Includes values for
main effects and interactions, and values
for any disperion or variance terms."><meta property="og:description" content="Extract values for hyper-parameters
from a model object. Includes values for
main effects and interactions, and values
for any disperion or variance terms."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">bage</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/vig1_intro.html">1. Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/vig2_math.html">2. Mathematical Details</a></li>
    <li><a class="dropdown-item" href="../articles/vig3_priors.html">3. Priors</a></li>
    <li><a class="dropdown-item" href="../articles/vig4_svd.html">4. Singular Value Decomposition</a></li>
    <li><a class="dropdown-item" href="../articles/vig5_workflow.html">5. Bayesian Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/vig6_mortality.html">6. Modelling Mortality</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Extract Values for Hyper-Parameters</h1>

      <div class="d-none name"><code>components.bage_mod.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Extract values for hyper-parameters
from a model object. Includes values for
main effects and interactions, and values
for any disperion or variance terms.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'bage_mod'</span></span>
<span><span class="fu"><a href="https://generics.r-lib.org/reference/components.html" class="external-link">components</a></span><span class="op">(</span><span class="va">object</span>, standardize <span class="op">=</span> <span class="cn">TRUE</span>, quiet <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>A <code>bage_mod</code> object,
typically created with <code><a href="mod_pois.html">mod_pois()</a></code>,
<code><a href="mod_binom.html">mod_binom()</a></code>, or <code><a href="mod_norm.html">mod_norm()</a></code>.</p></dd>


<dt id="arg-standardize">standardize<a class="anchor" aria-label="anchor" href="#arg-standardize"></a></dt>
<dd><p>Whether to standardize
parameter estimates. See below for details.
Default is <code>TRUE</code>.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>Whether to suppress messages.
Default is <code>FALSE</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Unused. Included for generic consistency only.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <a href="https://tibble.tidyverse.org/reference/tibble-package.html" class="external-link">tibble</a>
with four columns columns:</p>
<p>The return value contains the following columns:</p><ul><li><p><code>term</code> Model term that the hyper-parameter belongs to.</p></li>
<li><p><code>component</code> Component within term.</p></li>
<li><p><code>level</code> Element within component .</p></li>
<li><p><code>.fitted</code> An <a href="https://bayesiandemography.github.io/rvec/reference/rvec.html" class="external-link">rvec</a> containing
draws from the posterior distribution.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="fitted-vs-unfitted-models">Fitted vs unfitted models<a class="anchor" aria-label="anchor" href="#fitted-vs-unfitted-models"></a></h2>



<p><code><a href="https://generics.r-lib.org/reference/components.html" class="external-link">components()</a></code> is typically called on a <a href="https://generics.r-lib.org/reference/fit.html" class="external-link">fitted</a>
model. In this case, the modelled values are
draws from the joint posterior distribution for the
hyper-parameters in the model.</p>
<p><code><a href="https://generics.r-lib.org/reference/components.html" class="external-link">components()</a></code> can, however, be called on an
unfitted model. In this case, the modelled values
are draws from the joint prior distribution.
In other words, the modelled values are informed by
model priors, and by any <code>exposure</code>, <code>size</code>, or <code>weights</code>
argument in the model, but not by the observed outcomes.</p>
    </div>
    <div class="section level2">
    <h2 id="standardizing-estimates">Standardizing estimates<a class="anchor" aria-label="anchor" href="#standardizing-estimates"></a></h2>



<p>In many models, the sum of the intercept, main effects,
and interactions is well-identified by the data, but
the values of the intercept, main effects,
and interactions are not. For instance, consider a model
containing the lines</p>
<p>$$y_i \sim \text{N}(\mu_i, \sigma^2)$$
$$\mu_i = \beta^{(0)} + \beta_i^{(1)}.$$</p>
<p>If we add 1 to \(\beta^{(0)}\) and subtract 1
from each of the \(\beta_i^{(1)}\), then the \(\mu_i\)
are unchanged, and the model's fit to the
\(y_i\) is unchanged. This indeterminacy does not
affect our ability to estimate the \(\mu_i\),
but does complicate the interpretation of \(\beta^{(0)}\)
and the \(\beta_i^{(1)}\).</p>
<p>A common strategy for dealing with poorly-
identified intercepts, main effects, and interactions
is to post-process the estimates, so that all terms
other than the intercept, are constrained to sum to zero.
By default, this is what <strong>bage</strong> does. For a
description of the algorithm used by <strong>bage</strong>,
see <code><a href="../articles/vig2_math.html">vignette("vig2_math")</a></code>.</p>
<p>For unstandardized
estimates, set <code>standardize</code> to <code>FALSE</code>.</p>
<p>Batches of parameters, such as seasonal effects,
that have the same structure as main effects and
interactions have the same problems of indeterminacy.
By default, these paramters are also standardized.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index">
<ul><li><p><code><a href="https://generics.r-lib.org/reference/augment.html" class="external-link">augment()</a></code> Extract data and values for rates,
means, or probabilities</p></li>
<li><p><code><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy()</a></code> Extract a one-line summary of a model</p></li>
<li><p><code><a href="mod_pois.html">mod_pois()</a></code> Specify a Poisson model</p></li>
<li><p><code><a href="mod_binom.html">mod_binom()</a></code> Specify a binomial model</p></li>
<li><p><code><a href="mod_norm.html">mod_norm()</a></code> Specify a normal model</p></li>
<li><p><code><a href="https://generics.r-lib.org/reference/fit.html" class="external-link">fit()</a></code> Fit a model</p></li>
<li><p><code><a href="is_fitted.html">is_fitted()</a></code> See if a model has been fitted</p></li>
</ul></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## specify model</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="mod_pois.html">mod_pois</a></span><span class="op">(</span><span class="va">injuries</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">sex</span> <span class="op">+</span> <span class="va">year</span>,</span></span>
<span class="r-in"><span>                data <span class="op">=</span> <span class="va">injuries</span>,</span></span>
<span class="r-in"><span>                exposure <span class="op">=</span> <span class="va">popn</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## extract prior distribution</span></span></span>
<span class="r-in"><span><span class="co">## of hyper-parameters</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://generics.r-lib.org/reference/components.html" class="external-link">components</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Model not fitted, so values drawn straight from prior distribution.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 37 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    term        component level                   .fitted</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;rdbl&lt;1000&gt;&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> (Intercept) effect    (Intercept)   -0.11 (-7.5, 7.3)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> age         effect    0-4           0.019 (-3.6, 3.7)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> age         effect    5-9           0.011 (-3.5, 3.2)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> age         effect    10-14         0.00098 (-3, 2.6)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> age         effect    15-19       -0.0039 (-2.9, 2.6)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> age         effect    20-24       -0.0013 (-2.4, 2.5)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> age         effect    25-29       0.00025 (-2.2, 2.3)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> age         effect    30-34         -0.0017 (-2.3, 2)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> age         effect    35-39       -0.0044 (-2.3, 2.1)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> age         effect    40-44        -0.018 (-2.5, 2.5)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 27 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## fit model</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="va">mod</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://generics.r-lib.org/reference/fit.html" class="external-link">fit</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## extract posterior distribution</span></span></span>
<span class="r-in"><span><span class="co">## of hyper-parameters</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://generics.r-lib.org/reference/components.html" class="external-link">components</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 37 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    term        component level                    .fitted</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;rdbl&lt;1000&gt;&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> (Intercept) effect    (Intercept)    -8.2 (-8.2, -8.2)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> age         effect    0-4         -0.36 (-0.47, -0.25)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> age         effect    5-9            -1.8 (-1.9, -1.6)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> age         effect    10-14          -1.3 (-1.4, -1.2)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> age         effect    15-19          0.47 (0.37, 0.56)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> age         effect    20-24          0.56 (0.46, 0.66)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> age         effect    25-29          0.46 (0.36, 0.55)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> age         effect    30-34          0.41 (0.31, 0.51)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> age         effect    35-39          0.34 (0.24, 0.45)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> age         effect    40-44          0.34 (0.25, 0.45)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 27 more rows</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by John Bryant, Junni Zhang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

