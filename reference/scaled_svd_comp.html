<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Use the Singular Value Decomposition
(SVD) to construct a parsimonious representation
of a set of rates, probabilities, means, or
other values."><title>Create components needed by a scaled_svd object — scaled_svd_comp • bage</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create components needed by a scaled_svd object — scaled_svd_comp"><meta property="og:description" content="Use the Singular Value Decomposition
(SVD) to construct a parsimonious representation
of a set of rates, probabilities, means, or
other values."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">bage</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/vig1_intro.html">vig_1_intro</a>
    <a class="dropdown-item" href="../articles/vig2_math.html">Mathematical description of models used in bage</a>
    <a class="dropdown-item" href="../articles/vig3_priors.html">vig_3_priors</a>
    <a class="dropdown-item" href="../articles/vig4_svd.html">Dimension reduction and the modelling of age effects</a>
    <a class="dropdown-item" href="../articles/vig5_workflow.html">vig_5_workflow</a>
    <a class="dropdown-item" href="../articles/vig6_mortality.html">Modelling mortality rates and life expectancy</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Create components needed by a scaled_svd object</h1>
      
      <div class="d-none name"><code>scaled_svd_comp.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Use the <a href="https://rdrr.io/r/base/svd.html" class="external-link">Singular Value Decomposition</a>
(SVD) to construct a parsimonious representation
of a set of rates, probabilities, means, or
other values.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">scaled_svd_comp</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  transform <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"log"</span>, <span class="st">"logit"</span>, <span class="st">"none"</span><span class="op">)</span>,</span>
<span>  center <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>A matrix with value such as rates,
probabilities, or means.</p></dd>


<dt>n</dt>
<dd><p>Number of components of the SVD to use.
Defaults to 10.</p></dd>


<dt>transform</dt>
<dd><p><code>"log"</code>, <code>"logit"</code>, or <code>"none"</code>.
Defaults to <code>"log"</code>.</p></dd>


<dt>center</dt>
<dd><p>Whether to center the transformed
version of <code>x</code> before carrying out the SVD.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A named list with two elements:</p><ul><li><p><code>matrix</code>, a numeric matrix</p></li>
<li><p><code>offset</code>, a numeric vector</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>`scaled_svd_comp() typically proceeds as follows:</p><ul><li><p>transform values in matrix <code>x</code> (eg take logs)</p></li>
<li><p>center each column of <code>x</code></p></li>
<li><p>carry out a SVD on the transformed version of <code>x</code></p></li>
<li><p>centre and scale the results from the SVD to produce
matrix <code>matrix</code> and vector <code>offset</code>.</p></li>
</ul><p>If</p><ul><li><p>\(X\) is a the matrix of transformed values
of <code>x</code></p></li>
<li><p>\(A\) is the matrix called <code>matrix</code>,</p></li>
<li><p>\(b\) is the vector called <code>offset</code>, and</p></li>
<li><p>\(\beta\) is a vector of standard normal variates,</p></li>
</ul><p>and</p>
<p>$$v = A \beta + b$$</p>
<p>then \(v\) should look like a randomly-selected
column from \(X\).</p>
<p>Matrix <code>x</code> typically has age along the rows,
and some combination of classification variables,
such as country and time, along the columns.
One exception is when the SVD is used to capture
the relationship between female and male rates,
in which case rows are formed by interacting
sex and age. See below for an example.</p>
<p>The number of components used by the SVD
(and hence the number of columns of the
<code>tranform</code> matrix) is governed by
argument <code>n</code>. The default is 5.</p>
<p>When <code>scale</code> is <code>"log"</code> or <code>"logit"</code>,
<code>scaled_svd_comp()</code> converts any <code>0</code>s in
<code>x</code> to values just above <code>0</code> before
applying the log or logit function.
When <code>scale</code> is <code>"logit"</code>,
<code>scaled_svd_comp() also converts any </code>1<code>s to values just below </code>1`.</p>
<p>Centering is appropriate when modelling
the shape of, for instance, age profiles,
rather than the absolute level of the profiles.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index">
<ul><li><p><code><a href="https://bayesiandemography.github.io/poputils/reference/to_matrix.html" class="external-link">poputils::to_matrix()</a></code> can create matrices to
supply to <code>scaled_svd_comp</code></p></li>
<li><p><name of vignette> has mathematical details</name></p></li>
<li><p>example of use of <code>scaled_svd_comp</code>:
hrefhttps://github.com/bayesiandemography/svd_mortalitysvd_mortality</p></li>
</ul></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/GammaDist.html" class="external-link">rgamma</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span>, shape <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">5</span>, ncol <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           [,1]      [,2]      [,3]      [,4]      [,5]      [,6]      [,7]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.2772443 2.3161305 0.6456835 0.9560931 0.4746108 1.0243892 1.2981059</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 1.4996090 2.6847973 0.6805910 0.3921152 0.4965372 0.8580878 1.3076182</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 1.0076971 0.4475368 0.1089154 0.6146813 0.1870204 0.2077955 0.8426195</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 1.0373604 0.7849718 0.6735251 0.3510826 1.3277591 0.4096957 0.4559454</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,] 1.2705326 3.0140234 0.5384111 0.1610642 0.5427547 0.5758258 0.1786242</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            [,8]      [,9]      [,10]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 2.20486571 0.3482980 4.45094629</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.18297872 3.3571084 0.89208882</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 1.57042732 4.2511971 2.06341276</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 3.11024256 0.1768955 1.27038410</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,] 0.03239837 3.9062966 0.03056139</span>
<span class="r-in"><span><span class="fu">scaled_svd_comp</span><span class="op">(</span><span class="va">x</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $matrix</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 x 3 sparse Matrix of class "dgCMatrix"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] -0.8550770 -0.2658565 -0.3366196</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]  0.3347385  0.1235422 -0.3891796</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] -0.3616849  0.8750007  0.2196997</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] -0.6352024 -0.5386675  0.3930293</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,]  1.5172257 -0.1940189  0.1130702</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $offset</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  0.46095851  0.13084765 -0.03602179 -0.03721707 -0.51856729</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">scaled_svd_comp</span><span class="op">(</span><span class="va">x</span>, n <span class="op">=</span> <span class="fl">3</span>, transform <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $matrix</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 x 3 sparse Matrix of class "dgCMatrix"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] -1.0786666 -0.53826763  0.09317444</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]  0.6051643 -0.16639263  0.22511270</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]  0.2902318  0.01401833 -0.76430364</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] -0.7530706  0.66926342  0.13704436</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,]  0.9363410  0.02137851  0.30897215</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $offset</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  0.26462878  0.01942493 -0.01670553 -0.19628516 -0.07106303</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by John Bryant, Junni Zhang.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

