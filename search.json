[{"path":"https://bayesiandemography.github.io/bage/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2022 Bayesian Demography Limited Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"2. Mathematical Details","text":"Specification document - mathematical description models used bage. Note: describing models want get soon, ones currently implement.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"input-data","dir":"Articles","previous_headings":"2 Likelihood","what":"Input data","title":"2. Mathematical Details","text":"outcome variable: events, numbers people, sort measure continuous variable income expenditure exposure/size/weights disagg one variables. Almost always includes age, sex/gender, time. May include variables eg region, ethnicity, education. combinations variables present; may missing values","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"sec:pois","dir":"Articles","previous_headings":"2 Likelihood > 2.2 Models","what":"Poisson","title":"2. Mathematical Details","text":"Let \\(y_i\\) count events cell \\(= 1, \\cdots, n\\) let \\(w_i\\) corresponding exposure measure, possibility \\(w_i \\equiv 1\\). likelihood Poisson model \\[\\begin{align}   y_i & \\sim \\text{Poisson}(\\gamma_i w_i) \\tag{2.1} \\\\   \\gamma_i & \\sim \\text{Gamma}\\left(\\xi^{-1}, (\\mu_i \\xi)^{-1}\\right),  \\tag{2.2} \\end{align}\\] using shape-rates parameterisation Gamma distribution. Parameter \\(\\xi\\) governs dispersion, \\[\\begin{equation}   \\text{var}(\\gamma_i \\mid \\mu_i, \\xi) = \\xi \\mu_i^2 \\end{equation}\\] \\[\\begin{equation}   \\text{var}(y_i \\mid \\mu_i, \\xi, w_i) = (1 + \\xi \\mu_i w_i ) \\times \\mu_i w_i. \\end{equation}\\] allow \\(\\xi\\) equal 0, case model reduces \\[\\begin{equation}   y_i \\sim \\text{Poisson}(\\mu_i w_i). \\end{equation}\\] \\(\\xi > 0\\), Equations (2.1) (2.2) equivalent \\[\\begin{equation}   y_i \\sim \\text{NegBinom}\\left(\\xi^{-1}, (1 + \\mu_i w_i \\xi)^{-1}\\right) \\end{equation}\\] (Norton, Christen, Fox 2018; Simpson 2022). format use internally estimation. values \\(\\gamma_i\\) needed, generate fly, using fact \\[\\begin{equation}   \\gamma_i \\sim \\text{Gamma}\\left(y_i + \\xi^{-1}, w_i + (\\xi \\mu_i)^{-1}\\right). \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"sec:binom","dir":"Articles","previous_headings":"2 Likelihood > 2.2 Models","what":"Binomial","title":"2. Mathematical Details","text":"likelihood binomial model \\[\\begin{align}   y_i  & \\sim \\text{Binomial}(w_i, \\gamma_i) \\tag{2.3} \\\\   \\gamma_i & \\sim \\text{Beta}\\left(\\xi^{-1} \\mu_i, \\xi^{-1}(1 - \\mu_i)\\right). \\tag{2.4} \\end{align}\\] Parameter \\(\\xi\\) governs dispersion, \\[\\begin{equation}   \\text{var}(\\gamma_i \\mid \\mu_i, \\xi) =  \\frac{\\xi}{1 + \\xi} \\times \\mu_i (1 -\\mu_i) \\end{equation}\\] \\[\\begin{equation}   \\text{var}(y_i \\mid w_i, \\mu_i, \\xi) =  \\frac{\\xi w_i + 1}{\\xi + 1} \\times w_i \\mu_i (1 - \\mu_i). \\end{equation}\\] allow \\(\\xi\\) equal 0, case model reduces \\[\\begin{equation}   y_i  \\text{Binom}(w_i, \\mu_i). \\end{equation}\\] Equations (2.3) (2.4) equivalent \\[\\begin{equation}   y_i  \\sim \\text{BetaBinom}\\left(w_i, \\xi^{-1} \\mu_i, \\xi^{-1} (1 - \\mu_i) \\right), \\end{equation}\\] use internally. Values \\(\\gamma_i\\) can generated using \\[\\begin{equation}   \\gamma_i \\sim \\text{Beta}\\left(y_i + \\xi^{-1} \\mu_i, w_i - y_i + \\xi^{-1}(1-\\mu_i) \\right). \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"sec:norm","dir":"Articles","previous_headings":"2 Likelihood > 2.2 Models","what":"Normal","title":"2. Mathematical Details","text":"\\[\\begin{equation}   y_i \\sim \\text{N}(\\mu_i, w_i^{-1}\\xi^2) \\end{equation}\\] \\(w_i\\) weights. Response \\(y_i\\) standardized mean 0 standard deviation 1. set \\[\\begin{equation}   y_i = \\frac{y_i^{*} - \\bar{y}^*}{s^*} \\end{equation}\\] \\(y_i^*\\) values originally supplied user, \\(\\bar{y}^*\\) \\(s^*\\) mean standard deviation \\(y_i^*\\).","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"model-for-means","dir":"Articles","previous_headings":"","what":"Model for means","title":"2. Mathematical Details","text":"Let \\(\\pmb{\\mu} = (\\mu_1, \\cdots, \\mu_n)^{\\top}\\). model \\(\\pmb{\\mu}\\) \\[\\begin{equation}   g(\\pmb{\\mu}) = \\sum_{m=0}^{M} \\pmb{X}^{(m)} \\pmb{\\beta}^{(m)} + \\pmb{Z} \\pmb{\\zeta} \\tag{3.1} \\end{equation}\\] \\(g\\) log function Poisson models, logit function binomial models, identity function normal models; \\(\\beta^{(0)}\\) intercept; \\(\\pmb{\\beta}^{(m)}\\), \\(m=1,\\cdots,M\\) vector \\(J_m\\) elements describing main effect interaction formed dimensions data \\(\\pmb{y}\\); \\(\\pmb{X}^{(m)}\\) \\(n \\times J_m\\) matrix 1s 0s, \\(\\)th row picks element \\(\\pmb{\\beta}^{(m)}\\) used cell \\(\\); \\(\\pmb{Z}\\) \\(n \\times P\\) matrix covariates; \\(\\pmb{\\zeta}\\) coefficent vector \\(P\\) elements. main effect interaction contains includes time dimensions, prior term can composed trend, cyclical, seasonal, error terms, \\[\\begin{equation}   \\pmb{\\beta}^{(m)} = \\pmb{\\beta}_{\\text{trend}}^{(m)} + \\pmb{\\beta}_{\\text{cyc}}^{(m)} + \\pmb{\\beta}_{\\text{seas}}^{(m)} + \\pmb{\\beta}_{\\text{err}}^{(m)}. \\end{equation}\\] trend term compulsory. remaining terms optional.","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"sec:standard","dir":"Articles","previous_headings":"","what":"Standardization","title":"2. Mathematical Details","text":"NOTE - ignoring covariates moment. can probably just subtract covariates term \\(\\pmb{\\mu}\\) proceed . Set \\[\\begin{equation}   \\pmb{r}^{(0)} = \\pmb{\\mu} \\end{equation}\\] \\(m = 0, \\cdots, M\\): Set \\(\\tilde{\\pmb{\\beta}}^{(m)} = (\\pmb{X}^{(m)\\top} \\pmb{X}^{(m)})^{-1} \\pmb{X}^{(m)\\top} \\pmb{r}^{(m)}\\) Set \\(\\pmb{r}^{(m+1)} = \\pmb{r}^{(m)} - \\pmb{X}^{(m)} \\tilde{\\pmb{\\beta}}^{(m)}\\)","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"sec:priors","dir":"Articles","previous_headings":"","what":"Priors for Intercept, Main Effects, and Interactions","title":"2. Mathematical Details","text":"algorithm assigning default priors: \\(\\pmb{\\beta}^{(m)}\\) one two elements, assign \\(\\pmb{\\beta}^{(m)}\\) fixed-normal prior (Section 5.2); otherwise, \\(\\pmb{\\beta}^{(m)}\\) age time main effect, assign \\(\\pmb{\\beta}^{(m)}\\) random walk prior (Section 5.3); otherwise, assign \\(\\pmb{\\beta}^{(m)}\\) normal prior (Section 5.1) intercept term \\(\\pmb{\\beta}^{(0)}\\) can given fixed-normal prior (Section 5.2) Known prior (Section 5.16).","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"model","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.1 Normal","what":"Model","title":"2. Mathematical Details","text":"\\[\\begin{align}   \\beta_j^{(m)} & \\sim \\text{N}\\left(0, \\tau_m^2 \\right) \\\\   \\tau_m & \\sim \\text{N}^+\\left(0, A_{\\tau}^{(m)2}\\right) \\end{align}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"contribution-to-posterior-density","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.1 Normal","what":"Contribution to posterior density","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\text{N}(\\tau_m | 0, A_{\\tau}^{(m)2}) \\prod_{j=1}^{J_m} \\text{N}(\\beta_j^{(m)} \\mid 0, \\tau_m^2) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"simulation","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.1 Normal","what":"Simulation","title":"2. Mathematical Details","text":"\\[\\begin{align}   \\tau_m & \\sim \\text{N}^+\\left(0, A_{\\tau}^{(m)2}\\right) \\\\   \\beta_j^{(m)} & \\sim \\text{N}\\left(0, \\tau_m^2 \\right) \\end{align}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"forecasting","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.1 Normal","what":"Forecasting","title":"2. Mathematical Details","text":"\\[\\begin{equation}     \\beta_{J_m+h+1}^{(m)} \\sim \\text{N}(0, \\tau_m^2) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"code","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.1 Normal","what":"Code","title":"2. Mathematical Details","text":"s \\(A_{\\tau}^{(m)}\\). Defaults 1.","code":"N(s = 1)"},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"model-1","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.2 Fixed normal","what":"Model","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\beta_j^{(m)} \\sim \\text{N}\\left(0, A_{\\beta}^{(m)2}\\right) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"contribution-to-posterior-density-1","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.2 Fixed normal","what":"Contribution to posterior density","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\prod_{j=1}^{J_m} \\text{N}(\\beta_j^{(m)} \\mid 0, A_{\\beta}^{(m)2}) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"simulation-1","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.2 Fixed normal","what":"Simulation","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\beta_j^{(m)} \\sim \\text{N}\\left(0, A_{\\beta}^{(m)2}\\right) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"forecasting-1","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.2 Fixed normal","what":"Forecasting","title":"2. Mathematical Details","text":"\\[\\begin{equation}     \\beta_{J_m+h+1}^{(m)} \\sim \\text{N}(0, A_{\\beta}^{(m)2}) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"code-1","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.2 Fixed normal","what":"Code","title":"2. Mathematical Details","text":"sd \\(A_{\\tau}^{(m)}\\). Defaults 1.","code":"NFix(sd = 1)"},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"model-2","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.3 First-order random walk","what":"Model","title":"2. Mathematical Details","text":"\\[\\begin{align}   \\beta_1^{(m)} & \\sim \\text{N}(0, 1) \\\\   \\beta_j^{(m)} & \\sim \\text{N}(\\beta_{j-1}^{(m)}, \\tau_m^2), \\quad j = 2, \\cdots, J_m \\\\   \\tau_m & \\sim \\text{N}^+\\left(0, A_{\\tau}^{(m)2}\\right) \\end{align}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"contribution-to-posterior-density-2","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.3 First-order random walk","what":"Contribution to posterior density","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\text{N}(\\tau_m | 0, A_{\\tau}^{(m)2}) \\text{N}(\\beta_1^{(m)} \\mid 0, 1)  \\prod_{j=2}^{J_m} \\text{N}\\left(\\beta_j^{(m)} \\mid \\beta_{j-1}^{(m)}, \\tau_m^2 \\right) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"simulation-2","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.3 First-order random walk","what":"Simulation","title":"2. Mathematical Details","text":"\\[\\begin{align}   \\tau_m & \\sim \\text{N}^+\\left(0, A_{\\tau}^{(m)2}\\right) \\\\   \\beta_1^{(m)} & \\sim \\text{N}(0, 1) \\\\   \\beta_j^{(m)} & \\sim \\text{N}(\\beta_{j-1}^{(m)}, \\tau_m^2), \\quad j = 2, \\cdots, J_m \\end{align}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"forecasting-2","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.3 First-order random walk","what":"Forecasting","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\beta_{J_m+h}^{(m)} \\sim \\text{N}(\\beta_{J_m+h-1}^{(m)}, \\tau_m^2) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"code-2","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.3 First-order random walk","what":"Code","title":"2. Mathematical Details","text":"s \\(A_{\\tau}^{(m)}\\). Defaults 1.","code":"RW(s = 1)"},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"model-3","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.4 Exchangeable first-order random walk","what":"Model","title":"2. Mathematical Details","text":"\\[\\begin{align}   \\beta_{u1}^{(m)} & \\sim \\text{N}(0, 1), \\quad u = 1, \\cdots, U_m \\\\   \\beta_{uv}^{(m)} & \\sim \\text{N}(\\beta_{u,v-1}^{(m)}, \\tau_m^2), \\quad u = 1, \\cdots, U_m, v = 2, \\cdots, V_m \\\\   \\tau_m & \\sim \\text{N}^+\\left(0, A_{\\tau}^{(m)2}\\right) \\end{align}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"contribution-to-posterior-density-3","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.4 Exchangeable first-order random walk","what":"Contribution to posterior density","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\text{N}(\\tau_m | 0, A_{\\tau}^{(m)2}) \\prod_{u=1}^{U_m} \\text{N}(\\beta_{u1}^{(m)} \\mid 0, 1)  \\prod_{u=1}^{U_m} \\prod_{v=2}^{V_m} \\text{N}\\left(\\beta_{uv}^{(m)} \\mid \\beta_{u,v-1}^{(m)}, \\tau_m^2 \\right) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"simulation-3","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.4 Exchangeable first-order random walk","what":"Simulation","title":"2. Mathematical Details","text":"\\[\\begin{align}   \\tau_m & \\sim \\text{N}^+\\left(0, A_{\\tau}^{(m)2}\\right) \\\\   \\beta_{u,1}^{(m)} & \\sim \\text{N}(0, 1), \\quad u = 1, \\cdots, U_m, \\\\   \\beta_{u,v}^{(m)} & \\sim \\text{N}(\\beta_{u,v-1}^{(m)}, \\tau_m^2), \\quad u = 1, \\cdots, U_m, v = 2, \\cdots, V_m \\end{align}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"forecasting-3","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.4 Exchangeable first-order random walk","what":"Forecasting","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\beta_{u,V_m+h}^{(m)} \\sim \\text{N}(\\beta_{u,V_m+h-1}^{(m)}, \\tau_m^2), \\quad u = 1, \\cdots, U_m \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"code-3","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.4 Exchangeable first-order random walk","what":"Code","title":"2. Mathematical Details","text":"s \\(A_{\\tau}^{(m)}\\). Defaults 1.","code":"ERW(s = 1)"},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"model-4","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.5 Second-order random walk","what":"Model","title":"2. Mathematical Details","text":"\\[\\begin{align}   \\beta_1^{(m)} & \\sim \\text{N}(0, 1) \\\\   \\beta_2^{(m)} & \\sim \\text{N}(\\beta_1^{(m)}, A_{\\eta}^{(m)2}) \\\\   \\beta_{j}^{(m)} & \\sim \\text{N}(2 \\beta_{j-1}^{(m)} - \\beta_{j-2}^{(m)}, \\tau_m^2), \\quad j = 3, \\cdots, J_m \\end{align}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"contribution-to-posterior-density-4","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.5 Second-order random walk","what":"Contribution to posterior density","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\text{N}(\\tau_m | 0, A_{\\tau}^{(m)2}) \\text{N}(\\beta_1^{(m)} \\mid 0, 1) \\text{N}(\\beta_2^{(m)}  \\mid \\beta_1^{(m)}, A_{\\eta}^{(m)2}) \\prod_{j=3}^{J_m} \\text{N}\\left(\\beta_j^{(m)} - 2 \\beta_{j-1}^{(m)} + \\beta_{j-2}^{(m)} \\mid 0, \\tau_m^2 \\right) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"simulation-4","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.5 Second-order random walk","what":"Simulation","title":"2. Mathematical Details","text":"\\[\\begin{align}   \\tau_m & \\sim \\text{N}^+\\left(0, A_{\\tau}^{(m)2}\\right) \\\\   \\beta_1^{(m)} & \\sim \\text{N}(0, 1) \\\\   \\beta_2^{(m)} & \\sim \\text{N}(\\beta_1^{(m)}, A_{\\eta}^{(m)2}) \\\\   \\beta_j^{(m)} & \\sim \\text{N}(\\beta_{j-1}^{(m)}, \\tau_m^2), \\quad j = 2, \\cdots, J_m \\end{align}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"forecasting-4","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.5 Second-order random walk","what":"Forecasting","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\beta_{J_m+h}^{(m)} \\sim \\text{N}(2 \\beta_{J_m+h-1}^{(m)} - \\beta_{J_m+h-2}^{(m)}, \\tau_m^2) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"code-4","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.5 Second-order random walk","what":"Code","title":"2. Mathematical Details","text":"s \\(A_{\\tau}^{(m)}\\) sd \\(A_{\\eta}^{(m)}\\)","code":"RW2(s = 1, sd = 1)"},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"model-5","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.6 Autoregressive","what":"Model","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\beta_j^{(m)} \\sim \\text{N}\\left(\\phi_1^{(m)} \\beta_{j-1}^{(m)} + \\cdots + \\phi_{K_m}^{(m)} \\beta_{j-{K_m}}^{(m)},  \\omega_m^2\\right), \\quad j = K_m + 1, \\cdots, J_m. \\end{equation}\\] Internally, TMB derives value \\(\\omega_m\\) gives every term \\(\\beta_j^{(m)}\\) marginal variance. denote marginal variance \\(\\tau_m^2\\), assign prior \\[\\begin{equation}   \\tau_m  \\sim \\text{N}^+(0, A_{\\tau}^{(m)2}). \\end{equation}\\] individual \\(\\phi_k^{(m)}\\) restricted interval \\((-1, 1)\\), \\(\\phi_k^{(m)}\\) jointly restricted values yield stationary models. Let \\[\\begin{equation}   r^{(m)} = \\sqrt{\\phi_1^{(m)2} + \\cdots + \\phi_{K_m}^{(m)2}}. \\end{equation}\\] assign \\(r^{(m)}\\) prior \\[\\begin{equation}   r^{(m)} \\sim \\text{Beta}(3, 3). \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"contribution-to-posterior-density-5","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.6 Autoregressive","what":"Contribution to posterior density","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\text{N}^+\\left(\\tau_m | 0, A_{\\tau}^{(m)2} \\right) \\text{Beta}\\left( r_k^{(m)} \\mid 3, 3 \\right) p\\left( \\beta_1^{(m)}, \\cdots, \\beta_{J_m}^{(m)} | \\phi_1^{(m)}, \\cdots, \\phi_{K_m}^{(m)}, \\tau_m \\right) \\end{equation}\\] \\(p\\left( \\beta_1^{(m)}, \\cdots, \\beta_{J_m}^{(m)} | \\phi_1^{(m)}, \\cdots, \\phi_{K_m}^{(m)}, \\tau_m \\right)\\) calculated internally TMB.","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"forecasting-5","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.6 Autoregressive","what":"Forecasting","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\beta_{J_m + h}^{(m)} \\sim \\text{N}\\left(\\phi_1^{(m)} \\beta_{J_m + h - 1}^{(m)} + \\cdots + \\phi_{K_m}^{(m)} \\beta_{J_m+h-K_m}^{(m)}, \\tau_m^2\\right) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"code-5","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.6 Autoregressive","what":"Code","title":"2. Mathematical Details","text":"n \\(K_m\\) s \\(A_{\\tau}^{(m)}\\)","code":"AR(n = 2, s = 1)"},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"model-6","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.7 AR1","what":"Model","title":"2. Mathematical Details","text":"\\[\\begin{align}   \\beta_1^{(m)} & \\sim \\text{N}(0, \\tau_m^2) \\\\   \\beta_j^{(m)} & \\sim \\text{N}(\\phi_m \\beta_{j-1}^{(m)}, (1 - \\phi^2) \\tau_m^2), \\quad j = 2, \\cdots, J_m \\\\   \\phi_m & = a_{0,m} + (a_{1,m} - a_{0,m}) \\phi_m^{\\prime} \\\\   \\phi_m^{\\prime} & \\sim \\text{Beta}(2, 2) \\\\   \\tau_m & \\sim \\text{N}^+\\left(0, A_{\\tau}^{(m)2}\\right). \\end{align}\\] adapted specification used AR1 densities TMB. require \\(-1 < a_{0m} < a_{1m} < 1\\).","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"contribution-to-posterior-density-6","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.7 AR1","what":"Contribution to posterior density","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\text{N}(\\tau_m | 0, A_{\\tau}^{(m)2}) \\text{Beta}( \\phi_m^{\\prime} | 2, 2) \\text{N}\\left(\\beta_1^{(m)} \\mid 0, \\tau_m^2 \\right)  \\prod_{j=2}^{J_m} \\text{N}\\left(\\beta_j^{(m)} \\mid \\phi_m \\beta_{j-1}^{(m)}, (1 - \\phi_m^2) \\tau_m^2 \\right) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"forecasting-6","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.7 AR1","what":"Forecasting","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\beta_{J_m + h}^{(m)} \\sim \\text{N}\\left(\\phi_m \\beta_{J_m + h - 1}^{(m)}, (1 - \\phi_m^2) \\tau_m^2\\right) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"code-6","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.7 AR1","what":"Code","title":"2. Mathematical Details","text":"min \\(a_{0m}\\) max \\(a_{1m}\\) s \\(A_{\\tau}^{(m)}\\). Defaults 1. defaults min max based defaults function ets() R package forecast (Hyndman Khandakar 2008).","code":"AR1(min = 0.8, max = 0.98, s = 1)"},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"model-7","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.8 Exchangeable Autoregressive","what":"Model","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\beta_{uv}^{(m)} \\sim \\text{N}\\left(\\phi_1^{(m)} \\beta_{u,v-1}^{(m)} + \\cdots + \\phi_{K_m}^{(m)} \\beta_{u,v-{K_m}}^{(m)},  \\omega_m^2\\right), \\quad u = 1, \\cdots, U_m; v = V_m + 1, \\cdots, V_m. \\end{equation}\\] Internally, TMB derives value \\(\\omega_m\\) gives every term \\(\\beta_{uv}^{(m)}\\) marginal variance. denote marginal variance \\(\\tau_m^2\\), assign prior \\[\\begin{equation}   \\tau_m  \\sim \\text{N}^+(0, A_{\\tau}^{(m)2}). \\end{equation}\\] individual \\(\\phi_k^{(m)}\\) restricted interval \\((-1, 1)\\), \\(\\phi_k^{(m)}\\) jointly restricted values yield stationary models. Let \\[\\begin{equation}   r^{(m)} = \\sqrt{\\phi_1^{(m)2} + \\cdots + \\phi_{K_m}^{(m)2}}. \\end{equation}\\] assign \\(r^{(m)}\\) prior \\[\\begin{equation}   r^{(m)} \\sim \\text{Beta}(3, 3). \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"contribution-to-posterior-density-7","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.8 Exchangeable Autoregressive","what":"Contribution to posterior density","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\text{N}^+\\left(\\tau_m | 0, A_{\\tau}^{(m)2} \\right) \\text{Beta}\\left( r_k^{(m)} \\mid 3, 3 \\right) \\prod_{u=1}^{U_m} p\\left( \\beta_{u,1}^{(m)}, \\cdots, \\beta_{u,V_m}^{(m)} | \\phi_1^{(m)}, \\cdots, \\phi_{K_m}^{(m)}, \\tau_m \\right) \\end{equation}\\] \\(p\\left( \\beta_{u,1}^{(m)}, \\cdots, \\beta_{u,V_m}^{(m)} | \\phi_1^{(m)}, \\cdots, \\phi_{K_m}^{(m)}, \\tau_m \\right)\\) calculated internally TMB.","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"forecasting-7","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.8 Exchangeable Autoregressive","what":"Forecasting","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\beta_{u,V_m + h}^{(m)} \\sim \\text{N}\\left(\\phi_1^{(m)} \\beta_{u,V_m + h - 1}^{(m)} + \\cdots + \\phi_{K_m}^{(m)} \\beta_{u,V_m+h-K_m}^{(m)}, \\tau_m^2\\right) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"code-7","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.8 Exchangeable Autoregressive","what":"Code","title":"2. Mathematical Details","text":"n \\(K_m\\) s \\(A_{\\tau}^{(m)}\\) interaction includes time dimension, use ; otherwise, interaction includes age dimension, use ; otherwise, throw error.","code":"EAR(n = 2, s = 1, along = NULL)"},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"sec:pr-ear1","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions","what":"Exchangeable AR1","title":"2. Mathematical Details","text":"TODO - complete","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"model-8","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.10 Linear","what":"Model","title":"2. Mathematical Details","text":"\\[\\begin{align}   \\beta_j^{(m)} & \\sim \\text{N}(q_j^{(m)} \\eta^{(m)}, \\tau_m^2) \\\\   \\eta^{(m)} & \\sim \\text{N}\\left(0, A_{\\eta}^{(m)2}\\right) \\\\   \\tau_m & \\sim \\text{N}^+\\left(0, A_{\\tau}^{(m)2}\\right) \\end{align}\\] \\[\\begin{equation}    q_j^{(m)} = -\\frac{J_m + 1}{J_m - 1} + \\frac{2}{J_m - 1} j \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"contribution-to-posterior-density-8","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.10 Linear","what":"Contribution to posterior density","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\text{N}(\\tau_m | 0, A_{\\tau}^{(m)2})   \\text{N}(\\eta^{(m)} | 0, A_{\\eta}^{(m)2}) \\prod_{j=1}^{J_m} \\text{N}\\left(\\beta_j^{(m)} \\mid q_j^{(m)} \\eta^{(m)}, \\tau_m^2 \\right) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"forecasting-8","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.10 Linear","what":"Forecasting","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\beta_{J_m + h}^{(m)} \\sim \\text{N}(q_{J_m + h} \\eta^{(m)}, \\tau_m^2) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"code-8","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.10 Linear","what":"Code","title":"2. Mathematical Details","text":"s \\(A_{\\tau}^{(m)}\\) sd \\(A_{\\eta}^{(m)}\\)","code":"Lin(s = 1, sd = 1)"},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"model-9","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.11 Exchangeable Linear","what":"Model","title":"2. Mathematical Details","text":"\\[\\begin{align}   \\beta_{uv}^{(m)} & \\sim \\text{N}(q_v^{(m)} \\eta_u^{(m)}, \\tau_m^2) \\\\   \\eta_u^{(m)} & \\sim \\text{N}\\left(\\eta^{(m)}, \\omega^{(m)2}\\right) \\\\   \\eta^{(m)} & \\sim \\text{N}\\left(0, A_{\\eta}^{(m)2}\\right) \\\\   \\tau_m & \\sim \\text{N}^+\\left(0, A_{\\tau}^{(m)2}\\right) \\\\   \\omega_m & \\sim \\text{N}^+\\left(0, A_{\\omega}^{(m)2}\\right) \\end{align}\\] \\[\\begin{equation}    q_v^{(m)} = -\\frac{V_m + 1}{V_m - 1} + \\frac{2}{V_m - 1} v \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"contribution-to-posterior-density-9","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.11 Exchangeable Linear","what":"Contribution to posterior density","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\begin{split}   & \\text{N}(\\tau_m | 0, A_{\\tau}^{(m)2}) \\text{N}(\\omega_m | 0, A_{\\omega}^{(m)2})   \\text{N}(\\eta^{(m)} | 0, A_{\\eta}^{(m)2}) \\\\   & \\quad \\times \\prod_{u=1}^{U_m} \\text{N}\\left(\\eta_u^{(m)} \\mid \\eta^{(m)}, \\omega_m^2 \\right) \\\\   & \\quad \\times \\prod_{u=1}^{U_m} \\prod_{v=1}^{V_m} \\text{N}\\left(\\beta_{uv}^{(m)} \\mid q_v^{(m)} \\eta_u^{(m)}, \\tau_m^2 \\right)   \\end{split} \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"forecasting-9","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.11 Exchangeable Linear","what":"Forecasting","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\beta_{u, V_m + h}^{(m)} \\sim \\text{N}(q_{V_m + h} \\eta_u^{(m)}, \\tau_m^2) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"code-9","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.11 Exchangeable Linear","what":"Code","title":"2. Mathematical Details","text":"s \\(A_{\\tau}^{(m)}\\) sd \\(A_{\\eta}^{(m)}\\) ms \\(A_{\\omega}^{(m)}\\) interaction includes time dimension, use ; otherwise, interaction includes age dimension, use ; otherwise, throw error.","code":"ELin(s = 1, sd = 1, ms = 1, along = NULL)"},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"model-10","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.12 P-Spline","what":"Model","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\pmb{\\beta}^{(m)} = \\pmb{B}^{(m)} \\pmb{\\alpha}^{(m)} \\end{equation}\\] \\(\\pmb{B}^{(m)}\\) \\(J_m \\times K_m\\) matrix B-splines, \\(\\pmb{\\alpha}^{(m)}\\) second-order random walk prior (Section 5.5). \\(\\pmb{B}^{(m)} = (\\pmb{b}_1^{(m)}(\\pmb{j}), \\cdots, \\pmb{b}_{K_m}^{(m)}(\\pmb{j}))\\), \\(\\pmb{j} = (1, \\cdots, J_m)^{\\top}\\). B-splines centered, \\(\\pmb{1}^{\\top} \\pmb{b}_k^{(m)}(\\pmb{j}) = 0\\), \\(k = 1, \\cdots, K_m\\).","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"contribution-to-posterior-density-10","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.12 P-Spline","what":"Contribution to posterior density","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\text{N}(\\tau_m | 0, A_{\\tau}^{(m)2}) \\text{N}(\\eta_0^{(m)} \\mid 0, A_{\\eta,0}^{(m)})  \\text{N}(\\eta_1^{(m)} \\mid 0, A_{\\eta,1}^{(m)}) \\prod_{k=3}^{K_m} \\text{N}\\left(\\alpha_k^{(m)} - 2 \\alpha_{k-1}^{(m)} + \\alpha_{k-2}^{(m)} \\mid 0, \\tau_m^2 \\right) \\end{equation}\\] \\[\\begin{align}   \\eta_0^{(m)} & = \\frac{1}{K_m} \\sum_{k=1}^{K_m} \\alpha_k^{(m)} \\\\   \\eta_1^{(m)} & = \\frac{\\sum_{k=1}^{K_m} \\alpha_k^{(m)} q_k^{(m)}}{\\sum_{k=1}^{K_m} q_k^{(m)2}} \\\\   q_k^{(m)} & = -\\frac{K_m + 1}{K_m - 1} + \\frac{2}{K_m - 1} j \\\\ \\end{align}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"forecasting-10","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.12 P-Spline","what":"Forecasting","title":"2. Mathematical Details","text":"Main effects P-Spline prior forecasted.","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"code-10","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.12 P-Spline","what":"Code","title":"2. Mathematical Details","text":"n \\(K_m\\). Defaults \\(\\max(0.7 J_m, 4)\\). current default BayesRates. use smaller multiplier? s \\(A_{\\tau}^{(m)}\\) second-order random walk prior. Defaults 1.","code":"Sp(n = NULL, s = 1)"},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"model-11","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.13 SVD","what":"Model","title":"2. Mathematical Details","text":"\\[\\begin{align}   \\pmb{\\beta}^{(m)} & = \\pmb{F}^{(m)} \\pmb{\\alpha}^{(m)} + \\pmb{g}^{(m)} \\\\   \\alpha_k^{(m)} & \\sim \\text{N}(0, 1), \\quad k = 1, \\cdots, K_m \\end{align}\\] \\(\\pmb{F}^{(m)}\\) \\(J_m \\times K_m\\) matrix, \\(\\pmb{g}^{(m)}\\) vector \\(J_m\\) elements, derived singular value decomposition (SVD) external dataset age-specific values females males combined. construction \\(\\pmb{F}^{(m)}\\) \\(\\pmb{g}^{(m)}\\) described Appendix 11.2. construction involves centering scaling, allows us use simple prior \\(\\pmb{\\alpha}^{(m)}\\).","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"contribution-to-posterior-density-11","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.13 SVD","what":"Contribution to posterior density","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\prod_{k=1}^{K_m} \\text{N}\\left(\\alpha_k^{(m)} \\mid 0, 1 \\right) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"forecasting-11","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.13 SVD","what":"Forecasting","title":"2. Mathematical Details","text":"Main effects SVD prior forecasted.","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"code-11","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.13 SVD","what":"Code","title":"2. Mathematical Details","text":"","code":"SVD(scaled_svd, n = 5)"},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"sec:pr-svd2","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions","what":"SVD2","title":"2. Mathematical Details","text":"SVD2 two-sex extension basic SVD model. SVD2 two versions. first identical basic SVD model, except different, sex-specific values \\(\\pmb{F}\\) \\(\\pmb{g}\\) used females males. second treats Cartesian product age sex dimensions single dimension. Values \\(\\pmb{F}\\) \\(\\pmb{g}\\) estimated age-sex-specific rates. twice large basic SVD versions \\(\\pmb{F}\\) \\(\\pmb{g}\\). code joint FALSE, first version used, joint TRUE second version used.","code":"SVD2(scaled_svd, joint = FALSE, n = 5)"},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"model-12","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.15 Exchangeable SVD","what":"Model","title":"2. Mathematical Details","text":"\\[\\begin{align}   \\pmb{\\beta}_u^{(m)} & = \\pmb{F}^{(m)} \\pmb{\\alpha}_u^{(m)} + \\pmb{g}^{(m)}, \\quad u = 1, \\cdots, U_m \\\\   \\alpha_{uk}^{(m)} & \\sim \\text{N}(0, 1), \\quad u = 1, \\cdots, U_m, k = 1, \\cdots, K_m \\end{align}\\] \\(\\pmb{F}^{(m)}\\) \\(V_m \\times K_m\\) matrix, \\(\\pmb{g}^{(m)}\\) vector \\(V_m\\) elements, derived singular value decomposition (SVD) external dataset age-specific values females males combined.","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"contribution-to-posterior-density-12","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.15 Exchangeable SVD","what":"Contribution to posterior density","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\prod_{u=1}^{U_m}\\prod_{k=1}^{K_m} \\text{N}\\left(\\alpha_{uk}^{(m)} \\mid 0, 1 \\right) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"forecasting-12","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.15 Exchangeable SVD","what":"Forecasting","title":"2. Mathematical Details","text":"Main effects SVD prior forecasted.","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"code-12","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.15 Exchangeable SVD","what":"Code","title":"2. Mathematical Details","text":"","code":"ESVD(scaled_svd, n = 5)"},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"model-13","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.16 Known","what":"Model","title":"2. Mathematical Details","text":"Elements \\(\\pmb{\\beta}^{(m)}\\) treated known certainty.","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"contribution-to-posterior-density-13","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.16 Known","what":"Contribution to posterior density","title":"2. Mathematical Details","text":"Known priors make contribution posterior density.","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"forecasting-13","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.16 Known","what":"Forecasting","title":"2. Mathematical Details","text":"Main effects known prior forecasted.","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"code-13","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.16 Known","what":"Code","title":"2. Mathematical Details","text":"values vector containing \\(\\beta_j^{(m)}\\).","code":"Known(values)"},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"model-14","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.17 Seasonal effects","what":"Model","title":"2. Mathematical Details","text":"\\[\\begin{align}   \\beta_j^{(m)} & \\sim \\text{N}(0, 1), \\quad j = 1, \\cdots, S_m \\\\   \\beta_j^{(m)} & \\sim \\text{N}(\\beta_{j - S_m}^{(m)}, \\tau_m^2 ), \\quad j = S_m+1, \\cdots, J_m \\\\   \\tau_m & \\sim \\text{N}^+\\left(0, A_{\\tau}^{(m)2} \\right) \\\\ \\end{align}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"contribution-to-posterior-density-14","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.17 Seasonal effects","what":"Contribution to posterior density","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\text{N}(\\tau_m | 0, A_{\\tau}^{(m)2}) \\left( \\prod_{j=1}^{S_m} \\text{N}(\\beta_j^{(m)} \\mid 0, 1 ) \\right)  \\left( \\prod_{j=S_m+1}^{J_m} \\text{N}(\\beta_j^{(m)} \\mid \\beta_{j-S_m}^{(m)}, \\tau_m^2) \\right) \\end{equation}\\]n","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"forecasting-14","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.17 Seasonal effects","what":"Forecasting","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\beta_{J_m+h}^{(m)} \\sim \\text{N}(\\beta_{J_m+h-S_m}^{(m)}, \\tau_m^2) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"code-14","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.17 Seasonal effects","what":"Code","title":"2. Mathematical Details","text":"n \\(S_m\\) s \\(A_{\\tau}^{(m)}\\)","code":"Seas(n, s = 1)"},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"model-15","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.18 Exchangeable seasonal","what":"Model","title":"2. Mathematical Details","text":"\\[\\begin{align}   \\beta_{uv}^{(m)} & \\sim \\text{N}(0, 1), \\quad u = 1, \\cdots, U_m, \\quad v = 1, \\cdots, S_m \\\\   \\beta_{uv}^{(m)} & \\sim \\text{N}(\\beta_{u,v - S_m}^{(m)}, \\tau_m^2 ), \\quad u = 1, \\cdots, U_m,\\quad v = S_m+1, \\cdots, V_m \\\\   \\tau_m & \\sim \\text{N}^+\\left(0, A_{\\tau}^{(m)2} \\right) \\\\ \\end{align}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"contribution-to-posterior-density-15","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.18 Exchangeable seasonal","what":"Contribution to posterior density","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\text{N}(\\tau_m | 0, A_{\\tau}^{(m)2}) \\left( \\prod_{u=1}^{U_m} \\prod_{v=1}^{S_m} \\text{N}(\\beta_{uv}^{(m)} \\mid 0, 1 ) \\right)  \\left( \\prod_{u=1}^{U_M} \\prod_{v=S_m+1}^{V_m} \\text{N}(\\beta_{uv}^{(m)} \\mid \\beta_{u,v-S_m}^{(m)}, \\tau_m^2) \\right) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"forecasting-15","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.18 Exchangeable seasonal","what":"Forecasting","title":"2. Mathematical Details","text":"\\[\\begin{equation}   \\beta_{u,V_m+h}^{(m)} \\sim \\text{N}(\\beta_{u,V_m+h-S_m}^{(m)}, \\tau_m^2) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"code-15","dir":"Articles","previous_headings":"5 Priors for Intercept, Main Effects, and Interactions > 5.18 Exchangeable seasonal","what":"Code","title":"2. Mathematical Details","text":"n \\(S_m\\) s \\(A_{\\tau}^{(m)}\\)","code":"ESeas(n, s = 1)"},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"model-16","dir":"Articles","previous_headings":"6 Covariates","what":"Model","title":"2. Mathematical Details","text":"columns matrix \\(\\pmb{Z}\\) assumed standardised mean 0 standard deviation 1. \\(\\pmb{Z}\\) contain column intercept. implement two priors coefficient vector \\(\\pmb{\\zeta}\\). first prior designed case \\(P\\), number colums \\(\\pmb{Z}\\), small, \\(\\zeta_p\\) likely distinguishable zero. second prior designed case \\(P\\) large, \\(\\zeta_p\\) likely distinguishable zero.","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"standard-prior","dir":"Articles","previous_headings":"6 Covariates > 6.1 Model","what":"Standard prior","title":"2. Mathematical Details","text":"\\[\\begin{align}   \\zeta_p | \\varphi & \\sim \\text{N}(0, \\varphi^2) \\\\   \\varphi & \\sim \\text{N}^+(0, 1) \\end{align}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"shrinkage-prior","dir":"Articles","previous_headings":"6 Covariates > 6.1 Model","what":"Shrinkage prior","title":"2. Mathematical Details","text":"Regularised horseshoe prior (Piironen Vehtari 2017) \\[\\begin{align}   \\zeta_p | \\vartheta_p, \\varphi & \\sim \\text{N}(0, \\vartheta_p^2 \\varphi^2) \\\\   \\vartheta_p & \\sim \\text{Cauchy}^+(0, 1) \\\\   \\varphi & \\sim \\text{Cauchy}^+(0, A_{\\varphi}^2) \\\\   A_{\\varphi} & = \\frac{p_0}{p_0 + P} \\frac{\\hat{\\sigma}}{\\sqrt{n}} \\end{align}\\] \\(p_0\\) initial guess number \\(\\zeta_p\\) non-zero, \\(\\hat{\\sigma}\\) obtained follows: Poisson. Using maximum likelihood, fit GLM \\[\\begin{align} y_i & \\sim \\text{Poisson}(w_i \\gamma_i) \\\\ \\log \\gamma_i & = \\sum_{m=0}^{M} \\pmb{X}^{(m)} \\pmb{\\beta}^{(m)}, \\end{align}\\] set \\[\\begin{equation} \\hat{\\sigma} = \\frac{1}{n}\\sum_{=1}^n \\frac{1}{w_i \\hat{\\gamma}_i}. \\end{equation}\\] Binomial. Using maximum likelihood, fit GLM \\[\\begin{align} y_i & \\sim \\text{binomial}(w_i, \\gamma_i) \\\\ \\text{logit} \\gamma_i & = \\sum_{m=0}^{M} \\pmb{X}^{(m)} \\pmb{\\beta}^{(m)}, \\end{align}\\] set \\[\\begin{equation} \\hat{\\sigma} = \\frac{1}{n}\\sum_{=1}^n \\frac{1}{w_i \\hat{\\gamma}_i (1 - \\hat{\\gamma}_i)}. \\end{equation}\\] Normal. Using maximum likelihood, fit linear model \\[\\begin{equation} y_i \\sim \\text{N}\\left(\\sum_{m=0}^{M} \\pmb{X}^{(m)} \\pmb{\\beta}^{(m)}, w_i^{-1}\\xi^2 \\right) \\end{equation}\\] set \\(\\hat{\\sigma} = \\hat{\\xi}\\). quantities used Poisson binomial likelihoods derived normal approximations GLMs (Piironen Vehtari 2017; Gelman et al. 2014, sec. 16.2).","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"contribution-to-posterior-density-16","dir":"Articles","previous_headings":"6 Covariates","what":"Contribution to posterior density","title":"2. Mathematical Details","text":"TODO - write","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"forecasting-16","dir":"Articles","previous_headings":"6 Covariates","what":"Forecasting","title":"2. Mathematical Details","text":"TODO - write","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"code-16","dir":"Articles","previous_headings":"6 Covariates","what":"Code","title":"2. Mathematical Details","text":"formula one-sided R formula describing covariates used data data frame. value data supplied, formula interpreted context data frame. value data supplied, formula interpreted context data frame used original call mod_pois(), mod_binom(), mod_norm(). n_coef effective number non-zero coefficients. value supplied, shrinkage prior used; otherwise standard prior used. Examples:","code":"set_covariates(formula, data = NULL, n_coef = NULL) set_covariates(~ mean_income + distance * employment) set_covariates(~ ., data = cov_data, n_coef = 5)"},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"model-17","dir":"Articles","previous_headings":"7 Prior for dispersion terms","what":"Model","title":"2. Mathematical Details","text":"Use exponential distribution, parameterised using mean, \\[\\begin{equation}   \\xi \\sim \\text{Exp}(\\mu_{\\xi}) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"contribution-to-prior-density","dir":"Articles","previous_headings":"7 Prior for dispersion terms","what":"Contribution to prior density","title":"2. Mathematical Details","text":"\\[\\begin{equation}   p(\\xi) = \\frac{1}{\\mu_{\\xi}} \\exp\\left(\\frac{-\\xi}{\\mu_{\\xi}}\\right) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"code-17","dir":"Articles","previous_headings":"7 Prior for dispersion terms","what":"Code","title":"2. Mathematical Details","text":"mean \\(\\mu_{\\xi}\\)","code":"set_disp(mean = 1)"},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"deriving-outputs","dir":"Articles","previous_headings":"","what":"Deriving outputs","title":"2. Mathematical Details","text":"Running TMB yields set means \\(\\pmb{m}\\), precision matrix \\(\\pmb{Q}^{-1}\\), together define approximate joint posterior distribution \\(\\pmb{\\beta}^{(m)}\\) terms independent normal, fixed normal, multivariate normal, random walk, second-order random walk, AR1, Linear, Linear-AR1 priors, \\(\\pmb{\\alpha}\\) terms Spline SVD priors, hyper-parameters \\(\\pmb{\\beta}^{(m)}\\) \\(\\pmb{\\alpha}^{(m)}\\) typically transformed another scale, log scale, dispersion term \\(\\xi\\), seasonal effects \\(\\pmb{\\lambda}\\), together associated hyper-parameters \\(\\tau_{\\lambda}\\) (log scale). use \\(\\tilde{\\pmb{\\theta}}\\) denote vector containing quantities. perform Cholesky decomposition \\(\\pmb{Q}^{-1}\\), obtain \\(\\pmb{R}\\) \\[\\begin{equation}   \\pmb{R}^{\\top} \\pmb{R} = \\pmb{Q}^{-1} \\end{equation}\\] store \\(\\pmb{R}\\) part model object. draw generate values \\(\\tilde{\\pmb{\\theta}}\\) generating vector standard normal variates \\(\\pmb{z}\\), back-solving equation \\[\\begin{equation}   \\pmb{R} \\pmb{v} = \\pmb{z} \\end{equation}\\] setting \\[\\begin{equation}   \\tilde{\\pmb{\\theta}} = \\pmb{v} + \\pmb{m}. \\end{equation}\\] Next convert transformed hyper-parameters back original units, insert values \\(\\pmb{\\beta}^{(m)}\\) terms Known priors. denote resulting vector \\(\\pmb{\\theta}\\). Finally draw distribution \\(\\pmb{\\gamma} \\mid \\pmb{y}, \\pmb{\\theta}\\) using methods described Section 2.","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"simulation-5","dir":"Articles","previous_headings":"","what":"Simulation","title":"2. Mathematical Details","text":"generate one set simulated values, start values exposure, trials, weights, \\(\\pmb{w}\\), possibly covariates $, go following steps: Draw values parameters priors \\(\\pmb{\\beta}^{(m)}\\), \\(m = 1, \\cdots, M\\). Conditional values drawn Step 1, draw values \\(\\pmb{\\beta}^{(m)}\\), \\(m = 0, \\cdots, M\\). model contains seasonal effects, draw standard deviation \\(\\kappa_m\\), effects \\(\\pmb{\\lambda}^{(m)}\\). model contains covariates, draw \\(\\varphi\\) \\(\\vartheta_p\\) necessary, draw coefficient vector \\(\\pmb{\\zeta}\\). Use values steps 2–4 form linear predictor \\(\\sum_{m=0}^{M} \\pmb{X}^{(m)} (\\pmb{\\beta}^{(m)} + \\pmb{\\lambda}^{(m)}) + \\pmb{Z} \\pmb{\\zeta}\\). Back-transform linear predictor, obtain vector cell-specific parameters \\(\\pmb{\\mu}\\). model contains dispersion parameter \\(\\xi\\), draw values prior \\(\\xi\\). Poisson binomial models, use \\(\\pmb{\\mu}\\) , present, \\(\\xi\\) draw \\(\\pmb{\\gamma}\\). Poisson binomial models, use \\(\\pmb{\\gamma}\\) \\(\\pmb{w}\\) draw \\(\\pmb{y}\\); normal models, use \\(\\pmb{\\mu}\\), \\(\\xi\\), \\(\\pmb{w}\\) draw \\(\\pmb{y}\\).","code":""},{"path":[]},{"path":[]},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"condition-on-pmbgamma","dir":"Articles","previous_headings":"10 Replicate data > 10.1 Model > 10.1.1 Poisson likelihood","what":"Condition on \\(\\pmb{\\gamma}\\)","title":"2. Mathematical Details","text":"\\[\\begin{equation}   y_i^{\\text{rep}} \\sim \\text{Poisson}(\\gamma_i w_i) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"condition-on-pmbmu-xi","dir":"Articles","previous_headings":"10 Replicate data > 10.1 Model > 10.1.1 Poisson likelihood","what":"Condition on \\((\\pmb{\\mu}, \\xi)\\)","title":"2. Mathematical Details","text":"\\[\\begin{align}   y_i^{\\text{rep}} & \\sim \\text{Poisson}(\\gamma_i^{\\text{rep}} w_i) \\\\   \\gamma_i^{\\text{rep}} & \\sim \\text{Gamma}(\\xi^{-1}, (\\xi \\mu_i)^{-1}) \\end{align}\\] equivalent \\[\\begin{equation}   y_i^{\\text{rep}} \\sim \\text{NegBinom}\\left(\\xi^{-1}, (1 + \\mu_i w_i \\xi)^{-1}\\right) \\end{equation}\\]","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"condition-on-pmbgamma-1","dir":"Articles","previous_headings":"10 Replicate data > 10.1 Model > 10.1.2 Binomial likelihood","what":"Condition on \\(\\pmb{\\gamma}\\)","title":"2. Mathematical Details","text":"\\[\\begin{equation}   y_i^{\\text{rep}} \\sim \\text{Binomial}(w_i, \\gamma_i) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"condition-on-pmbmu-xi-1","dir":"Articles","previous_headings":"10 Replicate data > 10.1 Model > 10.1.2 Binomial likelihood","what":"Condition on \\((\\pmb{\\mu}, \\xi)\\)","title":"2. Mathematical Details","text":"\\[\\begin{align}   y_i^{\\text{rep}} & \\sim \\text{Binomial}(w_im \\gamma_i^{\\text{rep}}) \\\\   \\gamma_i^{\\text{rep}} & \\sim \\text{Beta}\\left(\\xi^{-1} \\mu_i, \\xi^{-1}(1 - \\mu_i)\\right) \\end{align}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"normal-likelihood","dir":"Articles","previous_headings":"10 Replicate data > 10.1 Model","what":"Normal likelihood","title":"2. Mathematical Details","text":"\\[\\begin{equation}   y_i^{\\text{rep}} \\sim \\text{N}(\\gamma_i, \\xi^2 / w_i) \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"code-18","dir":"Articles","previous_headings":"10 Replicate data","what":"Code","title":"2. Mathematical Details","text":"","code":"replicate_data(x, condition_on = c(\"fitted\", \"expected\"), n = 20)"},{"path":[]},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig2_math.html","id":"app:svd","dir":"Articles","previous_headings":"11 Appendices","what":"SVD prior for age","title":"2. Mathematical Details","text":"Let \\(\\pmb{}\\) matrix age-specific estimates international database, transformed take values range \\((-\\infty, \\infty)\\). column \\(\\pmb{}\\) represesents one set age-specific estimates, log mortality rates Japan 2010, logit labour participation rates Germany 1980. Let \\(\\pmb{U}\\), \\(\\pmb{D}\\), \\(\\pmb{V}\\) matrices singular value decomposition \\(\\pmb{}\\), retained first \\(K\\) components. \\[\\begin{equation}   \\pmb{} \\approx \\pmb{U} \\pmb{D} \\pmb{V}. \\tag{11.1} \\end{equation}\\] Let \\(m_k\\) \\(s_k\\) mean sample standard deviation elements \\(k\\)th row \\(\\pmb{V}\\), \\(\\pmb{m} = (m_1, \\cdots, m_k)^{\\top}\\) \\(\\pmb{s} = (s_1, \\cdots, s_k)^{\\top}\\). \\[\\begin{equation}   \\tilde{\\pmb{V}} = (\\text{diag}(\\pmb{s}))^{-1} (\\pmb{V} - \\pmb{m} \\pmb{1}^{\\top}) \\end{equation}\\] standardized version \\(\\pmb{V}\\). can rewrite (11.1) \\[\\begin{align}   \\pmb{} & \\approx \\pmb{U} \\pmb{D} (\\text{diag}(\\pmb{s}) \\tilde{\\pmb{V}} + \\pmb{m} \\pmb{1}^{\\top}) \\\\   & = \\pmb{F} \\tilde{\\pmb{V}} + \\pmb{g} \\pmb{1}^{\\top}, \\tag{11.2} \\end{align}\\] \\(\\pmb{F} = \\pmb{U} \\pmb{D} \\text{diag}(\\pmb{s})\\) \\(\\pmb{g} = \\pmb{U} \\pmb{D} \\pmb{m}\\). Let \\(\\tilde{\\pmb{v}}_l\\) randomly-selected column \\(\\tilde{\\pmb{V}}\\). construction \\(\\tilde{\\pmb{V}}\\), orthogonality rows \\(\\pmb{V}\\), \\(\\text{E}[\\tilde{\\pmb{v}}_l] = \\pmb{0}\\) \\(\\text{var}[\\tilde{\\pmb{v}}_l] = \\pmb{}\\). implies \\(\\pmb{z}\\) vector standard normal variables, \\[\\begin{equation}   \\pmb{F} \\pmb{z} + \\pmb{g} \\end{equation}\\] look approximately like randomly-selected column original data matrix \\(\\pmb{}\\).","code":""},{"path":[]},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig4_svd.html","id":"data","dir":"Articles","previous_headings":"Derivation of standardised principal components","what":"Data","title":"4. Singular Value Decomposition","text":"Let \\(\\pmb{Y}\\) \\(\\times L\\) matrix values, \\(=1,\\cdots,\\) indexes age group \\(l=1,\\cdots,L\\) indexes combination classifying variables, country crossed time. values real numbers, including negative numbers, log-transformed rates, logit-transformed probabilities.","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig4_svd.html","id":"singular-value-decomposition","dir":"Articles","previous_headings":"Derivation of standardised principal components","what":"Singular value decomposition","title":"4. Singular Value Decomposition","text":"perform singular value decomposition \\(\\pmb{Y}\\), retain first \\(C < \\) components, obtain \\[\\begin{equation}   \\pmb{Y} \\approx \\pmb{U} \\pmb{D} \\pmb{V}^\\top \\end{equation}\\] \\(\\pmb{U}\\) \\(\\times C\\) matrix whose columns left singular vectors. \\(\\pmb{D}\\) \\(C \\times C\\) diagonal matrix holding singular values. \\(\\pmb{V}\\) \\(L \\times C\\) matrix whose columns right singular vectors.","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig4_svd.html","id":"standardising","dir":"Articles","previous_headings":"Derivation of standardised principal components","what":"Standardising","title":"4. Singular Value Decomposition","text":"Let \\(\\pmb{m}_V\\) vector, \\(c\\)th element mean \\(c\\)th singular vector, \\(\\sum_{l=1}^L v_{lc} / L\\). Similarly, let \\(\\pmb{s}_V\\) vector, \\(c\\)th element standard deviation \\(c\\)th singular vector, \\(\\sqrt{\\sum_{l=1}^L (v_{lc} - m_c)^2 / (L-1)}\\). define \\[\\begin{align}   \\pmb{M}_V & = \\pmb{1} \\pmb{m}_V^\\top  \\\\   \\pmb{S}_V & = \\text{diag}(\\pmb{s}_V), \\end{align}\\] \\(\\pmb{1}\\) L-vector ones. Let \\(\\tilde{\\pmb{V}}\\) standardized version \\(\\pmb{V}\\), \\[\\begin{equation}   \\tilde{\\pmb{V}} = (\\pmb{V} - \\pmb{M}_V) \\pmb{S}_V^{-1}. \\end{equation}\\] can now express \\(\\pmb{Y}\\) \\[\\begin{align}   \\pmb{Y} & \\approx \\pmb{U} \\pmb{D} (\\tilde{\\pmb{V}} \\pmb{S}_V + \\pmb{M}_V)^\\top \\\\   & = \\pmb{U} \\pmb{D} \\pmb{S}_V \\tilde{\\pmb{V}}^\\top + \\pmb{U} \\pmb{D}\\pmb{M}_V ^\\top \\\\   & = \\pmb{}\\tilde{\\pmb{V}}^\\top + \\pmb{B}. \\end{align}\\] Furthermore, can express matrix \\(\\pmb{B}\\) \\[\\begin{align}   \\pmb{B} & = \\pmb{U} \\pmb{D}\\pmb{M}_V ^\\top \\\\   & = \\pmb{U} \\pmb{D} \\pmb{m}_V \\pmb{1}^\\top$ \\\\   & = \\pmb{b} \\pmb{1}^\\top. \\end{align}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig4_svd.html","id":"result","dir":"Articles","previous_headings":"Derivation of standardised principal components","what":"Result","title":"4. Singular Value Decomposition","text":"Consider randomly selected row \\(\\tilde{\\pmb{v}}_l\\) \\(\\tilde{\\pmb{V}}\\). construction \\(\\tilde{\\pmb{V}}\\), orthogonality columns \\(\\pmb{V}\\) \\(\\color{cyan}{\\text{TODO-spell bit }}\\), obtain \\[\\begin{equation}   \\text{E}[\\tilde{\\pmb{v}}_l] = \\pmb{0} \\end{equation}\\] \\[\\begin{equation}   \\text{Var}[\\tilde{\\pmb{v}}_l] = \\pmb{}. \\end{equation}\\] implies set \\[\\begin{equation}   \\pmb{y}' = \\pmb{} \\pmb{z} + \\pmb{b} \\end{equation}\\] \\[\\begin{equation}   \\pmb{z} \\sim \\text{N}(\\pmb{0}, \\pmb{}), \\end{equation}\\] \\(\\pmb{y}'\\) look like randomly-chosen column \\(\\pmb{Y}\\). \\(\\color{cyan}{\\text{TODO - illustrate examples}}\\)","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig5_workflow.html","id":"prior-predictive-checking","dir":"Articles","previous_headings":"","what":"Prior predictive checking","title":"5. Bayesian Workflow","text":"Given model, priors, typically exposure/size term, generate data parts data generating model need stronger priors standard estimation model - eg can’t put weakly informative prior intercept “common Bayesian analysis use models fully generative. example, regression typically model outcome y given predictors x without generative model x.” (Gelman et al 2020: 11-12) [actually model ever fully generative - always assumptions part ] generating data given model priors step 1 simulation study - can re-use functions prior predictive checking simulation studies","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig5_workflow.html","id":"fitting-a-model","dir":"Articles","previous_headings":"","what":"Fitting a model","title":"5. Bayesian Workflow","text":"“generic diagnostic tools described Yao et al. (2018a) Talts et al. (2020) can used verify particular approximate algorithm reproduces features posterior care specific model.”Yao, Y., Vehtari, ., Simpson, D., Gelman, . (2018a). Yes, work?: Evaluating variational inference. Proceedings International Conference Machine Learning, 5581– 5590. Talts, S., Betancourt, M., Simpson, D., Vehtari, ., Gelman, . (2020). Validating Bayesian inference algorithms simulation-based calibration. www.stat.columbia.edu/~gelman/ research/unpublished/sbc.pdf [looks like something might implement] “Laplace approximation can viewed data-dependent linearization desired model” (Gelman et al 2020: 15) “Fit fast, fail fast” [can !]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig5_workflow.html","id":"using-constructed-data-to-find-and-understand-problems","dir":"Articles","previous_headings":"","what":"Using constructed data to find and understand problems","title":"5. Bayesian Workflow","text":"“implies fake data simulation can particularly relevant zone parameter space predictive data. turn suggests two-step procedure first fit model real data, draw parameters resulting posterior distribution use fake-data checking. statistical properties procedure unclear practice found checks helpful, revealing problems computation model, providing reassurance fake-data-based inferences reproduce assumed parameter value.” (Gelman et al 2020: 17)","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig5_workflow.html","id":"addressing-computational-problems","dir":"Articles","previous_headings":"","what":"Addressing computational problems","title":"5. Bayesian Workflow","text":"“Starting simple complex models meeting middle” (Gelman et al 2020: 22-23) - Easy bage - eg number terms, complexity priors","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig5_workflow.html","id":"evaluating-and-using-a-fitted-model","dir":"Articles","previous_headings":"","what":"Evaluating and using a fitted model","title":"5. Bayesian Workflow","text":"bayesplot package tools posterior predictive checking [need generate outputs can fed plots]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig5_workflow.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"5. Bayesian Workflow","text":"@article{gelman2020bayesian, title={Bayesian workflow}, author={Gelman, Andrew Vehtari, Aki Simpson, Daniel Margossian, Charles C Carpenter, Bob Yao, Yuling Kennedy, Lauren Gabry, Jonah B{\"u}rkner, Paul-Christian Modr{'}k, Martin}, journal={arXiv preprint arXiv:2011.01808}, year={2020} } @article{van2021bayesian, title={Bayesian statistics modelling}, author={van de Schoot, Rens Depaoli, Sarah King, Ruth Kramer, Bianca M{\"}rtens, Kaspar Tadesse, Mahlet G Vannucci, Marina Gelman, Andrew Veen, Duco Willemsen, Joukje others}, journal={Nature Reviews Methods Primers}, volume={1}, number={1}, pages={1}, year={2021}, publisher={Nature Publishing Group UK London} } https://betanalpha.github.io/assets/case_studies/principled_bayesian_workflow.html","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig6_mortality.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"6. Modelling Mortality","text":"vignette, estimate mortality rates, summary indicators life expectancy. work data Iceland. try several methods representing age patterns, including one uses typically patterns Human Mortality Database. model-based estimates come measures uncertainty. addition bage , need package poputils, contains functions calculating life expectancy, rvec, contains data structures functions working random draws. use standard tidyverse tools data manipulation graphing.","code":"library(bage) library(poputils) library(rvec) #>  #> Attaching package: 'rvec' #> The following objects are masked from 'package:stats': #>  #>     sd, var #> The following object is masked from 'package:base': #>  #>     rank library(dplyr, warn.conflicts = FALSE) library(tidyr) library(ggplot2)"},{"path":"https://bayesiandemography.github.io/bage/articles/vig6_mortality.html","id":"the-data","dir":"Articles","previous_headings":"","what":"The data","title":"6. Modelling Mortality","text":"Iceland deaths data included bage package. contains counts deaths, estimates mid-year population, disaggregated age sex, years 1998–2022. oldest age group 105 years older. data sparse. Twenty-two percent death counts 0, half 3 less. turns five cases estimate population risk zero, deaths non-zero. left unchanged, cases cause problems later Poisson models. adjust reported population risk, based assumption people died , average, half way year. plot ‘direct’ estimates death rates first least years data. Direct estimates calculated dividing number deaths corresponding population risk, independently combination age, sex, time. results shown , log scale. dots bottom graph represent log-rates negative infinity, occur cells deaths observed. Random variation obscures patterns age 50. age 50, rates increase less linearly.","code":"dth <- bage::deaths dth #> # A tibble: 5,300 × 5 #>    age   sex     time deaths  popn #>    <fct> <fct>  <int>  <int> <dbl> #>  1 0     Female  1998      7 2051  #>  2 1     Female  1998      1 2082. #>  3 2     Female  1998      1 2088  #>  4 3     Female  1998      3 2112. #>  5 4     Female  1998      1 2204  #>  6 5     Female  1998      0 2232. #>  7 6     Female  1998      1 2175  #>  8 7     Female  1998      0 2240  #>  9 8     Female  1998      0 2261  #> 10 9     Female  1998      0 2182. #> # ℹ 5,290 more rows tail(dth, n = 3) #> # A tibble: 3 × 5 #>   age   sex    time deaths  popn #>   <fct> <fct> <int>  <int> <dbl> #> 1 103   Male   2022      0   1.5 #> 2 104   Male   2022      1   1   #> 3 105+  Male   2022      0   0 dth %>%   count(deaths) %>%   mutate(percent = round(100 * n / sum(n)),          cumulative_percent = cumsum(percent)) %>%   head() #> # A tibble: 6 × 4 #>   deaths     n percent cumulative_percent #>    <int> <int>   <dbl>              <dbl> #> 1      0  1180      22                 22 #> 2      1   701      13                 35 #> 3      2   424       8                 43 #> 4      3   333       6                 49 #> 5      4   239       5                 54 #> 6      5   194       4                 58 dth |>    filter(popn == 0 & deaths > 0) #> # A tibble: 5 × 5 #>   age   sex     time deaths  popn #>   <fct> <fct>  <int>  <int> <dbl> #> 1 104   Male    2001      1     0 #> 2 104   Male    2007      1     0 #> 3 104   Male    2012      1     0 #> 4 104   Female  2019      2     0 #> 5 105+  Male    2020      1     0 dth <- dth |>   mutate(popn = if_else(popn == 0 & deaths > 0, 0.5 * deaths, popn)) dth |>   filter(time %in% c(1998, 2010, 2022)) |>   mutate(rate = deaths / popn) |>   ggplot(aes(x = age_mid(age), y = rate)) + ## 'age_mid()' returns the mid point   facet_grid(vars(sex), vars(time)) +       ## of the age group, which is useful   geom_point(alpha = 0.5) +                 ## for plotting   scale_y_log10() +   ggtitle(\"Direct estimates of mortality rates\") #> Warning in scale_y_log10(): log-10 transformation introduced #> infinite values. #> Warning: Removed 6 rows containing missing values or values outside the scale range #> (`geom_point()`)."},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig6_mortality.html","id":"specifying-the-model","dir":"Articles","previous_headings":"Initial model","what":"Specifying the model","title":"6. Modelling Mortality","text":"fit initial simple model. prior model, allow interaction age sex, allow interactions involving time. assume, words, mortality rates rise fall rate across age-sex groups. assumption unlikely met exactly practice, revisit later. accept default priors main effects interactions. can seen bottom printout, mod_pois() guessed variables represent age, sex, time. (bases guesses variable names.) Age time main effects, default, get “random walk” priors, terms get “normal” priors.","code":"mod_base <- mod_pois(deaths ~ age * sex + time,                  data = dth,                  exposure = popn) mod_base #> -- Unfitted Poisson model -- #>  #>      deaths ~ age * sex + time #>  #> (Intercept) ~ NFix() #>         age ~ RW() #>         sex ~ NFix() #>        time ~ RW() #>     age:sex ~ ERW() #>  #>      dispersion: mean=1 #>        exposure: popn #>         var_age: age #>   var_sexgender: sex #>        var_time: time #>          n_draw: 1000"},{"path":"https://bayesiandemography.github.io/bage/articles/vig6_mortality.html","id":"mathematical-description-of-the-model","dir":"Articles","previous_headings":"Initial model","what":"Mathematical description of the model","title":"6. Modelling Mortality","text":"model implemented mod_base assumes \\[\\begin{equation}   y_i \\sim \\text{Poisson}(\\gamma_i w_i) \\end{equation}\\] \\(y_i\\) deaths age-sex-time cell \\(\\), \\(w_i\\) population risk, \\(\\gamma_i\\) underlying death rate. modelling deaths draws Poisson distribution, model recognizes contribution individual-level randomness observed death counts. Recognizing individual-level randomness important analyzing data cell counts small. Death rates \\(\\gamma_i\\) treated draws Gamma distribution, \\[\\begin{equation}   \\gamma_i \\sim \\text{Gamma}(\\xi^{-1}, (\\xi \\mu_i)^{-1}). \\end{equation}\\] expected value \\(\\gamma_i\\) \\(\\mu_i\\), variance \\(\\xi \\mu_i^2\\). modelling \\(\\gamma_i\\) draw distribution, recognizing model able explain variation \\(\\gamma_i\\). Larger values \\(\\xi\\) imply unexplained variation. model \\(\\mu_i\\), log scale, sum factors formed dimensions data, \\[\\begin{equation}   \\log \\mu_i = \\sum_{m=0}^4 \\beta_{j_i^m}^{(m)} \\end{equation}\\] \\(\\pmb{\\beta}^{(0)}\\) intercept, \\(\\pmb{\\beta}^{(m)}\\), \\(m = 1, \\cdots, 4\\), main effect interaction, \\(j_i^m\\) element \\(\\pmb{\\beta}^{(m)}\\) associated cell \\(\\). \\(\\beta^{(m)}\\) model \\(\\mu_i\\) receives prior. default prior intercept \\[\\begin{equation}   \\beta^{(0)} \\sim \\text{N}(0, 10^2) \\end{equation}\\] prior allows much broader range values expect see practice. rarely expect see values \\(\\gamma_i\\) lower 0.001 (-7 log scale) higher 1 (0). default prior age first-order random walk, \\[\\begin{equation}   \\beta_j^{(1)} \\sim \\text{N}(\\beta_{j-1}^{(1)}, \\tau_1^2), \\quad j = 2, \\dots, J_1 \\end{equation}\\] random walk prior embodies idea expect changes one age group next relatively small, neighbouring age groups strongly correlated distant age groups. value standard deviation parameter \\(\\tau_1\\) estimated part model, prior, \\[\\begin{equation}     \\tau_1^2 \\sim \\text{N}^+(0, 1) \\end{equation}\\] \\(\\text{N}^+(0, 1)\\) denotes half-normal distribution, , normal distribution restricted non-negative values. prior properly identified, need place constraint overall level. use soft constraint mean, \\[\\begin{equation}   \\frac{1}{J_1}\\sum_{j=1}^{J_1} \\beta_j^{(1)} \\sim \\text{N}(0, 1) \\end{equation}\\] sex main effect prior \\[\\begin{align}   \\beta_j^{(2)} & \\sim \\text{N}(0, \\tau_2^2), \\quad j = 1, 2 \\\\   \\tau_2^2 & \\sim \\text{N}^+(0, 1) \\end{align}\\] time term \\(\\beta^{(3)}\\) random-walk prior age effect. age-sex interaction \\(\\beta^{(4)}\\) prior sex effect. Finally, dispersion term \\(\\xi\\) penalized-complexity prior [@simpson2022priors], \\[\\begin{equation}     p(\\xi) = \\frac{1}{2 \\sqrt{\\xi}}e^{-\\sqrt{\\xi}}. \\end{equation}\\]","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig6_mortality.html","id":"fitting-the-model","dir":"Articles","previous_headings":"Initial model","what":"Fitting the model","title":"6. Modelling Mortality","text":"fit model calling function fit():","code":"mod_base <- fit(mod_base) mod_base #> -- Fitted Poisson model -- #>  #>      deaths ~ age * sex + time #>  #> (Intercept) ~ NFix() #>         age ~ RW() #>         sex ~ NFix() #>        time ~ RW() #>     age:sex ~ ERW() #>  #>      dispersion: mean=1 #>        exposure: popn #>         var_age: age #>   var_sexgender: sex #>        var_time: time #>          n_draw: 1000"},{"path":"https://bayesiandemography.github.io/bage/articles/vig6_mortality.html","id":"extracting-rates","dir":"Articles","previous_headings":"Initial model","what":"Extracting rates","title":"6. Modelling Mortality","text":"extract estimated rates fitted model object, use function augment(). Function augment() starts original data, adds column called .observed containing direct estimates (\\(y_i/w_i\\)), column called .fitted containing estimates rates (\\(\\gamma_i\\)), column called .expected containing expected values rates (\\(\\mu_i\\)). .fitted .expected columns consist rvecs. rvec vector-like object holds multiple draws, case draws posterior distributions. Next extract rates estimates selected years, summarize posterior distributions. plot point estimates 95% credible intervals modelled estimates, together original direct estimates,","code":"aug_base <- augment(mod_base) aug_base #> # A tibble: 5,300 × 8 #>    age   sex     time deaths  popn .observed                    .fitted #>    <fct> <fct>  <int>  <int> <dbl>     <dbl>               <rdbl<1000>> #>  1 0     Female  1998      7 2051   0.00341     0.0021 (0.0016, 0.0025) #>  2 1     Female  1998      1 2082.  0.000480   5e-04 (0.00037, 0.00066) #>  3 2     Female  1998      1 2088   0.000479 0.00026 (0.00019, 0.00036) #>  4 3     Female  1998      3 2112.  0.00142  0.00017 (0.00011, 0.00024) #>  5 4     Female  1998      1 2204   0.000454   0.00012 (8e-05, 0.00018) #>  6 5     Female  1998      0 2232.  0        0.00011 (7.3e-05, 0.00016) #>  7 6     Female  1998      1 2175   0.000460 9.6e-05 (6.2e-05, 0.00014) #>  8 7     Female  1998      0 2240   0        7.6e-05 (4.8e-05, 0.00012) #>  9 8     Female  1998      0 2261   0        7.7e-05 (5.1e-05, 0.00012) #> 10 9     Female  1998      0 2182.  0        8.1e-05 (5.5e-05, 0.00012) #> # ℹ 5,290 more rows #> # ℹ 1 more variable: .expected <rdbl<1000>> rates_base <- aug_base |>   filter(time %in% c(1998, 2010, 2022)) |>   select(age, sex, time, .observed, .fitted) |>   mutate(draws_ci(.fitted)) rates_base #> # A tibble: 636 × 8 #>    age   sex     time .observed                    .fitted .fitted.lower #>    <fct> <fct>  <int>     <dbl>               <rdbl<1000>>         <dbl> #>  1 0     Female  1998  0.00341     0.0021 (0.0016, 0.0025)     0.00164   #>  2 1     Female  1998  0.000480   5e-04 (0.00037, 0.00066)     0.000374  #>  3 2     Female  1998  0.000479 0.00026 (0.00019, 0.00036)     0.000189  #>  4 3     Female  1998  0.00142  0.00017 (0.00011, 0.00024)     0.000111  #>  5 4     Female  1998  0.000454   0.00012 (8e-05, 0.00018)     0.0000804 #>  6 5     Female  1998  0        0.00011 (7.3e-05, 0.00016)     0.0000733 #>  7 6     Female  1998  0.000460 9.6e-05 (6.2e-05, 0.00014)     0.0000623 #>  8 7     Female  1998  0        7.6e-05 (4.8e-05, 0.00012)     0.0000484 #>  9 8     Female  1998  0        7.7e-05 (5.1e-05, 0.00012)     0.0000511 #> 10 9     Female  1998  0        8.1e-05 (5.5e-05, 0.00012)     0.0000553 #> # ℹ 626 more rows #> # ℹ 2 more variables: .fitted.mid <dbl>, .fitted.upper <dbl> ggplot(rates_base, aes(x = age_mid(age),               ymin = .fitted.lower,              y = .fitted.mid,              ymax = .fitted.upper)) +   facet_grid(vars(sex), vars(time)) +   geom_ribbon(fill = \"lightblue\") +   geom_line(col= \"darkblue\") +   geom_point(aes(y = .observed),              size = 0.2) +   scale_y_log10() +   ggtitle(\"Modelled and direct estimates of mortality rates - base model\") #> Warning in scale_y_log10(): log-10 transformation introduced #> infinite values. #> Warning: Removed 6 rows containing missing values or values outside the scale range #> (`geom_point()`)."},{"path":"https://bayesiandemography.github.io/bage/articles/vig6_mortality.html","id":"extracting-higher-level-terms","dir":"Articles","previous_headings":"Initial model","what":"Extracting higher-level terms","title":"6. Modelling Mortality","text":"can gain insights model extracting graphing estimates main effects interactions, \\(\\pmb{\\beta}^{(m)}\\). Estimates main effects interactions, higher-level parameters, can obtained function components(). components() returns tibble contain estimates higher-level parameters. extract age effect, prepare graphing, use graph age effect reveals typical profile mortality rates,","code":"comp_base <- components(mod_base) comp_base #> # A tibble: 350 × 4 #>    term        component level                 .fitted #>    <chr>       <chr>     <chr>            <rdbl<1000>> #>  1 (Intercept) effect    (Intercept) -5.4 (-5.5, -5.4) #>  2 age         effect    0           -0.86 (-1, -0.72) #>  3 age         effect    1             -2.3 (-2.5, -2) #>  4 age         effect    2           -2.9 (-3.2, -2.7) #>  5 age         effect    3           -3.4 (-3.7, -3.1) #>  6 age         effect    4             -3.7 (-4, -3.3) #>  7 age         effect    5           -3.7 (-4.1, -3.4) #>  8 age         effect    6           -3.9 (-4.2, -3.5) #>  9 age         effect    7           -4.1 (-4.5, -3.7) #> 10 age         effect    8             -4 (-4.4, -3.7) #> # ℹ 340 more rows age_effect <- comp_base |>   filter(component == \"effect\",          term == \"age\") %>%   mutate(draws_ci(.fitted)) ggplot(age_effect,        aes(x = age_mid(level),            y = .fitted.mid,            ymin = .fitted.lower,            ymax = .fitted.upper)) +   geom_ribbon(fill = \"lightblue\") +   geom_line() +   ggtitle(\"Age effect\")"},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/articles/vig6_mortality.html","id":"mathematical-structure","dir":"Articles","previous_headings":"Revised model","what":"Mathematical structure","title":"6. Modelling Mortality","text":"Human Mortality Database provides estimates mortality rates many countries. Let \\(\\pmb{M}\\) denote matrix holding estimates, log scale. applying Singlar Value Decomposition \\(\\pmb{M}\\), rescaling, can construct matrix \\(\\pmb{F}\\) column vector \\(\\pmb{g}\\), parsimoniously summarize age-profiles, age-sex profiles, observed \\(\\pmb{M}\\). \\(z\\) vector independent draws \\(\\text{N}(0,1)\\) distribution, resulting vector \\[\\begin{equation}   \\pmb{m} = \\pmb{F} \\pmb{z} + \\pmb{g} \\end{equation}\\] looks like randomly-selected column \\(\\pmb{M}\\). use \\(\\pmb{F}\\) \\(\\pmb{g}\\) build priors age effects age-sex interactions. prior age effects \\[\\begin{align}   \\pmb{\\beta}^{(1)} & = \\pmb{F} \\pmb{\\alpha} + \\pmb{g} \\\\   \\alpha_k & \\sim \\text{N}(0, 1), \\quad k = 1, \\cdots, K \\end{align}\\] \\(K\\) chosen user. prior age-sex interactions looks except , default, calculations done separately sex.","code":""},{"path":"https://bayesiandemography.github.io/bage/articles/vig6_mortality.html","id":"specifying-the-new-model","dir":"Articles","previous_headings":"Revised model","what":"Specifying the new model","title":"6. Modelling Mortality","text":"","code":"mod_hmd <- mod_pois(deaths ~ age:sex + time,                     data = dth,                     exposure = popn) |>   set_prior(age:sex ~ SVDS(HMD)) mod_hmd #> -- Unfitted Poisson model -- #>  #>      deaths ~ age:sex + time #>  #> (Intercept) ~ NFix() #>        time ~ RW() #>     age:sex ~ SVDS(HMD) #>  #>      dispersion: mean=1 #>        exposure: popn #>         var_age: age #>   var_sexgender: sex #>        var_time: time #>          n_draw: 1000 mod_hmd <- fit(mod_hmd) mod_hmd #> -- Fitted Poisson model -- #>  #>      deaths ~ age:sex + time #>  #> (Intercept) ~ NFix() #>        time ~ RW() #>     age:sex ~ SVDS(HMD) #>  #>      dispersion: mean=1 #>        exposure: popn #>         var_age: age #>   var_sexgender: sex #>        var_time: time #>          n_draw: 1000 aug_hmd <- augment(mod_hmd)  rates_hmd <- aug_hmd |>   filter(time %in% c(1998, 2010, 2022)) |>   select(age, sex, time, .observed, .fitted) |>   mutate(draws_ci(.fitted))  ggplot(rates_hmd, aes(x = age_mid(age),               ymin = .fitted.lower,              y = .fitted.mid,              ymax = .fitted.upper)) +   facet_grid(vars(sex), vars(time)) +   geom_ribbon(fill = \"lightblue\") +   geom_line(col= \"darkblue\") +   geom_point(aes(y = .observed),              size = 0.2) +   scale_y_log10() +   ggtitle(\"Modelled and direct estimates of mortality rates - HMD model\") #> Warning in scale_y_log10(): log-10 transformation introduced #> infinite values. #> Warning: Removed 6 rows containing missing values or values outside the scale range #> (`geom_point()`). comp_hmd <- components(mod_hmd)  age_sex_interact <- comp_hmd |>   filter(component == \"effect\",          term == \"age:sex\") |>   separate_wider_delim(level, delim = \".\", names = c(\"age\", \"sex\")) |>   mutate(draws_ci(.fitted))  ggplot(age_sex_interact,        aes(x = age_mid(age),            y = .fitted.mid,            ymin = .fitted.lower,            ymax = .fitted.upper)) +   geom_ribbon(aes(fill = sex),               alpha = 0.3) +   geom_line(aes(col = sex)) +   ggtitle(\"Age-sex interaction\")"},{"path":"https://bayesiandemography.github.io/bage/articles/vig6_mortality.html","id":"model-testing","dir":"Articles","previous_headings":"","what":"Model testing","title":"6. Modelling Mortality","text":"","code":"rep_data_base <- replicate_data(mod_base, condition_on = \"meanpar\")  data <- rep_data_base |>   filter(time == 2022) |>   select(-popn) |>   pivot_wider(names_from = sex, values_from = deaths) |>   mutate(diff = Female - Male) ggplot(data, aes(x = age_mid(age), y = diff)) +   facet_wrap(vars(.replicate)) +   geom_point(size = 0.2) rep_data_hmd <- replicate_data(mod_hmd, condition_on = \"meanpar\")  data <- rep_data_hmd |>   filter(time == 2022) |>   select(-popn) |>   pivot_wider(names_from = sex, values_from = deaths) |>   mutate(diff = Female - Male) ggplot(data, aes(x = age_mid(age), y = diff)) +   facet_wrap(vars(.replicate)) +   geom_point(size = 0.2)"},{"path":"https://bayesiandemography.github.io/bage/articles/vig6_mortality.html","id":"life-expectancy-and-life-tables","dir":"Articles","previous_headings":"","what":"Life expectancy and life tables","title":"6. Modelling Mortality","text":"","code":"lifeexp_hmd <- mod_hmd |>   augment() |>   lifeexp(mx = .fitted,           by = c(time, sex)) lifeexp_hmd #> # A tibble: 50 × 3 #>     time sex              ex #>    <int> <fct>  <rdbl<1000>> #>  1  1998 Female  82 (81, 82) #>  2  1998 Male    78 (78, 78) #>  3  1999 Female  82 (81, 82) #>  4  1999 Male    78 (77, 78) #>  5  2000 Female  82 (82, 82) #>  6  2000 Male    78 (78, 79) #>  7  2001 Female  82 (82, 83) #>  8  2001 Male    79 (78, 79) #>  9  2002 Female  82 (82, 83) #> 10  2002 Male    79 (79, 79) #> # ℹ 40 more rows lifeexp_hmd <- mod_hmd |>   augment() |>   lifeexp(mx = .fitted,           by = c(time, sex)) lifeexp_hmd #> # A tibble: 50 × 3 #>     time sex              ex #>    <int> <fct>  <rdbl<1000>> #>  1  1998 Female  82 (81, 82) #>  2  1998 Male    78 (78, 78) #>  3  1999 Female  82 (81, 82) #>  4  1999 Male    78 (77, 78) #>  5  2000 Female  82 (82, 82) #>  6  2000 Male    78 (78, 79) #>  7  2001 Female  82 (82, 83) #>  8  2001 Male    79 (78, 79) #>  9  2002 Female  82 (82, 83) #> 10  2002 Male    79 (79, 79) #> # ℹ 40 more rows"},{"path":"https://bayesiandemography.github.io/bage/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"John Bryant. Author, maintainer. Junni Zhang. Author.","code":""},{"path":"https://bayesiandemography.github.io/bage/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Bryant J, Zhang J (2024). bage: Bayesian Estimation Forecasting Age-Specific Rates. R package version 0.4.1, https://bayesiandemography.github.io/bage/.","code":"@Manual{,   title = {bage: Bayesian Estimation and Forecasting of Age-Specific Rates},   author = {John Bryant and Junni Zhang},   year = {2024},   note = {R package version 0.4.1},   url = {https://bayesiandemography.github.io/bage/}, }"},{"path":"https://bayesiandemography.github.io/bage/index.html","id":"bage-","dir":"","previous_headings":"","what":"Bayesian Estimation and Forecasting of Age-Specific Rates","title":"Bayesian Estimation and Forecasting of Age-Specific Rates","text":"Fast Bayesian estimation forecasting age-specific rates.","code":""},{"path":"https://bayesiandemography.github.io/bage/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Bayesian Estimation and Forecasting of Age-Specific Rates","text":"","code":"devtools::install_github(\"bayesiandemography/bage\")"},{"path":"https://bayesiandemography.github.io/bage/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Bayesian Estimation and Forecasting of Age-Specific Rates","text":"Fit Poisson model data injuries. Extract model-based direct estimates.","code":"library(bage) mod <- mod_pois(injuries ~ age:sex + ethnicity + year,                 data = injuries,                 exposure = popn) |>   fit() mod #> -- Fitted Poisson model -- #>  #>    injuries ~ age:sex + ethnicity + year #> (Intercept) ~ NFixed(sd=10) #>   ethnicity ~ N() #>        year ~ RW() #>     age:sex ~ N() #>  #>        exposure: popn #>         var_age: age #>   var_sexgender: sex #>        var_time: year #>          n_draw: 1000 augment(mod) #> # A tibble: 912 × 8 #>    age   sex    ethnicity  year injuries  popn                    .fitted #>    <fct> <chr>  <chr>     <int>    <int> <int>               <rdbl<1000>> #>  1 0-4   Female Maori      2000       12 35830 0.00024 (0.00022, 0.00027) #>  2 5-9   Female Maori      2000        6 35120 6.8e-05 (5.6e-05, 8.3e-05) #>  3 10-14 Female Maori      2000        3 32830 9.1e-05 (7.8e-05, 0.00011) #>  4 15-19 Female Maori      2000        6 27130 0.00043 (0.00039, 0.00047) #>  5 20-24 Female Maori      2000        6 24380 0.00042 (0.00038, 0.00047) #>  6 25-29 Female Maori      2000        6 24160 0.00035 (0.00031, 0.00039) #>  7 30-34 Female Maori      2000       12 22560 0.00032 (0.00029, 0.00036) #>  8 35-39 Female Maori      2000        3 22230 0.00035 (0.00032, 0.00039) #>  9 40-44 Female Maori      2000        6 18130 0.00034 (0.00031, 0.00038) #> 10 45-49 Female Maori      2000        6 13770   0.00036 (0.00033, 4e-04) #> # ℹ 902 more rows #> # ℹ 1 more variable: .observed <dbl>"},{"path":"https://bayesiandemography.github.io/bage/reference/AR.html","id":null,"dir":"Reference","previous_headings":"","what":"Autoregressive Prior — AR","title":"Autoregressive Prior — AR","text":"Autoregressive prior order k. Used model main effects: typically time main effects.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/AR.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Autoregressive Prior — AR","text":"","code":"AR(n = 2, s = 1)"},{"path":"https://bayesiandemography.github.io/bage/reference/AR.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Autoregressive Prior — AR","text":"n order model. Default 2. s Scale half-normal prior standard deviation (\\(\\tau\\)). Default 1.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/AR.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Autoregressive Prior — AR","text":"object class \"bage_prior_ar\".","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/AR.html","id":"mathematical-details","dir":"Reference","previous_headings":"","what":"Mathematical details","title":"Autoregressive Prior — AR","text":"\\(\\beta_j\\) \\(j\\)th element main effect, $$\\beta_j = \\phi_1 \\beta_{j-1} + \\cdots + \\phi_k \\beta_{j-k} + \\epsilon_j$$ $$\\epsilon_j \\sim \\text{N}(0, \\omega^2)$$ \\(\\omega\\) chosen \\(\\beta_j\\) marginal variance \\(\\sigma^2\\). value \\(\\tau\\) prior $$\\tau \\sim \\text{N}^+(0, \\text{s}^2)$$ \\(\\phi_1, \\cdots, \\phi_k\\) restricted values -1 1 jointly lead stationary models. quantity \\(r = \\sqrt{\\phi_1^2 + \\cdots + \\phi_k^2}\\) given boundary-avoiding prior \\(r \\sim \\text{Beta}(3, 3)\\).","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/AR.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Autoregressive Prior — AR","text":"TMB documentation ARk","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/AR.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Autoregressive Prior — AR","text":"","code":"AR(n = 3) #> $i_prior #> [1] 5 #>  #> $const #> shape1 shape2    min    max  scale  #>      3      3     -1      1      1  #>  #> $specific #> $specific$n #> [1] 3 #>  #> $specific$shape1 #> [1] 3 #>  #> $specific$shape2 #> [1] 3 #>  #> $specific$min #> [1] -1 #>  #> $specific$max #> [1] 1 #>  #> $specific$scale #> [1] 1 #>  #> $specific$nm #> [1] \"AR\" #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_ar\" \"bage_prior\"    AR(n = 3, s = 2.4) #> $i_prior #> [1] 5 #>  #> $const #> shape1 shape2    min    max  scale  #>    3.0    3.0   -1.0    1.0    2.4  #>  #> $specific #> $specific$n #> [1] 3 #>  #> $specific$shape1 #> [1] 3 #>  #> $specific$shape2 #> [1] 3 #>  #> $specific$min #> [1] -1 #>  #> $specific$max #> [1] 1 #>  #> $specific$scale #> [1] 2.4 #>  #> $specific$nm #> [1] \"AR\" #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_ar\" \"bage_prior\""},{"path":"https://bayesiandemography.github.io/bage/reference/AR1.html","id":null,"dir":"Reference","previous_headings":"","what":"AR1 Prior — AR1","title":"AR1 Prior — AR1","text":"Autoregressive prior order 1","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/AR1.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"AR1 Prior — AR1","text":"","code":"AR1(min = 0.8, max = 0.98, s = 1)"},{"path":"https://bayesiandemography.github.io/bage/reference/AR1.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"AR1 Prior — AR1","text":"min, max Minimum maximum values autocorrelation parameter (\\(\\phi\\)). Defaults 0.8 0.98. s Scale half-normal prior standard deviation (\\(\\tau\\)). Default 1.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/AR1.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"AR1 Prior — AR1","text":"object class \"bage_prior_ar\".","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/AR1.html","id":"mathematical-details","dir":"Reference","previous_headings":"","what":"Mathematical details","title":"AR1 Prior — AR1","text":"\\(\\beta_j\\) \\(j\\)th element main effect, $$\\beta_0 \\sim \\text{N}(0, \\sigma^2)$$ $$\\beta_j = \\phi \\beta_{j-1} + \\sqrt{1 - \\phi^2}\\epsilon_j$$ $$\\epsilon \\sim \\text{N}(0, \\tau^2)$$ \\(\\tau\\) drawn half-normal distribition scale set s argument. Correlation parameter \\(\\phi\\) constrained lie interval (\\text{min}, \\text{max}). prior distribution \\(\\phi\\) $$\\phi = (\\text{max} - \\text{min}) \\phi' - \\text{min}$$ $$\\phi' \\sim \\text{beta}(2, 2)$$.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/AR1.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"AR1 Prior — AR1","text":"TMB documentation AR1","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/AR1.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"AR1 Prior — AR1","text":"","code":"AR1() #> $i_prior #> [1] 5 #>  #> $const #> shape1 shape2    min    max  scale  #>   3.00   3.00   0.80   0.98   1.00  #>  #> $specific #> $specific$n #> [1] 1 #>  #> $specific$shape1 #> [1] 3 #>  #> $specific$shape2 #> [1] 3 #>  #> $specific$min #> [1] 0.8 #>  #> $specific$max #> [1] 0.98 #>  #> $specific$scale #> [1] 1 #>  #> $specific$nm #> [1] \"AR1\" #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_ar\" \"bage_prior\"    AR1(min = 0, max = 1, s = 2.4) #> $i_prior #> [1] 5 #>  #> $const #> shape1 shape2    min    max  scale  #>    3.0    3.0    0.0    1.0    2.4  #>  #> $specific #> $specific$n #> [1] 1 #>  #> $specific$shape1 #> [1] 3 #>  #> $specific$shape2 #> [1] 3 #>  #> $specific$min #> [1] 0 #>  #> $specific$max #> [1] 1 #>  #> $specific$scale #> [1] 2.4 #>  #> $specific$nm #> [1] \"AR1\" #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_ar\" \"bage_prior\""},{"path":"https://bayesiandemography.github.io/bage/reference/EAR.html","id":null,"dir":"Reference","previous_headings":"","what":"Exchangeable Autoregressive Prior — EAR","title":"Exchangeable Autoregressive Prior — EAR","text":"exchangeable autoregressive prior used interactions. autoregressive model order \\(k\\) applied 'along' variable, within combination values '' variables. damping coefficients shared across different combinations '' variables. series within combination '' variables treated exchangeable.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/EAR.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Exchangeable Autoregressive Prior — EAR","text":"","code":"EAR(n = 2, s = 1, along = NULL)"},{"path":"https://bayesiandemography.github.io/bage/reference/EAR.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Exchangeable Autoregressive Prior — EAR","text":"n order model. s Scale half-normal prior standard deviation (\\(\\tau\\)). Defaults 1. along Name one dimensions interaction. Optional, provided data contain time age dimension.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/EAR.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Exchangeable Autoregressive Prior — EAR","text":"object class \"bage_prior_ear\".","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/EAR.html","id":"-along-and-by-variables","dir":"Reference","previous_headings":"","what":"'Along' and 'by' variables","title":"Exchangeable Autoregressive Prior — EAR","text":"priors interactions distinguish 'along' '' variables. 'along' variable typically time, , interactions involving time, typically age. '' variables everything else. interaction region, sex, time, instance, 'along' variable likely time, '' variables likely region sex. along argument supplied, default value chosen follows: interaction contains time variable, 'along' variable assumed time; otherwise, interaction contains age variable, 'along' variable assumed age; otherwise, error raised.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/EAR.html","id":"mathematical-details","dir":"Reference","previous_headings":"","what":"Mathematical details","title":"Exchangeable Autoregressive Prior — EAR","text":"\\(\\beta_{u,v}\\) \\(v\\)th element interaction within \\(u\\)th combination '' variables, $$x_{u,v} = \\phi_1 x_{u,v-1} + \\cdots + \\phi_k x_{u,v-k} + \\epsilon_{u,v}$$ $$\\epsilon_{u,v} \\sim \\text{N}(0, \\omega^2)$$ \\(\\omega\\) chosen \\(x_{u,v}\\) marginal variance \\(\\tau^2\\). value \\(\\tau\\) prior $$\\tau \\sim \\text{N}^+(0, \\text{s}^2)$$ \\(\\phi_1, \\cdots, \\phi_k\\) jointly restricted values -1 1 lead stationary models. quantity \\(r = \\sqrt{\\phi_1^2 + \\cdots + \\phi_k^2}\\) given boundary-avoiding prior \\(r \\sim \\text{Beta}(3, 3)\\).","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/EAR.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Exchangeable Autoregressive Prior — EAR","text":"TMB documentation ARk","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/EAR.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Exchangeable Autoregressive Prior — EAR","text":"","code":"EAR(n = 3) #> $i_prior #> [1] 12 #>  #> $const #> shape1 shape2    min    max  scale  #>      3      3     -1      1      1  #>  #> $specific #> $specific$n #> [1] 3 #>  #> $specific$shape1 #> [1] 3 #>  #> $specific$shape2 #> [1] 3 #>  #> $specific$min #> [1] -1 #>  #> $specific$max #> [1] 1 #>  #> $specific$scale #> [1] 1 #>  #> $specific$along #> NULL #>  #> $specific$nm #> [1] \"EAR\" #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_ear\" \"bage_prior\"     EAR(n = 3, s = 2.4) #> $i_prior #> [1] 12 #>  #> $const #> shape1 shape2    min    max  scale  #>    3.0    3.0   -1.0    1.0    2.4  #>  #> $specific #> $specific$n #> [1] 3 #>  #> $specific$shape1 #> [1] 3 #>  #> $specific$shape2 #> [1] 3 #>  #> $specific$min #> [1] -1 #>  #> $specific$max #> [1] 1 #>  #> $specific$scale #> [1] 2.4 #>  #> $specific$along #> NULL #>  #> $specific$nm #> [1] \"EAR\" #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_ear\" \"bage_prior\"     EAR(along = \"cohort\") #> $i_prior #> [1] 12 #>  #> $const #> shape1 shape2    min    max  scale  #>      3      3     -1      1      1  #>  #> $specific #> $specific$n #> [1] 2 #>  #> $specific$shape1 #> [1] 3 #>  #> $specific$shape2 #> [1] 3 #>  #> $specific$min #> [1] -1 #>  #> $specific$max #> [1] 1 #>  #> $specific$scale #> [1] 1 #>  #> $specific$along #> [1] \"cohort\" #>  #> $specific$nm #> [1] \"EAR\" #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_ear\" \"bage_prior\""},{"path":"https://bayesiandemography.github.io/bage/reference/EAR1.html","id":null,"dir":"Reference","previous_headings":"","what":"Exchangeable AR1 Prior — EAR1","title":"Exchangeable AR1 Prior — EAR1","text":"exchangeable AR1 prior used interactions. autoregressive model order \\(k\\) applied 'along' variable, within combination values '' variables. damping coefficients shared across different combinations '' variables. series within combination '' variables treated exchangeable.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/EAR1.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Exchangeable AR1 Prior — EAR1","text":"","code":"EAR1(min = 0.8, max = 0.98, s = 1, along = NULL)"},{"path":"https://bayesiandemography.github.io/bage/reference/EAR1.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Exchangeable AR1 Prior — EAR1","text":"min, max Minimum maximum values autocorrelation parameter (\\(\\phi\\)). Defaults 0.8 0.98. s Scale half-normal prior standard deviation (\\(\\tau\\)). Defaults 1. along Name one dimensions interaction. Optional, provided data contain time age dimension.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/EAR1.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Exchangeable AR1 Prior — EAR1","text":"object class \"bage_prior_ear\".","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/EAR1.html","id":"mathematical-description","dir":"Reference","previous_headings":"","what":"Mathematical description","title":"Exchangeable AR1 Prior — EAR1","text":"\\(\\beta_{u,v}\\) \\(v\\)th element interaction within \\(u\\)th combination '' variables, $$x_{u,v} = \\phi x_{u,v-1} + \\epsilon_{u,v}$$ $$\\epsilon_{u,v} \\sim \\text{N}(0, \\omega^2)$$ \\(\\omega\\) chosen \\(x_{u,v}\\) marginal variance \\(\\tau^2\\). value \\(\\tau\\) prior $$\\tau \\sim \\text{N}^+(0, \\text{s}^2)$$ Correlation parameter \\(\\phi\\) constrained lie interval (\\text{min}, \\text{max}). prior distribution \\(\\phi\\) $$\\phi = (\\text{max} - \\text{min}) \\phi' - \\text{min}$$ $$\\phi' \\sim \\text{beta}(2, 2)$$.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/EAR1.html","id":"-along-and-by-variables","dir":"Reference","previous_headings":"","what":"'Along' and 'by' variables","title":"Exchangeable AR1 Prior — EAR1","text":"priors interactions distinguish 'along' '' variables. 'along' variable typically time, , interactions involving time, typically age. '' variables everything else. interaction region, sex, time, instance, 'along' variable likely time, '' variables likely region sex. along argument supplied, default value chosen follows: interaction contains time variable, 'along' variable assumed time; otherwise, interaction contains age variable, 'along' variable assumed age; otherwise, error raised.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/EAR1.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Exchangeable AR1 Prior — EAR1","text":"TMB documentation ARk","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/EAR1.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Exchangeable AR1 Prior — EAR1","text":"","code":"EAR1() #> $i_prior #> [1] 12 #>  #> $const #> shape1 shape2    min    max  scale  #>   3.00   3.00   0.80   0.98   1.00  #>  #> $specific #> $specific$n #> [1] 1 #>  #> $specific$shape1 #> [1] 3 #>  #> $specific$shape2 #> [1] 3 #>  #> $specific$min #> [1] 0.8 #>  #> $specific$max #> [1] 0.98 #>  #> $specific$scale #> [1] 1 #>  #> $specific$along #> NULL #>  #> $specific$nm #> [1] \"EAR1\" #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_ear\" \"bage_prior\"     EAR1(min = 0, max = 1, s = 2.4) #> $i_prior #> [1] 12 #>  #> $const #> shape1 shape2    min    max  scale  #>    3.0    3.0    0.0    1.0    2.4  #>  #> $specific #> $specific$n #> [1] 1 #>  #> $specific$shape1 #> [1] 3 #>  #> $specific$shape2 #> [1] 3 #>  #> $specific$min #> [1] 0 #>  #> $specific$max #> [1] 1 #>  #> $specific$scale #> [1] 2.4 #>  #> $specific$along #> NULL #>  #> $specific$nm #> [1] \"EAR1\" #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_ear\" \"bage_prior\"     EAR1(along = \"cohort\") #> $i_prior #> [1] 12 #>  #> $const #> shape1 shape2    min    max  scale  #>   3.00   3.00   0.80   0.98   1.00  #>  #> $specific #> $specific$n #> [1] 1 #>  #> $specific$shape1 #> [1] 3 #>  #> $specific$shape2 #> [1] 3 #>  #> $specific$min #> [1] 0.8 #>  #> $specific$max #> [1] 0.98 #>  #> $specific$scale #> [1] 1 #>  #> $specific$along #> [1] \"cohort\" #>  #> $specific$nm #> [1] \"EAR1\" #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_ear\" \"bage_prior\""},{"path":"https://bayesiandemography.github.io/bage/reference/ELin.html","id":null,"dir":"Reference","previous_headings":"","what":"Exchangeable Linear Prior — ELin","title":"Exchangeable Linear Prior — ELin","text":"Prior interaction , within combination '' variables, elements 'along' variable follow straight line, idiosyncratic errors around line. combination '' variables different line, different slope. slopes drawn common distribution.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ELin.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Exchangeable Linear Prior — ELin","text":"","code":"ELin(s = 1, sd = 1, ms = 1, along = NULL)"},{"path":"https://bayesiandemography.github.io/bage/reference/ELin.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Exchangeable Linear Prior — ELin","text":"s Scale half-normal prior standard deviation (\\(\\tau\\)). Defaults 1. sd postive number. Default 1. ms positive number. Default 1. along Name one dimensions interaction. Optional, provided data contain time age dimension.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ELin.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Exchangeable Linear Prior — ELin","text":"object class \"bage_prior_elin\".","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ELin.html","id":"mathematical-details","dir":"Reference","previous_headings":"","what":"Mathematical details","title":"Exchangeable Linear Prior — ELin","text":"\\(\\beta_{u,v}\\) \\(v\\)th element interaction within \\(u\\)th combination '' variables, $$\\beta_{u,v} \\sim \\text{N}(\\eta_u q_v, \\tau^2)$$ $$q_v = - (V+1)/(V-1) + 2v/(V-1).$$ slopes \\(\\eta_u\\) drawn common distribution, $$\\eta_u \\sim \\text{N}(\\eta, \\omega^2).$$ absolute value mean \\(\\eta\\) governed parameter s: $$\\eta \\sim \\text{N}(0, \\text{s}^2).$$ Larger values \\(\\omega\\) imply variability slopes across different combinations '' variables. size \\(\\omega\\) governed parameter ms, $$\\omega \\sim \\text{N}^+(0, (\\text{ms})^2)$$ Larger values \\(\\tau\\) imply variability around line. size \\(\\tau\\) governed parameter s: $$\\tau \\sim \\text{N}^+(0, \\text{s}^2)$$ (\\(\\text{N}^+\\) denotes half-normal distribution, shape normal distribution, defined non-negative values.)","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ELin.html","id":"-along-and-by-variables","dir":"Reference","previous_headings":"","what":"'Along' and 'by' variables","title":"Exchangeable Linear Prior — ELin","text":"priors interactions distinguish 'along' '' variables. 'along' variable typically time, , interactions involving time, typically age. '' variables everything else. interaction region, sex, time, instance, 'along' variable likely time, '' variables likely region sex. along argument supplied, default value chosen follows: interaction contains time variable, 'along' variable assumed time; otherwise, interaction contains age variable, 'along' variable assumed age; otherwise, error raised.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/ELin.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Exchangeable Linear Prior — ELin","text":"","code":"ELin() #> $i_prior #> [1] 9 #>  #> $const #>    scale sd_slope   mscale  #>        1        1        1  #>  #> $specific #> $specific$scale #> [1] 1 #>  #> $specific$sd_slope #> [1] 1 #>  #> $specific$mscale #> [1] 1 #>  #> $specific$along #> NULL #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_elin\" \"bage_prior\"      ELin(s = 0.5, sd = 2, ms = 0.1, along = \"cohort\") #> $i_prior #> [1] 9 #>  #> $const #>    scale sd_slope   mscale  #>      0.5      2.0      0.1  #>  #> $specific #> $specific$scale #> [1] 0.5 #>  #> $specific$sd_slope #> [1] 2 #>  #> $specific$mscale #> [1] 0.1 #>  #> $specific$along #> [1] \"cohort\" #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_elin\" \"bage_prior\""},{"path":"https://bayesiandemography.github.io/bage/reference/ERW.html","id":null,"dir":"Reference","previous_headings":"","what":"Exchangeable Random Walk Prior — ERW","title":"Exchangeable Random Walk Prior — ERW","text":"Prior interaction, (first order) random walk model applied 'along' variable, within combination values '' variables. Standard deviations shared across different combinations '' variables. series within combination '' variables treated exchangeable.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ERW.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Exchangeable Random Walk Prior — ERW","text":"","code":"ERW(s = 1, along = NULL)"},{"path":"https://bayesiandemography.github.io/bage/reference/ERW.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Exchangeable Random Walk Prior — ERW","text":"s Scale half-normal prior standard deviation (\\(\\sigma\\)). Defaults 1. along Name one dimensions interaction. Optional, provided data contain time age dimension.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ERW.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Exchangeable Random Walk Prior — ERW","text":"object class bage_prior_erw.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ERW.html","id":"mathematical-details","dir":"Reference","previous_headings":"","what":"Mathematical details","title":"Exchangeable Random Walk Prior — ERW","text":"\\(\\beta_{u,v}\\) \\(v\\)th element interaction within \\(u\\)th combination '' variables, $$\\beta_{u,1} \\sim \\text{N}(0, 1)$$ $$\\beta_{u,v} \\sim \\text{N}(\\beta_{u,v-1}, \\tau^2), \\quad v = 2, \\cdots, V.$$ Standard deviation \\(\\tau\\) drawn half-normal distribution, $$\\tau \\sim \\text{N}^+(0, \\text{s}^2)$$ (half-normal distribution shape normal distribution, defined non-negative values.) scale half-normal distribution, s, defaults 1, can set values. Lower values s lead smoother series.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ERW.html","id":"-along-and-by-variables","dir":"Reference","previous_headings":"","what":"'Along' and 'by' variables","title":"Exchangeable Random Walk Prior — ERW","text":"priors interactions distinguish 'along' '' variables. 'along' variable typically time, , interactions involving time, typically age. '' variables everything else. interaction region, sex, time, instance, 'along' variable likely time, '' variables likely region sex. along argument supplied, default value chosen follows: interaction contains time variable, 'along' variable assumed time; otherwise, interaction contains age variable, 'along' variable assumed age; otherwise, error raised.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/ERW.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Exchangeable Random Walk Prior — ERW","text":"","code":"ERW() #> $i_prior #> [1] 13 #>  #> $const #> scale  #>     1  #>  #> $specific #> $specific$scale #> [1] 1 #>  #> $specific$along #> NULL #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_erw\" \"bage_prior\"     ERW(s = 0.5) #> $i_prior #> [1] 13 #>  #> $const #> scale  #>   0.5  #>  #> $specific #> $specific$scale #> [1] 0.5 #>  #> $specific$along #> NULL #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_erw\" \"bage_prior\""},{"path":"https://bayesiandemography.github.io/bage/reference/ERW2.html","id":null,"dir":"Reference","previous_headings":"","what":"Exchangeable Random Walk with Drift Prior — ERW2","title":"Exchangeable Random Walk with Drift Prior — ERW2","text":"Prior interaction, random walk drift model applied 'along' variable, within combination values '' variables. Standard deviations shared across different combinations '' variables. series within combination '' variables treated exchangeable.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ERW2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Exchangeable Random Walk with Drift Prior — ERW2","text":"","code":"ERW2(s = 1, along = NULL)"},{"path":"https://bayesiandemography.github.io/bage/reference/ERW2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Exchangeable Random Walk with Drift Prior — ERW2","text":"s Scale half-normal prior standard deviation (\\(\\tau\\)). Defaults 1. along Name one dimensions interaction. Optional, provided data contain time age dimension.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ERW2.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Exchangeable Random Walk with Drift Prior — ERW2","text":"object class bage_prior_erw2.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ERW2.html","id":"mathematical-details","dir":"Reference","previous_headings":"","what":"Mathematical details","title":"Exchangeable Random Walk with Drift Prior — ERW2","text":"\\(\\beta_{u,v}\\) \\(v\\)th element interaction within \\(u\\)th combination '' variables, $$\\beta_{u,v}  \\sim \\text{N}(0, 1), \\quad v = 1,2$$, $$\\beta_{u,v} \\sim \\text{N}(\\beta_{u,v-1} + \\delta_{u,v-1}, \\tau^2), \\quad v = 2, \\cdots, V$$ $$\\delta_{u,v} =  \\beta_{u,v} - \\beta_{u,v-1}.$$ Standard deviation \\(\\tau\\) drawn half-normal distribution, $$\\tau \\sim \\text{N}^+(0, \\text{s}^2)$$ (half-normal distribution shape normal distribution, defined non-negative values.) scale half-normal distribution, s, defaults 1, can set values. Lower values s lead smoother series.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ERW2.html","id":"-along-and-by-variables","dir":"Reference","previous_headings":"","what":"'Along' and 'by' variables","title":"Exchangeable Random Walk with Drift Prior — ERW2","text":"priors interactions distinguish 'along' '' variables. 'along' variable typically time, , interactions involving time, typically age. '' variables everything else. interaction region, sex, time, instance, 'along' variable likely time, '' variables likely region sex. along argument supplied, default value chosen follows: interaction contains time variable, 'along' variable assumed time; otherwise, interaction contains age variable, 'along' variable assumed age; otherwise, error raised.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/ERW2.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Exchangeable Random Walk with Drift Prior — ERW2","text":"","code":"ERW2() #> $i_prior #> [1] 15 #>  #> $const #> scale  #>     1  #>  #> $specific #> $specific$scale #> [1] 1 #>  #> $specific$along #> NULL #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_erw2\" \"bage_prior\"      ERW2(s = 0.5) #> $i_prior #> [1] 15 #>  #> $const #> scale  #>   0.5  #>  #> $specific #> $specific$scale #> [1] 0.5 #>  #> $specific$along #> NULL #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_erw2\" \"bage_prior\""},{"path":"https://bayesiandemography.github.io/bage/reference/ESVD.html","id":null,"dir":"Reference","previous_headings":"","what":"Exchangeable SVD Prior for Interactions Involving Age — ESVD","title":"Exchangeable SVD Prior for Interactions Involving Age — ESVD","text":"Specify Singular Value Decomposition (SVD) prior interactions involving age sex/gender. Age profiles \"exchangeable\" profiles combinations non-age variables drawn distribution. age profiles assumed look like drawn random external demographic database. instance,   specifies age profiles look like drawn Human Mortality Database.","code":"set_prior(mod, age ~ ESVD(HMD))"},{"path":"https://bayesiandemography.github.io/bage/reference/ESVD.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Exchangeable SVD Prior for Interactions Involving Age — ESVD","text":"","code":"ESVD(ssvd, n = 5)"},{"path":"https://bayesiandemography.github.io/bage/reference/ESVD.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Exchangeable SVD Prior for Interactions Involving Age — ESVD","text":"ssvd Object class \"bage_ssvd\" holding results scaled SVD. See current options. n Number components scaled SVD use modelling. default half number components ssvd.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ESVD.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Exchangeable SVD Prior for Interactions Involving Age — ESVD","text":"object class \"bage_prior_esvd\".","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ESVD.html","id":"mathematical-details","dir":"Reference","previous_headings":"","what":"Mathematical details","title":"Exchangeable SVD Prior for Interactions Involving Age — ESVD","text":"ESVD prior, $$\\pmb{\\beta}_u = \\pmb{F} \\pmb{\\alpha}_u + \\pmb{g}$$ \\(\\pmb{\\beta}\\)_u age profile associated combination \\(u\\) non-age variables; \\(\\pmb{X}\\) known \\(V \\times K\\) matrix, \\(V\\) number age groups, \\(K\\) much less \\(V\\); \\(\\pmb{\\alpha}\\)_u vector \\(V\\) elements; \\(\\pmb{g}\\) known vector \\(V\\) elements. elements \\(\\pmb{\\alpha}\\)_u prior $$\\alpha_{uk} \\sim \\text{N}(0, 1), \\quad = 1, \\cdots, K$$ \\(\\pmb{F}\\) \\(\\pmb{g}\\) constructed large database age-specific demographic estimates preforming SVD extracting means variances. details see TODO - REFERENCE VIGNETTE.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ESVD.html","id":"scaled-svds-currently-implemented-in-bage","dir":"Reference","previous_headings":"","what":"Scaled SVDs currently implemented in bage","title":"Exchangeable SVD Prior for Interactions Involving Age — ESVD","text":"HMD Mortality rates Human Mortality Database. LFP Labour forcce participation rates OECD.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/ESVD.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Exchangeable SVD Prior for Interactions Involving Age — ESVD","text":"","code":"ESVD(HMD) #> $i_prior #> [1] 14 #>  #> $const #> [1] 0 #>  #> $specific #> $specific$ssvd #>  #> ------------------------------------------------------------  #> <Object of class \"bage_ssvd\"> #>  #> sex/gender labels: #>      Female  #>      Male  #>  #> age labels: #>      0, 1, 2, 3, ..., 58, 59, 60+  #>      0, 1, 2, 3, ..., 63, 64, 65+  #>      0, 1, 2, 3, ..., 68, 69, 70+  #>      0, 1, 2, 3, ..., 73, 74, 75+  #>      0, 1, 2, 3, ..., 78, 79, 80+  #>      0, 1, 2, 3, ..., 83, 84, 85+  #>      0, 1, 2, 3, ..., 88, 89, 90+  #>      0, 1, 2, 3, ..., 93, 94, 95+  #>      0, 1, 2, 3, ..., 98, 99, 100+  #>      0, 1, 2, 3, ..., 103, 104, 105+  #>      0, 1, 2, 3, ..., 108, 109, 110+  #>      0, 1-4, 5-9, 10-14, ..., 50-54, 55-59, 60+  #>      0, 1-4, 5-9, 10-14, ..., 55-59, 60-64, 65+  #>      0, 1-4, 5-9, 10-14, ..., 60-64, 65-69, 70+  #>      0, 1-4, 5-9, 10-14, ..., 65-69, 70-74, 75+  #>      0, 1-4, 5-9, 10-14, ..., 70-74, 75-79, 80+  #>      0, 1-4, 5-9, 10-14, ..., 75-79, 80-84, 85+  #>      0, 1-4, 5-9, 10-14, ..., 80-84, 85-89, 90+  #>      0, 1-4, 5-9, 10-14, ..., 85-89, 90-94, 95+  #>      0, 1-4, 5-9, 10-14, ..., 90-94, 95-99, 100+  #>      0, 1-4, 5-9, 10-14, ..., 95-99, 100-104, 105+  #>      0, 1-4, 5-9, 10-14, ..., 100-104, 105-109, 110+  #>      0-4, 5-9, 10-14, 15-19, ..., 50-54, 55-59, 60+  #>      0-4, 5-9, 10-14, 15-19, ..., 55-59, 60-64, 65+  #>      0-4, 5-9, 10-14, 15-19, ..., 60-64, 65-69, 70+  #>      0-4, 5-9, 10-14, 15-19, ..., 65-69, 70-74, 75+  #>      0-4, 5-9, 10-14, 15-19, ..., 70-74, 75-79, 80+  #>      0-4, 5-9, 10-14, 15-19, ..., 75-79, 80-84, 85+  #>      0-4, 5-9, 10-14, 15-19, ..., 80-84, 85-89, 90+  #>      0-4, 5-9, 10-14, 15-19, ..., 85-89, 90-94, 95+  #>      0-4, 5-9, 10-14, 15-19, ..., 90-94, 95-99, 100+  #>      0-4, 5-9, 10-14, 15-19, ..., 95-99, 100-104, 105+  #>      0-4, 5-9, 10-14, 15-19, ..., 100-104, 105-109, 110+  #> ------------------------------------------------------------  #>  #> $specific$nm_ssvd #> [1] \"HMD\" #>  #> $specific$n #> [1] 5 #>  #> $specific$joint #> NULL #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_esvd\" \"bage_prior\"      ESVD(HMD, n = 3) #> $i_prior #> [1] 14 #>  #> $const #> [1] 0 #>  #> $specific #> $specific$ssvd #>  #> ------------------------------------------------------------  #> <Object of class \"bage_ssvd\"> #>  #> sex/gender labels: #>      Female  #>      Male  #>  #> age labels: #>      0, 1, 2, 3, ..., 58, 59, 60+  #>      0, 1, 2, 3, ..., 63, 64, 65+  #>      0, 1, 2, 3, ..., 68, 69, 70+  #>      0, 1, 2, 3, ..., 73, 74, 75+  #>      0, 1, 2, 3, ..., 78, 79, 80+  #>      0, 1, 2, 3, ..., 83, 84, 85+  #>      0, 1, 2, 3, ..., 88, 89, 90+  #>      0, 1, 2, 3, ..., 93, 94, 95+  #>      0, 1, 2, 3, ..., 98, 99, 100+  #>      0, 1, 2, 3, ..., 103, 104, 105+  #>      0, 1, 2, 3, ..., 108, 109, 110+  #>      0, 1-4, 5-9, 10-14, ..., 50-54, 55-59, 60+  #>      0, 1-4, 5-9, 10-14, ..., 55-59, 60-64, 65+  #>      0, 1-4, 5-9, 10-14, ..., 60-64, 65-69, 70+  #>      0, 1-4, 5-9, 10-14, ..., 65-69, 70-74, 75+  #>      0, 1-4, 5-9, 10-14, ..., 70-74, 75-79, 80+  #>      0, 1-4, 5-9, 10-14, ..., 75-79, 80-84, 85+  #>      0, 1-4, 5-9, 10-14, ..., 80-84, 85-89, 90+  #>      0, 1-4, 5-9, 10-14, ..., 85-89, 90-94, 95+  #>      0, 1-4, 5-9, 10-14, ..., 90-94, 95-99, 100+  #>      0, 1-4, 5-9, 10-14, ..., 95-99, 100-104, 105+  #>      0, 1-4, 5-9, 10-14, ..., 100-104, 105-109, 110+  #>      0-4, 5-9, 10-14, 15-19, ..., 50-54, 55-59, 60+  #>      0-4, 5-9, 10-14, 15-19, ..., 55-59, 60-64, 65+  #>      0-4, 5-9, 10-14, 15-19, ..., 60-64, 65-69, 70+  #>      0-4, 5-9, 10-14, 15-19, ..., 65-69, 70-74, 75+  #>      0-4, 5-9, 10-14, 15-19, ..., 70-74, 75-79, 80+  #>      0-4, 5-9, 10-14, 15-19, ..., 75-79, 80-84, 85+  #>      0-4, 5-9, 10-14, 15-19, ..., 80-84, 85-89, 90+  #>      0-4, 5-9, 10-14, 15-19, ..., 85-89, 90-94, 95+  #>      0-4, 5-9, 10-14, 15-19, ..., 90-94, 95-99, 100+  #>      0-4, 5-9, 10-14, 15-19, ..., 95-99, 100-104, 105+  #>      0-4, 5-9, 10-14, 15-19, ..., 100-104, 105-109, 110+  #> ------------------------------------------------------------  #>  #> $specific$nm_ssvd #> [1] \"HMD\" #>  #> $specific$n #> [1] 3 #>  #> $specific$joint #> NULL #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_esvd\" \"bage_prior\""},{"path":"https://bayesiandemography.github.io/bage/reference/ESVDS.html","id":null,"dir":"Reference","previous_headings":"","what":"Exchangeable SVD Prior for Interactions Involving Age and Sex/Gender — ESVDS","title":"Exchangeable SVD Prior for Interactions Involving Age and Sex/Gender — ESVDS","text":"Specify Singular Value Decomposition (SVD) prior interaction involving age, sex/gender, least one dimension. Age-sex profiles \"exchangeable\", profiles combinations non-age, non-sex variables drawn distribution. age-sex profiles assumed look like drawn random external demographic database. instance,   specifies age-sex profiles look like drawn Human Mortality Database.","code":"set_prior(mod, age:sex ~ ESVDS(HMD))"},{"path":"https://bayesiandemography.github.io/bage/reference/ESVDS.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Exchangeable SVD Prior for Interactions Involving Age and Sex/Gender — ESVDS","text":"","code":"ESVDS(ssvd, n = 5, joint = FALSE)"},{"path":"https://bayesiandemography.github.io/bage/reference/ESVDS.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Exchangeable SVD Prior for Interactions Involving Age and Sex/Gender — ESVDS","text":"ssvd Object class \"bage_ssvd\" holding results scaled SVD. See current options. n Number components scaled SVD use modelling. default half number components ssvd. joint Whether use combined separate SVDs. Default FALSE. See details.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ESVDS.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Exchangeable SVD Prior for Interactions Involving Age and Sex/Gender — ESVDS","text":"object class \"bage_prior_esvd\".","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ESVDS.html","id":"mathematical-details","dir":"Reference","previous_headings":"","what":"Mathematical details","title":"Exchangeable SVD Prior for Interactions Involving Age and Sex/Gender — ESVDS","text":"Let \\(V\\) denote number age groups, \\(S\\) number sexes/genders, \\(U\\) number combinations non-age, non-sex variables. joint FALSE, $$\\pmb{\\beta}_{us} = \\pmb{F}_s \\pmb{\\alpha}_{us} + \\pmb{g}_s,   \\quad, u = 1, \\cdots, U, s = 1, \\cdots S$$ \\(\\pmb{\\beta}_{us}\\), \\(\\pmb{\\alpha}_{us}\\), \\(\\pmb{g}_{us}\\) \\(V\\) elements, \\(\\pmb{F}\\) \\(V\\) rows. joint TRUE, $$\\pmb{\\beta}_u = \\pmb{F} \\pmb{\\alpha}_u + \\pmb{g}$$ \\(\\pmb{\\beta}_u\\), \\(\\pmb{\\alpha}_u\\), \\(\\pmb{g}\\) \\(V \\times S\\) elements, \\(\\pmb{F}\\) \\(V \\times S\\) rows. \\(\\pmb{F}_s\\), \\(\\pmb{g}_s\\), \\(\\pmb{F}\\), \\(\\pmb{g}\\), estimated externally, using estimates demographic database, treated fixed known. elements \\(\\pmb{\\alpha}_{us}\\) \\(\\pmb{\\alpha}_u\\) prior $$\\alpha_{uk} \\sim \\text{N}(0, 1)$$ description construction \\(\\pmb{F}_s\\), \\(\\pmb{F}\\), \\(\\pmb{g}_s\\), \\(\\pmb{g}\\), see TODO - REFERENCE VIGNETTE.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ESVDS.html","id":"joint-or-independent-svds","dir":"Reference","previous_headings":"","what":"Joint or independent SVDs","title":"Exchangeable SVD Prior for Interactions Involving Age and Sex/Gender — ESVDS","text":"possible ways extracting patterns age-sex-specific data carry separate SVDs separate datasets sex/gender; carry single SVD dataset separate entries sex/gender. Option 1 flexible. Option 2 robust sampling measurement errors. Option 1 obtained setting joint argument  FALSE. Option 2 obtained setting joint argument TRUE. default FALSE.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ESVDS.html","id":"scaled-svds-currently-implemented-in-bage","dir":"Reference","previous_headings":"","what":"Scaled SVDs currently implemented in bage","title":"Exchangeable SVD Prior for Interactions Involving Age and Sex/Gender — ESVDS","text":"HMD Mortality rates Human Mortality Database. LFP Labour forcce participation rates OECD.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/ESVDS.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Exchangeable SVD Prior for Interactions Involving Age and Sex/Gender — ESVDS","text":"","code":"ESVDS(HMD) #> $i_prior #> [1] 14 #>  #> $const #> [1] 0 #>  #> $specific #> $specific$ssvd #>  #> ------------------------------------------------------------  #> <Object of class \"bage_ssvd\"> #>  #> sex/gender labels: #>      Female  #>      Male  #>  #> age labels: #>      0, 1, 2, 3, ..., 58, 59, 60+  #>      0, 1, 2, 3, ..., 63, 64, 65+  #>      0, 1, 2, 3, ..., 68, 69, 70+  #>      0, 1, 2, 3, ..., 73, 74, 75+  #>      0, 1, 2, 3, ..., 78, 79, 80+  #>      0, 1, 2, 3, ..., 83, 84, 85+  #>      0, 1, 2, 3, ..., 88, 89, 90+  #>      0, 1, 2, 3, ..., 93, 94, 95+  #>      0, 1, 2, 3, ..., 98, 99, 100+  #>      0, 1, 2, 3, ..., 103, 104, 105+  #>      0, 1, 2, 3, ..., 108, 109, 110+  #>      0, 1-4, 5-9, 10-14, ..., 50-54, 55-59, 60+  #>      0, 1-4, 5-9, 10-14, ..., 55-59, 60-64, 65+  #>      0, 1-4, 5-9, 10-14, ..., 60-64, 65-69, 70+  #>      0, 1-4, 5-9, 10-14, ..., 65-69, 70-74, 75+  #>      0, 1-4, 5-9, 10-14, ..., 70-74, 75-79, 80+  #>      0, 1-4, 5-9, 10-14, ..., 75-79, 80-84, 85+  #>      0, 1-4, 5-9, 10-14, ..., 80-84, 85-89, 90+  #>      0, 1-4, 5-9, 10-14, ..., 85-89, 90-94, 95+  #>      0, 1-4, 5-9, 10-14, ..., 90-94, 95-99, 100+  #>      0, 1-4, 5-9, 10-14, ..., 95-99, 100-104, 105+  #>      0, 1-4, 5-9, 10-14, ..., 100-104, 105-109, 110+  #>      0-4, 5-9, 10-14, 15-19, ..., 50-54, 55-59, 60+  #>      0-4, 5-9, 10-14, 15-19, ..., 55-59, 60-64, 65+  #>      0-4, 5-9, 10-14, 15-19, ..., 60-64, 65-69, 70+  #>      0-4, 5-9, 10-14, 15-19, ..., 65-69, 70-74, 75+  #>      0-4, 5-9, 10-14, 15-19, ..., 70-74, 75-79, 80+  #>      0-4, 5-9, 10-14, 15-19, ..., 75-79, 80-84, 85+  #>      0-4, 5-9, 10-14, 15-19, ..., 80-84, 85-89, 90+  #>      0-4, 5-9, 10-14, 15-19, ..., 85-89, 90-94, 95+  #>      0-4, 5-9, 10-14, 15-19, ..., 90-94, 95-99, 100+  #>      0-4, 5-9, 10-14, 15-19, ..., 95-99, 100-104, 105+  #>      0-4, 5-9, 10-14, 15-19, ..., 100-104, 105-109, 110+  #> ------------------------------------------------------------  #>  #> $specific$nm_ssvd #> [1] \"HMD\" #>  #> $specific$n #> [1] 5 #>  #> $specific$joint #> [1] FALSE #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_esvd\" \"bage_prior\"      ESVDS(HMD, joint = TRUE) #> $i_prior #> [1] 14 #>  #> $const #> [1] 0 #>  #> $specific #> $specific$ssvd #>  #> ------------------------------------------------------------  #> <Object of class \"bage_ssvd\"> #>  #> sex/gender labels: #>      Female  #>      Male  #>  #> age labels: #>      0, 1, 2, 3, ..., 58, 59, 60+  #>      0, 1, 2, 3, ..., 63, 64, 65+  #>      0, 1, 2, 3, ..., 68, 69, 70+  #>      0, 1, 2, 3, ..., 73, 74, 75+  #>      0, 1, 2, 3, ..., 78, 79, 80+  #>      0, 1, 2, 3, ..., 83, 84, 85+  #>      0, 1, 2, 3, ..., 88, 89, 90+  #>      0, 1, 2, 3, ..., 93, 94, 95+  #>      0, 1, 2, 3, ..., 98, 99, 100+  #>      0, 1, 2, 3, ..., 103, 104, 105+  #>      0, 1, 2, 3, ..., 108, 109, 110+  #>      0, 1-4, 5-9, 10-14, ..., 50-54, 55-59, 60+  #>      0, 1-4, 5-9, 10-14, ..., 55-59, 60-64, 65+  #>      0, 1-4, 5-9, 10-14, ..., 60-64, 65-69, 70+  #>      0, 1-4, 5-9, 10-14, ..., 65-69, 70-74, 75+  #>      0, 1-4, 5-9, 10-14, ..., 70-74, 75-79, 80+  #>      0, 1-4, 5-9, 10-14, ..., 75-79, 80-84, 85+  #>      0, 1-4, 5-9, 10-14, ..., 80-84, 85-89, 90+  #>      0, 1-4, 5-9, 10-14, ..., 85-89, 90-94, 95+  #>      0, 1-4, 5-9, 10-14, ..., 90-94, 95-99, 100+  #>      0, 1-4, 5-9, 10-14, ..., 95-99, 100-104, 105+  #>      0, 1-4, 5-9, 10-14, ..., 100-104, 105-109, 110+  #>      0-4, 5-9, 10-14, 15-19, ..., 50-54, 55-59, 60+  #>      0-4, 5-9, 10-14, 15-19, ..., 55-59, 60-64, 65+  #>      0-4, 5-9, 10-14, 15-19, ..., 60-64, 65-69, 70+  #>      0-4, 5-9, 10-14, 15-19, ..., 65-69, 70-74, 75+  #>      0-4, 5-9, 10-14, 15-19, ..., 70-74, 75-79, 80+  #>      0-4, 5-9, 10-14, 15-19, ..., 75-79, 80-84, 85+  #>      0-4, 5-9, 10-14, 15-19, ..., 80-84, 85-89, 90+  #>      0-4, 5-9, 10-14, 15-19, ..., 85-89, 90-94, 95+  #>      0-4, 5-9, 10-14, 15-19, ..., 90-94, 95-99, 100+  #>      0-4, 5-9, 10-14, 15-19, ..., 95-99, 100-104, 105+  #>      0-4, 5-9, 10-14, 15-19, ..., 100-104, 105-109, 110+  #> ------------------------------------------------------------  #>  #> $specific$nm_ssvd #> [1] \"HMD\" #>  #> $specific$n #> [1] 5 #>  #> $specific$joint #> [1] TRUE #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_esvd\" \"bage_prior\""},{"path":"https://bayesiandemography.github.io/bage/reference/ESeas.html","id":null,"dir":"Reference","previous_headings":"","what":"Exchangeable Seasonal Prior — ESeas","title":"Exchangeable Seasonal Prior — ESeas","text":"Prior seasonal effect, within interaction. combination '' variables, separate seasonal effect. along variable almost always time.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ESeas.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Exchangeable Seasonal Prior — ESeas","text":"","code":"ESeas(n, s = 1, along = NULL)"},{"path":"https://bayesiandemography.github.io/bage/reference/ESeas.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Exchangeable Seasonal Prior — ESeas","text":"n Number seasons. s Scale half-normal prior standard deviation (\\(\\tau\\)). Defaults 1. along Name one dimensions interaction. Optional, provided data contain time age dimension.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ESeas.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Exchangeable Seasonal Prior — ESeas","text":"object class bage_prior_eseas.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ESeas.html","id":"mathematical-details","dir":"Reference","previous_headings":"","what":"Mathematical details","title":"Exchangeable Seasonal Prior — ESeas","text":"\\(\\beta_{u,v}^{\\text{seas}}\\) \\(v\\)th element seasonal effect within within \\(u\\)th combination '' variables, $$\\beta_{u,v}^{\\text{seas}} \\sim \\text{N}(\\beta_{u,v-n}^{\\text{seas}}, \\tau^2),$$ \\(n\\) number seasons. Larger values \\(\\tau\\) imply variability seasonal effects time. size \\(\\tau\\) governed parameter s: $$\\tau \\sim \\text{N}^+(0, \\text{s}^2)$$ (\\(\\text{N}^+\\) denotes half-normal distribution, shape normal distribution, defined non-negative values.)","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ESeas.html","id":"-along-and-by-variables","dir":"Reference","previous_headings":"","what":"'Along' and 'by' variables","title":"Exchangeable Seasonal Prior — ESeas","text":"priors interactions distinguish 'along' '' variables. 'along' variable typically time, , interactions involving time, typically age. '' variables everything else. interaction region, sex, time, instance, 'along' variable likely time, '' variables likely region sex. along argument supplied, default value chosen follows: interaction contains time variable, 'along' variable assumed time; otherwise, interaction contains age variable, 'along' variable assumed age; otherwise, error raised.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/ESeas.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Exchangeable Seasonal Prior — ESeas","text":"","code":"ESeas(n = 4) #> $i_prior #> [1] 11 #>  #> $const #>    scale <unused> <unused> <unused>  #>        1        0        0        0  #>  #> $specific #> $specific$n #> [1] 4 #>  #> $specific$scale #> [1] 1 #>  #> $specific$along #> NULL #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_eseas\" \"bage_prior\"       ESeas(n = 12, s = 0.5, along = \"cohort\") #> $i_prior #> [1] 11 #>  #> $const #>    scale <unused> <unused> <unused> <unused> <unused> <unused> <unused>  #>      0.5      0.0      0.0      0.0      0.0      0.0      0.0      0.0  #> <unused> <unused> <unused> <unused>  #>      0.0      0.0      0.0      0.0  #>  #> $specific #> $specific$n #> [1] 12 #>  #> $specific$scale #> [1] 0.5 #>  #> $specific$along #> [1] \"cohort\" #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_eseas\" \"bage_prior\""},{"path":"https://bayesiandemography.github.io/bage/reference/HMD.html","id":null,"dir":"Reference","previous_headings":"","what":"Components from Human Mortality Database — HMD","title":"Components from Human Mortality Database — HMD","text":"object class bage_ssvd holding components extracted mortality data Human Mortality Database.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/HMD.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Components from Human Mortality Database — HMD","text":"","code":"HMD"},{"path":"https://bayesiandemography.github.io/bage/reference/HMD.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Components from Human Mortality Database — HMD","text":"object class bage_ssvd length 1.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/HMD.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Components from Human Mortality Database — HMD","text":"Derived data Human Mortality Database. Max Planck Institute Demographic Research (Germany), University California, Berkeley (USA), French Institute Demographic Studies (France). Available www.mortality.org. Code create HMD folder 'data-raw/ssvd_hmd' bage package.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/Known.html","id":null,"dir":"Reference","previous_headings":"","what":"Treat an Intercept, Main Effect, or Interaction as Known — Known","title":"Treat an Intercept, Main Effect, or Interaction as Known — Known","text":"Treat intercept, main effect, interaction model fixed known.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/Known.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Treat an Intercept, Main Effect, or Interaction as Known — Known","text":"","code":"Known(values)"},{"path":"https://bayesiandemography.github.io/bage/reference/Known.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Treat an Intercept, Main Effect, or Interaction as Known — Known","text":"values numeric vector","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/Known.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Treat an Intercept, Main Effect, or Interaction as Known — Known","text":"object class bage_prior_known.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/Known.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Treat an Intercept, Main Effect, or Interaction as Known — Known","text":"","code":"Known(-2.3) #> $i_prior #> [1] 0 #>  #> $const #> [1] 0 #>  #> $specific #> $specific$values #> [1] -2.3 #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_known\" \"bage_prior\"       Known(c(0.1, 2, -0.11)) #> $i_prior #> [1] 0 #>  #> $const #> [1] 0 #>  #> $specific #> $specific$values #> [1]  0.10  2.00 -0.11 #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_known\" \"bage_prior\""},{"path":"https://bayesiandemography.github.io/bage/reference/LFP.html","id":null,"dir":"Reference","previous_headings":"","what":"Components from OECD Labour Force Participation Data — LFP","title":"Components from OECD Labour Force Participation Data — LFP","text":"object class bage_ssvd holding components extracted labour force participation data OECD Data Explorer.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/LFP.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Components from OECD Labour Force Participation Data — LFP","text":"","code":"LFP"},{"path":"https://bayesiandemography.github.io/bage/reference/LFP.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Components from OECD Labour Force Participation Data — LFP","text":"object class bage_ssvd length 1.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/LFP.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Components from OECD Labour Force Participation Data — LFP","text":"Derived data \"Labour Force Indicators\" table OECD Data Explorer. Code create LFS folder 'data-raw/ssvd_lfp' bage package.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/Lin.html","id":null,"dir":"Reference","previous_headings":"","what":"Linear Prior — Lin","title":"Linear Prior — Lin","text":"Prior main effect elements follow straight line, idiosyncratic errors around line.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/Lin.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Linear Prior — Lin","text":"","code":"Lin(s = 1, sd = 1)"},{"path":"https://bayesiandemography.github.io/bage/reference/Lin.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Linear Prior — Lin","text":"s positive number. Default 1. sd postive number. Default 1.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/Lin.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Linear Prior — Lin","text":"object class bage_prior_lin.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/Lin.html","id":"mathematical-details","dir":"Reference","previous_headings":"","what":"Mathematical details","title":"Linear Prior — Lin","text":"\\(\\beta_j\\) \\(j\\)th element main effect, $$\\beta_j \\sim \\text{N}(\\eta q_j, \\tau^2)$$ $$q_j = - (J+1)/(J-1) + 2j/(J-1).$$ slope term drawn normal distribution, $$\\eta ~ \\text{N}(0, (\\text{sd})^2)$$. standard deviation normal distribution, sd, defaults 1, can set values. Lower values sd lead smaller values slope term. Standard deviation \\(\\tau\\) drawn half-normal distribution, $$\\tau \\sim \\text{N}^+(0, \\text{s}^2)$$ (\\(\\text{N}^+\\) denotes half-normal distribution, shape normal distribution, defined non-negative values.)","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/Lin.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Linear Prior — Lin","text":"","code":"Lin() #> $i_prior #> [1] 8 #>  #> $const #>    scale sd_slope  #>        1        1  #>  #> $specific #> $specific$scale #> [1] 1 #>  #> $specific$sd_slope #> [1] 1 #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_lin\" \"bage_prior\"     Lin(s = 0.5, sd = 2) #> $i_prior #> [1] 8 #>  #> $const #>    scale sd_slope  #>      0.5      2.0  #>  #> $specific #> $specific$scale #> [1] 0.5 #>  #> $specific$sd_slope #> [1] 2 #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_lin\" \"bage_prior\""},{"path":"https://bayesiandemography.github.io/bage/reference/N.html","id":null,"dir":"Reference","previous_headings":"","what":"Normal Prior — N","title":"Normal Prior — N","text":"Prior units drawn independently normal distribution. default prior terms.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/N.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Normal Prior — N","text":"","code":"N(s = 1)"},{"path":"https://bayesiandemography.github.io/bage/reference/N.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Normal Prior — N","text":"s positive, finite number.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/N.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Normal Prior — N","text":"object class bage_prior_norm.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/N.html","id":"mathematical-details","dir":"Reference","previous_headings":"","what":"Mathematical details","title":"Normal Prior — N","text":"\\(\\beta_j\\) \\(j\\)th element main effect interaction, $$\\beta_j \\sim \\text{N}(0, \\tau^2).$$ Standard deviation \\(\\tau\\) drawn half-normal distribution, $$\\tau \\sim \\text{N}^+(0, \\text{s}^2)$$ (half-normal distribution shape normal distribution, defined non-negative values.) scale half-normal distribution defaults 1, can set values. Lower values lead tightly concentrated estimates \\beta_j, higher values lead less tightly concentrated estimates.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/N.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Normal Prior — N","text":"","code":"N() #> $i_prior #> [1] 1 #>  #> $const #> scale  #>     1  #>  #> $specific #> $specific$scale #> [1] 1 #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_norm\" \"bage_prior\"      N(s = 0.5) #> $i_prior #> [1] 1 #>  #> $const #> scale  #>   0.5  #>  #> $specific #> $specific$scale #> [1] 0.5 #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_norm\" \"bage_prior\""},{"path":"https://bayesiandemography.github.io/bage/reference/NFix.html","id":null,"dir":"Reference","previous_headings":"","what":"Normal Prior with Fixed Standard Deviation — NFix","title":"Normal Prior with Fixed Standard Deviation — NFix","text":"Normal prior , contrast N(), standard deviation treated fixed known.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/NFix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Normal Prior with Fixed Standard Deviation — NFix","text":"","code":"NFix(sd = 1)"},{"path":"https://bayesiandemography.github.io/bage/reference/NFix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Normal Prior with Fixed Standard Deviation — NFix","text":"sd Standard deviation. positive, finite number. Default 1.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/NFix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Normal Prior with Fixed Standard Deviation — NFix","text":"object class \"bage_prior_normfixed\".","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/NFix.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Normal Prior with Fixed Standard Deviation — NFix","text":"NFix() default prior intercept.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/NFix.html","id":"mathematical-details","dir":"Reference","previous_headings":"","what":"Mathematical details","title":"Normal Prior with Fixed Standard Deviation — NFix","text":"\\(\\beta_j\\) \\(j\\)th element main effect interaction, $$\\beta_j \\sim \\text{N}(0, \\text{sd}^2).$$","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/NFix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Normal Prior with Fixed Standard Deviation — NFix","text":"","code":"NFix() #> $i_prior #> [1] 2 #>  #> $const #> sd  #>  1  #>  #> $specific #> $specific$sd #> [1] 1 #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_normfixed\" \"bage_prior\"           NFix(sd = 10) ## prior used for intercept #> $i_prior #> [1] 2 #>  #> $const #> sd  #> 10  #>  #> $specific #> $specific$sd #> [1] 10 #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_normfixed\" \"bage_prior\""},{"path":"https://bayesiandemography.github.io/bage/reference/RW.html","id":null,"dir":"Reference","previous_headings":"","what":"Random walk prior — RW","title":"Random walk prior — RW","text":"Prior units follow (first order) random walk. Increments neighbouring elements assumed normally distibuted.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/RW.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Random walk prior — RW","text":"","code":"RW(s = 1)"},{"path":"https://bayesiandemography.github.io/bage/reference/RW.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Random walk prior — RW","text":"s positive, finite number. Default 1.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/RW.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Random walk prior — RW","text":"object class \"bage_prior_rw\".","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/RW.html","id":"mathematical-details","dir":"Reference","previous_headings":"","what":"Mathematical details","title":"Random walk prior — RW","text":"\\(\\beta_j\\) \\(j\\)th element main effect, $$\\beta_1 \\sim \\text{N}(0, 1)$$ $$\\beta_j \\sim \\text{N}(\\beta_{j - 1}, \\tau^2), \\quad j = 2, \\cdots, J.$$ Standard deviation \\(\\tau\\) drawn half-normal distribution, $$\\tau \\sim \\text{N}^+(0, \\text{s}^2)$$ (half-normal distribution shape normal distribution, defined non-negative values.) scale half-normal distribution, s, defaults 1, can set values. Lower values scale lead smoother series xs, higher values lead rougher series.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/RW.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Random walk prior — RW","text":"","code":"RW() #> $i_prior #> [1] 3 #>  #> $const #> scale  #>     1  #>  #> $specific #> $specific$scale #> [1] 1 #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_rw\" \"bage_prior\"    RW(s = 0.5) #> $i_prior #> [1] 3 #>  #> $const #> scale  #>   0.5  #>  #> $specific #> $specific$scale #> [1] 0.5 #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_rw\" \"bage_prior\""},{"path":"https://bayesiandemography.github.io/bage/reference/RW2.html","id":null,"dir":"Reference","previous_headings":"","what":"Random Walk with Drift Prior — RW2","title":"Random Walk with Drift Prior — RW2","text":"Prior units follow random walk drift, also known second-order random walk.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/RW2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Random Walk with Drift Prior — RW2","text":"","code":"RW2(s = 1)"},{"path":"https://bayesiandemography.github.io/bage/reference/RW2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Random Walk with Drift Prior — RW2","text":"s positive, finite number. Default 1.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/RW2.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Random Walk with Drift Prior — RW2","text":"object class \"bage_prior_rw2\".","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/RW2.html","id":"mathematical-details","dir":"Reference","previous_headings":"","what":"Mathematical details","title":"Random Walk with Drift Prior — RW2","text":"\\(\\beta_j\\) \\(j\\)th element main effect, $$\\beta_j \\sim \\text{N}(0, 1), \\quad j = 1,2$$ $$\\beta_j \\sim \\text{N}(\\beta_{j-1} + \\delta_{j-1}, \\tau^2), \\quad j = 3, \\cdots, J,$$ $$\\delta_j = \\beta_j - \\beta_{j-1}.$$ Standard deviation \\(\\tau\\) drawn half-normal distribution, $$\\tau \\sim \\text{N}^+(0, \\text{s}^2)$$ (half-normal distribution shape normal distribution, defined non-negative values.) scale half-normal distribution, s, defaults 1, can set values. Lower values s lead smoother series .","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/RW2.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Random Walk with Drift Prior — RW2","text":"","code":"RW2() #> $i_prior #> [1] 4 #>  #> $const #> scale  #>     1  #>  #> $specific #> $specific$scale #> [1] 1 #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_rw2\" \"bage_prior\"     RW2(s = 0.2) #> $i_prior #> [1] 4 #>  #> $const #> scale  #>   0.2  #>  #> $specific #> $specific$scale #> [1] 0.2 #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_rw2\" \"bage_prior\""},{"path":"https://bayesiandemography.github.io/bage/reference/SVD.html","id":null,"dir":"Reference","previous_headings":"","what":"SVD Prior for Age Main Effect — SVD","title":"SVD Prior for Age Main Effect — SVD","text":"Specify Singular Value Decomposition (SVD) prior age main effect.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/SVD.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"SVD Prior for Age Main Effect — SVD","text":"","code":"SVD(ssvd, n = NULL)"},{"path":"https://bayesiandemography.github.io/bage/reference/SVD.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"SVD Prior for Age Main Effect — SVD","text":"ssvd Object class \"bage_ssvd\" holding results scaled SVD. See current options. n Number components scaled SVD use modelling. default half number components ssvd.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/SVD.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"SVD Prior for Age Main Effect — SVD","text":"object class \"bage_prior_svd\".","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/SVD.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"SVD Prior for Age Main Effect — SVD","text":"SVD prior assumes age profile quantity modelled looks like age profile drawn random external demographic database. instance,   specifies age profile looks like drawn Human Mortality Database. Singular Value Decomposition closely related Principal Components analysis, way extracting patterns large volumes data.","code":"set_prior(mod, age ~ SVD(HMD))"},{"path":"https://bayesiandemography.github.io/bage/reference/SVD.html","id":"mathematical-details","dir":"Reference","previous_headings":"","what":"Mathematical details","title":"SVD Prior for Age Main Effect — SVD","text":"SVD prior, $$\\pmb{\\beta} = \\pmb{F} \\pmb{\\alpha} + \\pmb{g}$$ \\(\\pmb{\\beta}\\) age effect \\(J\\) elements; \\(\\pmb{X}\\) known \\(J \\times K\\) matrix, \\(J\\) number age groups \\(K\\) number vectors SVD use (\\(K\\) typically much less \\(J\\)); \\(\\pmb{\\alpha}\\) vector \\(K\\) elements; \\(\\pmb{g}\\) known vector \\(J\\) elements. elements \\(\\pmb{\\alpha}\\) prior $$\\alpha_k \\sim \\text{N}(0, 1), \\quad k = 1, \\cdots, K.$$ \\(\\pmb{F}\\) \\(\\pmb{g}\\) constructed large database age-specific demographic estimates preforming SVD standardizing. details see TODO - REFERENCE VIGNETTE.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/SVD.html","id":"scaled-svds-currently-implemented-in-bage","dir":"Reference","previous_headings":"","what":"Scaled SVDs currently implemented in bage","title":"SVD Prior for Age Main Effect — SVD","text":"HMD Mortality rates Human Mortality Database. LFP Labour forcce participation rates OECD.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/SVD.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"SVD Prior for Age Main Effect — SVD","text":"","code":"SVD(HMD) #> Loading required package: Matrix #> $i_prior #> [1] 7 #>  #> $const #> [1] 0 #>  #> $specific #> $specific$ssvd #>  #> ------------------------------------------------------------  #> <Object of class \"bage_ssvd\"> #>  #> sex/gender labels: #>      Female  #>      Male  #>  #> age labels: #>      0, 1, 2, 3, ..., 58, 59, 60+  #>      0, 1, 2, 3, ..., 63, 64, 65+  #>      0, 1, 2, 3, ..., 68, 69, 70+  #>      0, 1, 2, 3, ..., 73, 74, 75+  #>      0, 1, 2, 3, ..., 78, 79, 80+  #>      0, 1, 2, 3, ..., 83, 84, 85+  #>      0, 1, 2, 3, ..., 88, 89, 90+  #>      0, 1, 2, 3, ..., 93, 94, 95+  #>      0, 1, 2, 3, ..., 98, 99, 100+  #>      0, 1, 2, 3, ..., 103, 104, 105+  #>      0, 1, 2, 3, ..., 108, 109, 110+  #>      0, 1-4, 5-9, 10-14, ..., 50-54, 55-59, 60+  #>      0, 1-4, 5-9, 10-14, ..., 55-59, 60-64, 65+  #>      0, 1-4, 5-9, 10-14, ..., 60-64, 65-69, 70+  #>      0, 1-4, 5-9, 10-14, ..., 65-69, 70-74, 75+  #>      0, 1-4, 5-9, 10-14, ..., 70-74, 75-79, 80+  #>      0, 1-4, 5-9, 10-14, ..., 75-79, 80-84, 85+  #>      0, 1-4, 5-9, 10-14, ..., 80-84, 85-89, 90+  #>      0, 1-4, 5-9, 10-14, ..., 85-89, 90-94, 95+  #>      0, 1-4, 5-9, 10-14, ..., 90-94, 95-99, 100+  #>      0, 1-4, 5-9, 10-14, ..., 95-99, 100-104, 105+  #>      0, 1-4, 5-9, 10-14, ..., 100-104, 105-109, 110+  #>      0-4, 5-9, 10-14, 15-19, ..., 50-54, 55-59, 60+  #>      0-4, 5-9, 10-14, 15-19, ..., 55-59, 60-64, 65+  #>      0-4, 5-9, 10-14, 15-19, ..., 60-64, 65-69, 70+  #>      0-4, 5-9, 10-14, 15-19, ..., 65-69, 70-74, 75+  #>      0-4, 5-9, 10-14, 15-19, ..., 70-74, 75-79, 80+  #>      0-4, 5-9, 10-14, 15-19, ..., 75-79, 80-84, 85+  #>      0-4, 5-9, 10-14, 15-19, ..., 80-84, 85-89, 90+  #>      0-4, 5-9, 10-14, 15-19, ..., 85-89, 90-94, 95+  #>      0-4, 5-9, 10-14, 15-19, ..., 90-94, 95-99, 100+  #>      0-4, 5-9, 10-14, 15-19, ..., 95-99, 100-104, 105+  #>      0-4, 5-9, 10-14, 15-19, ..., 100-104, 105-109, 110+  #> ------------------------------------------------------------  #>  #> $specific$nm_ssvd #> [1] \"HMD\" #>  #> $specific$n #> integer(0) #>  #> $specific$joint #> NULL #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_svd\" \"bage_prior\"     SVD(HMD, n = 3) #> $i_prior #> [1] 7 #>  #> $const #> [1] 0 #>  #> $specific #> $specific$ssvd #>  #> ------------------------------------------------------------  #> <Object of class \"bage_ssvd\"> #>  #> sex/gender labels: #>      Female  #>      Male  #>  #> age labels: #>      0, 1, 2, 3, ..., 58, 59, 60+  #>      0, 1, 2, 3, ..., 63, 64, 65+  #>      0, 1, 2, 3, ..., 68, 69, 70+  #>      0, 1, 2, 3, ..., 73, 74, 75+  #>      0, 1, 2, 3, ..., 78, 79, 80+  #>      0, 1, 2, 3, ..., 83, 84, 85+  #>      0, 1, 2, 3, ..., 88, 89, 90+  #>      0, 1, 2, 3, ..., 93, 94, 95+  #>      0, 1, 2, 3, ..., 98, 99, 100+  #>      0, 1, 2, 3, ..., 103, 104, 105+  #>      0, 1, 2, 3, ..., 108, 109, 110+  #>      0, 1-4, 5-9, 10-14, ..., 50-54, 55-59, 60+  #>      0, 1-4, 5-9, 10-14, ..., 55-59, 60-64, 65+  #>      0, 1-4, 5-9, 10-14, ..., 60-64, 65-69, 70+  #>      0, 1-4, 5-9, 10-14, ..., 65-69, 70-74, 75+  #>      0, 1-4, 5-9, 10-14, ..., 70-74, 75-79, 80+  #>      0, 1-4, 5-9, 10-14, ..., 75-79, 80-84, 85+  #>      0, 1-4, 5-9, 10-14, ..., 80-84, 85-89, 90+  #>      0, 1-4, 5-9, 10-14, ..., 85-89, 90-94, 95+  #>      0, 1-4, 5-9, 10-14, ..., 90-94, 95-99, 100+  #>      0, 1-4, 5-9, 10-14, ..., 95-99, 100-104, 105+  #>      0, 1-4, 5-9, 10-14, ..., 100-104, 105-109, 110+  #>      0-4, 5-9, 10-14, 15-19, ..., 50-54, 55-59, 60+  #>      0-4, 5-9, 10-14, 15-19, ..., 55-59, 60-64, 65+  #>      0-4, 5-9, 10-14, 15-19, ..., 60-64, 65-69, 70+  #>      0-4, 5-9, 10-14, 15-19, ..., 65-69, 70-74, 75+  #>      0-4, 5-9, 10-14, 15-19, ..., 70-74, 75-79, 80+  #>      0-4, 5-9, 10-14, 15-19, ..., 75-79, 80-84, 85+  #>      0-4, 5-9, 10-14, 15-19, ..., 80-84, 85-89, 90+  #>      0-4, 5-9, 10-14, 15-19, ..., 85-89, 90-94, 95+  #>      0-4, 5-9, 10-14, 15-19, ..., 90-94, 95-99, 100+  #>      0-4, 5-9, 10-14, 15-19, ..., 95-99, 100-104, 105+  #>      0-4, 5-9, 10-14, 15-19, ..., 100-104, 105-109, 110+  #> ------------------------------------------------------------  #>  #> $specific$nm_ssvd #> [1] \"HMD\" #>  #> $specific$n #> [1] 3 #>  #> $specific$joint #> NULL #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_svd\" \"bage_prior\""},{"path":"https://bayesiandemography.github.io/bage/reference/SVDS.html","id":null,"dir":"Reference","previous_headings":"","what":"SVD Prior for Interaction Between Age and Sex/Gender — SVDS","title":"SVD Prior for Interaction Between Age and Sex/Gender — SVDS","text":"Specify Singular Value Decomposition (SVD) prior interaction age sex/gender. age-sex profile assumed look like drawn random external demographic database. instance,   specifies age-sex profile looks like drawn Human Mortality Database.","code":"set_prior(mod, age:sex ~ SVDS(HMD))"},{"path":"https://bayesiandemography.github.io/bage/reference/SVDS.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"SVD Prior for Interaction Between Age and Sex/Gender — SVDS","text":"","code":"SVDS(ssvd, n = 5, joint = FALSE)"},{"path":"https://bayesiandemography.github.io/bage/reference/SVDS.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"SVD Prior for Interaction Between Age and Sex/Gender — SVDS","text":"ssvd Object class \"bage_ssvd\" holding results scaled SVD. See current options. n Number components scaled SVD use modelling. default half number components ssvd. joint Whether use combined separate SVDs. Default FALSE. See details.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/SVDS.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"SVD Prior for Interaction Between Age and Sex/Gender — SVDS","text":"object class \"bage_prior_svd\".","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/SVDS.html","id":"joint-or-independent-svds","dir":"Reference","previous_headings":"","what":"Joint or independent SVDs","title":"SVD Prior for Interaction Between Age and Sex/Gender — SVDS","text":"possible ways extracting patterns age-sex-specific data carry separate SVDs separate datasets sex/gender; carry single SVD dataset separate entries sex/gender. Option 1 flexible. Option 2 robust sampling measurement errors. Option 1 obtained setting joint argument  FALSE. Option 2 obtained setting joint argument TRUE. default FALSE.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/SVDS.html","id":"mathematical-details","dir":"Reference","previous_headings":"","what":"Mathematical details","title":"SVD Prior for Interaction Between Age and Sex/Gender — SVDS","text":"Let \\(\\) denote number age groups, \\(S\\) number sexes/genders. joint FALSE, $$\\pmb{\\beta}_s = \\pmb{F}_s \\pmb{\\alpha}_s + \\pmb{g}_s, \\quad s = 1, \\cdots S$$ \\(\\pmb{\\beta}_s\\), \\(\\pmb{\\alpha}_s\\), \\(\\pmb{g}_s\\) \\(\\) elements, \\(\\pmb{F}\\) \\(\\) rows. joint TRUE, $$\\pmb{\\beta} = \\pmb{F} \\pmb{\\alpha} + \\pmb{g}$$ \\(\\pmb{\\beta}\\), \\(\\pmb{\\alpha}\\), \\(\\pmb{g}\\) \\(\\times S\\) elements, \\(\\pmb{F}_s\\) \\(\\times S\\) rows. \\(\\pmb{F}_s\\), \\(\\pmb{g}_s\\), \\(\\pmb{F}\\), \\(\\pmb{g}\\), estimated externally, using estimates demographic database, treated fixed known. elements \\(\\pmb{\\alpha}_s\\) \\(\\pmb{\\alpha}\\) prior $$\\alpha_k \\sim \\text{N}(0, 1)$$ description construction \\(\\pmb{F}_s\\), \\(\\pmb{F}\\), \\(\\pmb{g}_s\\), \\(\\pmb{g}\\), see TODO - REFERENCE VIGNETTE.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/SVDS.html","id":"scaled-svds-currently-implemented-in-bage","dir":"Reference","previous_headings":"","what":"Scaled SVDs currently implemented in bage","title":"SVD Prior for Interaction Between Age and Sex/Gender — SVDS","text":"HMD Mortality rates Human Mortality Database. LFP Labour forcce participation rates OECD.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/SVDS.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"SVD Prior for Interaction Between Age and Sex/Gender — SVDS","text":"","code":"SVDS(HMD) #> $i_prior #> [1] 7 #>  #> $const #> [1] 0 #>  #> $specific #> $specific$ssvd #>  #> ------------------------------------------------------------  #> <Object of class \"bage_ssvd\"> #>  #> sex/gender labels: #>      Female  #>      Male  #>  #> age labels: #>      0, 1, 2, 3, ..., 58, 59, 60+  #>      0, 1, 2, 3, ..., 63, 64, 65+  #>      0, 1, 2, 3, ..., 68, 69, 70+  #>      0, 1, 2, 3, ..., 73, 74, 75+  #>      0, 1, 2, 3, ..., 78, 79, 80+  #>      0, 1, 2, 3, ..., 83, 84, 85+  #>      0, 1, 2, 3, ..., 88, 89, 90+  #>      0, 1, 2, 3, ..., 93, 94, 95+  #>      0, 1, 2, 3, ..., 98, 99, 100+  #>      0, 1, 2, 3, ..., 103, 104, 105+  #>      0, 1, 2, 3, ..., 108, 109, 110+  #>      0, 1-4, 5-9, 10-14, ..., 50-54, 55-59, 60+  #>      0, 1-4, 5-9, 10-14, ..., 55-59, 60-64, 65+  #>      0, 1-4, 5-9, 10-14, ..., 60-64, 65-69, 70+  #>      0, 1-4, 5-9, 10-14, ..., 65-69, 70-74, 75+  #>      0, 1-4, 5-9, 10-14, ..., 70-74, 75-79, 80+  #>      0, 1-4, 5-9, 10-14, ..., 75-79, 80-84, 85+  #>      0, 1-4, 5-9, 10-14, ..., 80-84, 85-89, 90+  #>      0, 1-4, 5-9, 10-14, ..., 85-89, 90-94, 95+  #>      0, 1-4, 5-9, 10-14, ..., 90-94, 95-99, 100+  #>      0, 1-4, 5-9, 10-14, ..., 95-99, 100-104, 105+  #>      0, 1-4, 5-9, 10-14, ..., 100-104, 105-109, 110+  #>      0-4, 5-9, 10-14, 15-19, ..., 50-54, 55-59, 60+  #>      0-4, 5-9, 10-14, 15-19, ..., 55-59, 60-64, 65+  #>      0-4, 5-9, 10-14, 15-19, ..., 60-64, 65-69, 70+  #>      0-4, 5-9, 10-14, 15-19, ..., 65-69, 70-74, 75+  #>      0-4, 5-9, 10-14, 15-19, ..., 70-74, 75-79, 80+  #>      0-4, 5-9, 10-14, 15-19, ..., 75-79, 80-84, 85+  #>      0-4, 5-9, 10-14, 15-19, ..., 80-84, 85-89, 90+  #>      0-4, 5-9, 10-14, 15-19, ..., 85-89, 90-94, 95+  #>      0-4, 5-9, 10-14, 15-19, ..., 90-94, 95-99, 100+  #>      0-4, 5-9, 10-14, 15-19, ..., 95-99, 100-104, 105+  #>      0-4, 5-9, 10-14, 15-19, ..., 100-104, 105-109, 110+  #> ------------------------------------------------------------  #>  #> $specific$nm_ssvd #> [1] \"HMD\" #>  #> $specific$n #> [1] 5 #>  #> $specific$joint #> [1] FALSE #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_svd\" \"bage_prior\"     SVDS(HMD, joint = TRUE) #> $i_prior #> [1] 7 #>  #> $const #> [1] 0 #>  #> $specific #> $specific$ssvd #>  #> ------------------------------------------------------------  #> <Object of class \"bage_ssvd\"> #>  #> sex/gender labels: #>      Female  #>      Male  #>  #> age labels: #>      0, 1, 2, 3, ..., 58, 59, 60+  #>      0, 1, 2, 3, ..., 63, 64, 65+  #>      0, 1, 2, 3, ..., 68, 69, 70+  #>      0, 1, 2, 3, ..., 73, 74, 75+  #>      0, 1, 2, 3, ..., 78, 79, 80+  #>      0, 1, 2, 3, ..., 83, 84, 85+  #>      0, 1, 2, 3, ..., 88, 89, 90+  #>      0, 1, 2, 3, ..., 93, 94, 95+  #>      0, 1, 2, 3, ..., 98, 99, 100+  #>      0, 1, 2, 3, ..., 103, 104, 105+  #>      0, 1, 2, 3, ..., 108, 109, 110+  #>      0, 1-4, 5-9, 10-14, ..., 50-54, 55-59, 60+  #>      0, 1-4, 5-9, 10-14, ..., 55-59, 60-64, 65+  #>      0, 1-4, 5-9, 10-14, ..., 60-64, 65-69, 70+  #>      0, 1-4, 5-9, 10-14, ..., 65-69, 70-74, 75+  #>      0, 1-4, 5-9, 10-14, ..., 70-74, 75-79, 80+  #>      0, 1-4, 5-9, 10-14, ..., 75-79, 80-84, 85+  #>      0, 1-4, 5-9, 10-14, ..., 80-84, 85-89, 90+  #>      0, 1-4, 5-9, 10-14, ..., 85-89, 90-94, 95+  #>      0, 1-4, 5-9, 10-14, ..., 90-94, 95-99, 100+  #>      0, 1-4, 5-9, 10-14, ..., 95-99, 100-104, 105+  #>      0, 1-4, 5-9, 10-14, ..., 100-104, 105-109, 110+  #>      0-4, 5-9, 10-14, 15-19, ..., 50-54, 55-59, 60+  #>      0-4, 5-9, 10-14, 15-19, ..., 55-59, 60-64, 65+  #>      0-4, 5-9, 10-14, 15-19, ..., 60-64, 65-69, 70+  #>      0-4, 5-9, 10-14, 15-19, ..., 65-69, 70-74, 75+  #>      0-4, 5-9, 10-14, 15-19, ..., 70-74, 75-79, 80+  #>      0-4, 5-9, 10-14, 15-19, ..., 75-79, 80-84, 85+  #>      0-4, 5-9, 10-14, 15-19, ..., 80-84, 85-89, 90+  #>      0-4, 5-9, 10-14, 15-19, ..., 85-89, 90-94, 95+  #>      0-4, 5-9, 10-14, 15-19, ..., 90-94, 95-99, 100+  #>      0-4, 5-9, 10-14, 15-19, ..., 95-99, 100-104, 105+  #>      0-4, 5-9, 10-14, 15-19, ..., 100-104, 105-109, 110+  #> ------------------------------------------------------------  #>  #> $specific$nm_ssvd #> [1] \"HMD\" #>  #> $specific$n #> [1] 5 #>  #> $specific$joint #> [1] TRUE #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_svd\" \"bage_prior\""},{"path":"https://bayesiandemography.github.io/bage/reference/Seas.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior for Seasonal Effect — Seas","title":"Prior for Seasonal Effect — Seas","text":"Prior seasonal effect, size effects evolve time. season follows random walk.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/Seas.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prior for Seasonal Effect — Seas","text":"","code":"Seas(n, s = 1)"},{"path":"https://bayesiandemography.github.io/bage/reference/Seas.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prior for Seasonal Effect — Seas","text":"n number seasons. s positive, finite number. Default 1.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/Seas.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prior for Seasonal Effect — Seas","text":"object class \"bage_prior_seas\".","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/Seas.html","id":"mathematical-details","dir":"Reference","previous_headings":"","what":"Mathematical details","title":"Prior for Seasonal Effect — Seas","text":"\\(\\beta_j^{\\text{seas}}\\) \\(j\\)th element seasonal effect, $$\\beta_j^{\\text{seas}} - \\beta_{j-n}^{\\text{seas}} \\sim \\text{N}(x_{j - n}, \\tau^2).$$ Standard deviation \\(\\tau\\) drawn half-normal distribution, $$\\tau \\sim \\text{N}^+(0, \\text{s}^2)$$ (half-normal distribution shape normal distribution, defined non-negative values.) scale half-normal distribution, s, defaults 1, can set values. Lower values scale lead smoother series.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/Seas.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prior for Seasonal Effect — Seas","text":"","code":"Seas(n = 4) #> $i_prior #> [1] 10 #>  #> $const #> scale  #>     1  #>  #> $specific #> $specific$n #> [1] 4 #>  #> $specific$scale #> [1] 1 #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_seas\" \"bage_prior\"      Seas(n = 12, s = 0.5) #> $i_prior #> [1] 10 #>  #> $const #> scale  #>   0.5  #>  #> $specific #> $specific$n #> [1] 12 #>  #> $specific$scale #> [1] 0.5 #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_seas\" \"bage_prior\""},{"path":"https://bayesiandemography.github.io/bage/reference/Sp.html","id":null,"dir":"Reference","previous_headings":"","what":"P-spline prior — Sp","title":"P-spline prior — Sp","text":"Specify P-spline (penalised spline) prior. P-spline flexible, favours profiles relatively smooth.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/Sp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"P-spline prior — Sp","text":"","code":"Sp(n = NULL, s = 1)"},{"path":"https://bayesiandemography.github.io/bage/reference/Sp.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"P-spline prior — Sp","text":"n Number spline vectors. default NULL, case number vectors set max(ceiling(0.7 * k), 4) k number elements term modelled. s positive, finite number. Default 1.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/Sp.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"P-spline prior — Sp","text":"object class \"bage_prior_spline\".","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/Sp.html","id":"mathematical-details","dir":"Reference","previous_headings":"","what":"Mathematical details","title":"P-spline prior — Sp","text":"model effect, log scale, $$\\beta = X \\gamma$$ \\(\\beta\\) main effect, \\(X\\) matrix holding basis functions spline, n columns, \\(\\alpha\\) vector coefficients, n elements. elements \\(\\gamma\\) assumed follow random walk drift (see RW2()).","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/Sp.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"P-spline prior — Sp","text":"","code":"Sp() #> $i_prior #> [1] 6 #>  #> $const #> scale  #>     1  #>  #> $specific #> $specific$n #> NULL #>  #> $specific$scale #> [1] 1 #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_spline\" \"bage_prior\"        Sp(n = 10) #> $i_prior #> [1] 6 #>  #> $const #> scale  #>     1  #>  #> $specific #> $specific$n #> [1] 10 #>  #> $specific$scale #> [1] 1 #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_spline\" \"bage_prior\""},{"path":"https://bayesiandemography.github.io/bage/reference/augment.bage_mod.html","id":null,"dir":"Reference","previous_headings":"","what":"Data and Values from a Model — augment.bage_mod","title":"Data and Values from a Model — augment.bage_mod","text":"Extract data values model object class \"bage_mod\". returne value tibble containing original data, plus draws posterior distribution model fitted, prior distribution .","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/augment.bage_mod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Data and Values from a Model — augment.bage_mod","text":"","code":"# S3 method for bage_mod augment(x, quiet = FALSE, ...)"},{"path":"https://bayesiandemography.github.io/bage/reference/augment.bage_mod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Data and Values from a Model — augment.bage_mod","text":"x bage_mod object. quiet Whether suppress messages. Default FALSE. ... Unused. Included generic consistency .","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/augment.bage_mod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Data and Values from a Model — augment.bage_mod","text":"tibble.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/augment.bage_mod.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Data and Values from a Model — augment.bage_mod","text":"return value contains following columns: .observed 'Direct' estimates rates probabilities, ie counts divided exposure/size. (Poisson binomial models .) .fitted Draws rates, probabilities, means. expected Draws expected values rates probabilities. (Inly Poisson include exposure, binomial models.) Uncertain quantities represented using rvecs.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/augment.bage_mod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Data and Values from a Model — augment.bage_mod","text":"","code":"## specify model mod <- mod_pois(injuries ~ age + sex + year,                 data = injuries,                 exposure = popn)  ## look at prior distribution mod |> augment() #> ℹ Model not fitted, so values drawn straight from prior distribution. #> # A tibble: 912 × 9 #>    age   sex    ethnicity  year            injuries  popn           .observed #>    <fct> <chr>  <chr>     <int>        <rdbl<1000>> <int>        <rdbl<1000>> #>  1 0-4   Female Maori      2000 26091 (12, 1.5e+07) 35830 0.73 (0.00033, 414) #>  2 5-9   Female Maori      2000 25769 (16, 1.1e+07) 35120 0.73 (0.00046, 317) #>  3 10-14 Female Maori      2000 23152 (17, 1.1e+07) 32830 0.71 (0.00051, 336) #>  4 15-19 Female Maori      2000 20067 (22, 8094501) 27130 0.74 (0.00081, 298) #>  5 20-24 Female Maori      2000 16064 (33, 6118622) 24380  0.66 (0.0014, 251) #>  6 25-29 Female Maori      2000   17744 (18, 4e+06) 24160 0.73 (0.00074, 167) #>  7 30-34 Female Maori      2000   18134 (17, 6e+06) 22560  0.8 (0.00075, 266) #>  8 35-39 Female Maori      2000 17766 (15, 8560685) 22230  0.8 (0.00067, 385) #>  9 40-44 Female Maori      2000 14416 (13, 7353526) 18130  0.8 (0.00072, 406) #> 10 45-49 Female Maori      2000   9256 (9, 3690240) 13770 0.67 (0.00065, 268) #> # ℹ 902 more rows #> # ℹ 2 more variables: .fitted <rdbl<1000>>, .expected <rdbl<1000>>  ## fit model mod <- mod |>   fit()  ## look at posterior distribution mod |> augment() #> # A tibble: 912 × 9 #>    age   sex    ethnicity  year injuries  popn .observed #>    <fct> <chr>  <chr>     <int>    <int> <int>     <dbl> #>  1 0-4   Female Maori      2000       12 35830 0.000335  #>  2 5-9   Female Maori      2000        6 35120 0.000171  #>  3 10-14 Female Maori      2000        3 32830 0.0000914 #>  4 15-19 Female Maori      2000        6 27130 0.000221  #>  5 20-24 Female Maori      2000        6 24380 0.000246  #>  6 25-29 Female Maori      2000        6 24160 0.000248  #>  7 30-34 Female Maori      2000       12 22560 0.000532  #>  8 35-39 Female Maori      2000        3 22230 0.000135  #>  9 40-44 Female Maori      2000        6 18130 0.000331  #> 10 45-49 Female Maori      2000        6 13770 0.000436  #> # ℹ 902 more rows #> # ℹ 2 more variables: .fitted <rdbl<1000>>, .expected <rdbl<1000>>"},{"path":"https://bayesiandemography.github.io/bage/reference/bage-package.html","id":null,"dir":"Reference","previous_headings":"","what":"Bayesian estimation and forecasting of age-specific rates — bage-package","title":"Bayesian estimation and forecasting of age-specific rates — bage-package","text":"Fast Bayesian estimation forecasting age-specific rates, probabilities, means, based Template Model Builder.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/bage-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Bayesian estimation and forecasting of age-specific rates — bage-package","text":"Maintainer: John Bryant john@bayesiandemography.com Authors: Junni Zhang junni@bayesiandemography.com","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/components.bage_mod.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Components from a Model — components.bage_mod","title":"Extract Components from a Model — components.bage_mod","text":"Extract batches hyper-parameters model object class \"bage_mod\". tibble draws posterior distribution model fitted, prior distribution .","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/components.bage_mod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Components from a Model — components.bage_mod","text":"","code":"# S3 method for bage_mod components(object, quiet = FALSE, ...)"},{"path":"https://bayesiandemography.github.io/bage/reference/components.bage_mod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Components from a Model — components.bage_mod","text":"object bage_mod object. quiet Whether suppress messages. Default FALSE. ... Unused. Included generic consistency .","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/components.bage_mod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Components from a Model — components.bage_mod","text":"tibble","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/components.bage_mod.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Extract Components from a Model — components.bage_mod","text":"return value contains following columns: term Model term hyper-parameter belongs . component Component within term. level Element within component . .fitted rvec containing draws posterior distribution.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/components.bage_mod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract Components from a Model — components.bage_mod","text":"","code":"## specify model mod <- mod_pois(injuries ~ age + sex + year,                 data = injuries,                 exposure = popn)  ## look at prior distribution mod |> components() #> ℹ Model not fitted, so values drawn straight from prior distribution. #> # A tibble: 37 × 4 #>    term        component level                   .fitted #>    <chr>       <chr>     <chr>              <rdbl<1000>> #>  1 (Intercept) effect    (Intercept)            0 (0, 0) #>  2 age         effect    0-4           0.034 (-4.2, 4.6) #>  3 age         effect    5-9           0.031 (-3.8, 3.6) #>  4 age         effect    10-14        0.0013 (-3.2, 2.9) #>  5 age         effect    15-19       -0.0013 (-2.6, 2.3) #>  6 age         effect    20-24        -0.002 (-2.6, 2.2) #>  7 age         effect    25-29         -0.0078 (-2, 2.1) #>  8 age         effect    30-34       -0.0075 (-1.9, 2.3) #>  9 age         effect    35-39        -0.011 (-1.9, 2.4) #> 10 age         effect    40-44       -0.0011 (-2.6, 2.7) #> # ℹ 27 more rows  ## fit model mod <- mod |>   fit()  ## look at posterior distribution mod |> components() ## posterior distribution #> # A tibble: 37 × 4 #>    term        component level                    .fitted #>    <chr>       <chr>     <chr>               <rdbl<1000>> #>  1 (Intercept) effect    (Intercept)    -8.2 (-8.2, -8.2) #>  2 age         effect    0-4         -0.36 (-0.47, -0.25) #>  3 age         effect    5-9            -1.8 (-1.9, -1.6) #>  4 age         effect    10-14          -1.3 (-1.4, -1.2) #>  5 age         effect    15-19          0.47 (0.38, 0.56) #>  6 age         effect    20-24          0.57 (0.47, 0.66) #>  7 age         effect    25-29          0.46 (0.36, 0.56) #>  8 age         effect    30-34          0.41 (0.31, 0.51) #>  9 age         effect    35-39          0.34 (0.24, 0.44) #> 10 age         effect    40-44          0.34 (0.24, 0.45) #> # ℹ 27 more rows"},{"path":"https://bayesiandemography.github.io/bage/reference/components.bage_ssvd.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Components used by SVD Prior — components.bage_ssvd","title":"Extract Components used by SVD Prior — components.bage_ssvd","text":"Extract matrix offset used SVD prior.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/components.bage_ssvd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Components used by SVD Prior — components.bage_ssvd","text":"","code":"# S3 method for bage_ssvd components(object, n_comp = NULL, joint = NULL, age_labels = NULL, ...)"},{"path":"https://bayesiandemography.github.io/bage/reference/components.bage_ssvd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Components used by SVD Prior — components.bage_ssvd","text":"object object class \"bage_ssvd\". n_comp number components. default half total number components object. joint Whether use joint independent SVDs sex/gender. value supplied, SVD sexes/genders combined used. age_labels Age labels desired profile. labels supplied, detailed profile available used. ... currently used.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/components.bage_ssvd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Components used by SVD Prior — components.bage_ssvd","text":"tibble offset components.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/components.bage_ssvd.html","id":"mathematical-details","dir":"Reference","previous_headings":"","what":"Mathematical details","title":"Extract Components used by SVD Prior — components.bage_ssvd","text":"\\(\\pmb{F}\\) matrix \\(\\pmb{g}\\) offset returned components(), SVD() SVDS() prior generated using $$\\pmb{beta} = \\pmb{F} \\pmb{z} + \\pmb{g}$$ \\(\\pmb{z}\\) vector standard normal variates. complicated SVD-based priors use complicated versions \\(\\pmb{z}\\).","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/components.bage_ssvd.html","id":"scaled-svds-currently-implemented-in-bage","dir":"Reference","previous_headings":"","what":"Scaled SVDs currently implemented in bage","title":"Extract Components used by SVD Prior — components.bage_ssvd","text":"HMD Mortality rates Human Mortality Database. LFP Labour forcce participation rates OECD.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/components.bage_ssvd.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract Components used by SVD Prior — components.bage_ssvd","text":"","code":"## components for females and males combined components(LFP, n_comp = 3) #> # A tibble: 52 × 3 #>    component age    value #>    <fct>     <chr>  <dbl> #>  1 Offset    15-19 -0.789 #>  2 Offset    20-24  0.768 #>  3 Offset    25-29  1.45  #>  4 Offset    30-34  1.55  #>  5 Offset    35-39  1.60  #>  6 Offset    40-44  1.63  #>  7 Offset    45-49  1.52  #>  8 Offset    50-54  1.19  #>  9 Offset    55-59  0.594 #> 10 Offset    60-64 -0.405 #> # ℹ 42 more rows  ## joint model for females and males components(LFP, joint = TRUE, n_comp = 3) #> # A tibble: 104 × 4 #>    component sex    age     value #>    <fct>     <chr>  <chr>   <dbl> #>  1 Offset    Female 15-19 -0.917  #>  2 Offset    Female 20-24  0.489  #>  3 Offset    Female 25-29  0.799  #>  4 Offset    Female 30-34  0.743  #>  5 Offset    Female 35-39  0.847  #>  6 Offset    Female 40-44  0.959  #>  7 Offset    Female 45-49  0.901  #>  8 Offset    Female 50-54  0.606  #>  9 Offset    Female 55-59  0.0367 #> 10 Offset    Female 60-64 -0.920  #> # ℹ 94 more rows  ## females and males modelled independently components(LFP, joint = FALSE, n_comp = 3) #> # A tibble: 104 × 4 #>    component sex    age     value #>    <fct>     <chr>  <chr>   <dbl> #>  1 Offset    Female 15-19 -0.916  #>  2 Offset    Female 20-24  0.481  #>  3 Offset    Female 25-29  0.810  #>  4 Offset    Female 30-34  0.763  #>  5 Offset    Female 35-39  0.855  #>  6 Offset    Female 40-44  0.953  #>  7 Offset    Female 45-49  0.889  #>  8 Offset    Female 50-54  0.597  #>  9 Offset    Female 55-59  0.0388 #> 10 Offset    Female 60-64 -0.907  #> # ℹ 94 more rows  ## specify age groups labels <- poputils::age_labels(type = \"five\", min = 15, max = 60) components(LFP, age_labels = labels) #> # A tibble: 36 × 3 #>    component   age    value #>    <fct>       <chr>  <dbl> #>  1 Offset      15-19 -1.00  #>  2 Offset      20-24  0.738 #>  3 Offset      25-29  1.48  #>  4 Offset      30-34  1.63  #>  5 Offset      35-39  1.70  #>  6 Offset      40-44  1.73  #>  7 Offset      45-49  1.61  #>  8 Offset      50-54  1.26  #>  9 Offset      55-59  0.629 #> 10 Component 1 15-19 -0.281 #> # ℹ 26 more rows"},{"path":"https://bayesiandemography.github.io/bage/reference/compose_time.html","id":null,"dir":"Reference","previous_headings":"","what":"Compose a Prior for a Time Main Effect or Interaction — compose_time","title":"Compose a Prior for a Time Main Effect or Interaction — compose_time","text":"Create composite prior time main effect, interaction involving time. composite prior always contains trend, may contain cyclical effect, seasonal effect, error.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/compose_time.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compose a Prior for a Time Main Effect or Interaction — compose_time","text":"","code":"compose_time(trend, cyclical = NULL, seasonal = NULL, error = NULL)"},{"path":"https://bayesiandemography.github.io/bage/reference/compose_time.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compose a Prior for a Time Main Effect or Interaction — compose_time","text":"trend Prior describing long-run behavior series. See choices. Required. cyclical Prior describing departures long-run trend fixed period. See choices. Optional. seasonal Prior describing departures long-run trend fixed period. See choices. Optional. error Prior additional idiosyncratic variation. See choices. Optional","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/compose_time.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compose a Prior for a Time Main Effect or Interaction — compose_time","text":"object class \"bage_prior_compose\"","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/compose_time.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compose a Prior for a Time Main Effect or Interaction — compose_time","text":"","code":"compose_time(   trend = Lin(),   cyclical = AR() ) #> $i_prior #> [1] 1000 #>  #> $const #> [1] 0 #>  #> $specific #> $specific$priors #> $specific$priors$trend #> $i_prior #> [1] 8 #>  #> $const #>    scale sd_slope  #>        1        1  #>  #> $specific #> $specific$scale #> [1] 1 #>  #> $specific$sd_slope #> [1] 1 #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_lin\" \"bage_prior\"     #>  #> $specific$priors$cyclical #> $i_prior #> [1] 5 #>  #> $const #> shape1 shape2    min    max  scale  #>      3      3     -1      1      1  #>  #> $specific #> $specific$n #> [1] 2 #>  #> $specific$shape1 #> [1] 3 #>  #> $specific$shape2 #> [1] 3 #>  #> $specific$min #> [1] -1 #>  #> $specific$max #> [1] 1 #>  #> $specific$scale #> [1] 1 #>  #> $specific$nm #> [1] \"AR\" #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_ar\" \"bage_prior\"    #>  #>  #> $specific$along #> NULL #>  #> $specific$nm #> [1] \"compose_time\" #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_compose\" \"bage_prior\"          compose_time(   trend = RW2(),   error = N() ) #> $i_prior #> [1] 1000 #>  #> $const #> [1] 0 #>  #> $specific #> $specific$priors #> $specific$priors$trend #> $i_prior #> [1] 4 #>  #> $const #> scale  #>     1  #>  #> $specific #> $specific$scale #> [1] 1 #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_rw2\" \"bage_prior\"     #>  #> $specific$priors$error #> $i_prior #> [1] 1 #>  #> $const #> scale  #>     1  #>  #> $specific #> $specific$scale #> [1] 1 #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_norm\" \"bage_prior\"      #>  #>  #> $specific$along #> NULL #>  #> $specific$nm #> [1] \"compose_time\" #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_compose\" \"bage_prior\"          compose_time(   trend = ELin(),   cyclical = EAR(),   season = ESeas(n = 4) ) #> $i_prior #> [1] 1000 #>  #> $const #> [1] 0 #>  #> $specific #> $specific$priors #> $specific$priors$trend #> $i_prior #> [1] 9 #>  #> $const #>    scale sd_slope   mscale  #>        1        1        1  #>  #> $specific #> $specific$scale #> [1] 1 #>  #> $specific$sd_slope #> [1] 1 #>  #> $specific$mscale #> [1] 1 #>  #> $specific$along #> NULL #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_elin\" \"bage_prior\"      #>  #> $specific$priors$cyclical #> $i_prior #> [1] 12 #>  #> $const #> shape1 shape2    min    max  scale  #>      3      3     -1      1      1  #>  #> $specific #> $specific$n #> [1] 2 #>  #> $specific$shape1 #> [1] 3 #>  #> $specific$shape2 #> [1] 3 #>  #> $specific$min #> [1] -1 #>  #> $specific$max #> [1] 1 #>  #> $specific$scale #> [1] 1 #>  #> $specific$along #> NULL #>  #> $specific$nm #> [1] \"EAR\" #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_ear\" \"bage_prior\"     #>  #> $specific$priors$seasonal #> $i_prior #> [1] 11 #>  #> $const #>    scale <unused> <unused> <unused>  #>        1        0        0        0  #>  #> $specific #> $specific$n #> [1] 4 #>  #> $specific$scale #> [1] 1 #>  #> $specific$along #> NULL #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_eseas\" \"bage_prior\"       #>  #>  #> $specific$along #> NULL #>  #> $specific$nm #> [1] \"compose_time\" #>  #>  #> attr(,\"class\") #> [1] \"bage_prior_compose\" \"bage_prior\""},{"path":"https://bayesiandemography.github.io/bage/reference/deaths.html","id":null,"dir":"Reference","previous_headings":"","what":"Deaths in Iceland — deaths","title":"Deaths in Iceland — deaths","text":"Deaths mid-year populations Iceland, age, sex, calendar year.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/deaths.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Deaths in Iceland — deaths","text":"","code":"deaths"},{"path":"https://bayesiandemography.github.io/bage/reference/deaths.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Deaths in Iceland — deaths","text":"tibble 5300 rows following columns: age Single year age, \"105+\". sex \"Female\" \"Male\". time Calendar year, 1998-2022. deaths Counts deaths. popn Mid-year population.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/deaths.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Deaths in Iceland — deaths","text":"Tables \"Deaths municipalities, sex age 1981-2022\", \"Average annual population municipality, age sex 1998-2022 - Current municipalities\", Statistics Iceland website. Data downloaded 12 July 2023.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/divorces.html","id":null,"dir":"Reference","previous_headings":"","what":"Divorces in New Zealand — divorces","title":"Divorces in New Zealand — divorces","text":"Counts divorces population, age, sex, calendar year, New Zealand, 1992-2021.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/divorces.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Divorces in New Zealand — divorces","text":"","code":"divorces"},{"path":"https://bayesiandemography.github.io/bage/reference/divorces.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Divorces in New Zealand — divorces","text":"data frame following variables: age: Age, 5-year age groups, \"15-19\" \"65+\". sex: \"Female\" \"Male\". time: Calendar year. divorces: Numbers divorces year. population: Person-years lived year.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/divorces.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Divorces in New Zealand — divorces","text":"Divorce counts data table \"Age divorces sex (marriages civil unions) (Annual-Dec)\" online database Infoshare Statistics New Zealand website. Data downloaded 22 March 2023. Population estimates derived data table \"Estimated Resident Population Age Sex (1991+) (Annual-Dec)\" online database Infoshare Statistics New Zealand website. Data downloaded 26 March 2023.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/expenditure.html","id":null,"dir":"Reference","previous_headings":"","what":"Per capital health expenditure in the Netherlands, 2003-2011 — expenditure","title":"Per capital health expenditure in the Netherlands, 2003-2011 — expenditure","text":"Per capita health expenditure, Euros, providers, diagnostic group, age group, year.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/expenditure.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Per capital health expenditure in the Netherlands, 2003-2011 — expenditure","text":"","code":"expenditure"},{"path":"https://bayesiandemography.github.io/bage/reference/expenditure.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Per capital health expenditure in the Netherlands, 2003-2011 — expenditure","text":"data frame 1296 rows following variables: diag Diagnostic group age Age, 5-year age groups, open age group 85+ year 2003, 2005, 2007, 2011","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/expenditure.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Per capital health expenditure in the Netherlands, 2003-2011 — expenditure","text":"Calculated data table \"Expenditure disease, age gender System Health Accounts (SHA) Framework : Current health spending age\" OECD database 'OECD.Stat' (downloaded 25 May 2016) table \"Historical population data projections (1950-2050)\" OECD database 'OECD.Stat' (downloaded 5 June 2016).","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/fit.bage_mod.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit a model — fit.bage_mod","title":"Fit a model — fit.bage_mod","text":"Fit model","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/fit.bage_mod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit a model — fit.bage_mod","text":"","code":"# S3 method for bage_mod fit(object, ...)"},{"path":"https://bayesiandemography.github.io/bage/reference/fit.bage_mod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit a model — fit.bage_mod","text":"object bage_mod object, typically created mod_pois(), mod_binom(), mod_norm(). ... currently used.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/fit.bage_mod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit a model — fit.bage_mod","text":"bage_mod object","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/fit.bage_mod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit a model — fit.bage_mod","text":"","code":"## specify model mod <- mod_pois(injuries ~ age + sex + year,                 data = injuries,                 exposure = popn)  ## examine unfitted model mod #> -- Unfitted Poisson model -- #>  #>    injuries ~ age + sex + year #>  #> (Intercept) ~ NFix() #>         age ~ RW() #>         sex ~ NFix() #>        year ~ RW() #>  #>      dispersion: mean=1 #>        exposure: popn #>         var_age: age #>   var_sexgender: sex #>        var_time: year #>          n_draw: 1000  ## fit model mod <- fit(mod)  ## examine fitted model mod #> -- Fitted Poisson model -- #>  #>    injuries ~ age + sex + year #>  #> (Intercept) ~ NFix() #>         age ~ RW() #>         sex ~ NFix() #>        year ~ RW() #>  #>      dispersion: mean=1 #>        exposure: popn #>         var_age: age #>   var_sexgender: sex #>        var_time: year #>          n_draw: 1000  ## extract rates aug <- augment(mod) aug #> # A tibble: 912 × 9 #>    age   sex    ethnicity  year injuries  popn .observed #>    <fct> <chr>  <chr>     <int>    <int> <int>     <dbl> #>  1 0-4   Female Maori      2000       12 35830 0.000335  #>  2 5-9   Female Maori      2000        6 35120 0.000171  #>  3 10-14 Female Maori      2000        3 32830 0.0000914 #>  4 15-19 Female Maori      2000        6 27130 0.000221  #>  5 20-24 Female Maori      2000        6 24380 0.000246  #>  6 25-29 Female Maori      2000        6 24160 0.000248  #>  7 30-34 Female Maori      2000       12 22560 0.000532  #>  8 35-39 Female Maori      2000        3 22230 0.000135  #>  9 40-44 Female Maori      2000        6 18130 0.000331  #> 10 45-49 Female Maori      2000        6 13770 0.000436  #> # ℹ 902 more rows #> # ℹ 2 more variables: .fitted <rdbl<1000>>, .expected <rdbl<1000>>  ## extract hyper-parameters comp <- components(mod) comp #> # A tibble: 37 × 4 #>    term        component level                    .fitted #>    <chr>       <chr>     <chr>               <rdbl<1000>> #>  1 (Intercept) effect    (Intercept)    -8.2 (-8.2, -8.2) #>  2 age         effect    0-4         -0.36 (-0.47, -0.26) #>  3 age         effect    5-9            -1.8 (-1.9, -1.6) #>  4 age         effect    10-14          -1.3 (-1.4, -1.2) #>  5 age         effect    15-19          0.46 (0.37, 0.57) #>  6 age         effect    20-24          0.56 (0.46, 0.65) #>  7 age         effect    25-29          0.46 (0.35, 0.56) #>  8 age         effect    30-34            0.4 (0.31, 0.5) #>  9 age         effect    35-39          0.34 (0.24, 0.44) #> 10 age         effect    40-44          0.35 (0.24, 0.44) #> # ℹ 27 more rows"},{"path":"https://bayesiandemography.github.io/bage/reference/forecast.bage_mod.html","id":null,"dir":"Reference","previous_headings":"","what":"Use a Model to Make a Forecast — forecast.bage_mod","title":"Use a Model to Make a Forecast — forecast.bage_mod","text":"Forecast rates, probabilities, means, model parameters.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/forecast.bage_mod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Use a Model to Make a Forecast — forecast.bage_mod","text":"","code":"# S3 method for bage_mod forecast(   object,   output = c(\"augment\", \"components\"),   include_estimates = FALSE,   labels,   ... )"},{"path":"https://bayesiandemography.github.io/bage/reference/forecast.bage_mod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Use a Model to Make a Forecast — forecast.bage_mod","text":"object bage_mod object. output Type output returned include_estimates Whether include historical estimates along forecasts. Default FALSE. labels Labels future values. WARNING argument temporary. ... currently used.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/forecast.bage_mod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Use a Model to Make a Forecast — forecast.bage_mod","text":"tibble.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/forecast.bage_mod.html","id":"how-the-forecasts-are-constructed","dir":"Reference","previous_headings":"","what":"How the forecasts are constructed","title":"Use a Model to Make a Forecast — forecast.bage_mod","text":"Internally, steps involved forecast : Forecast time-varying main effects interactions, e.g. time main effect, age-time interaction. Combine forecasts time-varying main effects interactions non-time-varying parameters, e.g. age effects dispersion. Use combined parameters generate values rates, probabilities means. See LINK VIGNETTE details.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/forecast.bage_mod.html","id":"output","dir":"Reference","previous_headings":"","what":"Output","title":"Use a Model to Make a Forecast — forecast.bage_mod","text":"output \"augment\" (default), return value forecast() looks like output function augment(). output \"components\", return value looks like output components(). include_estimates FALSE (default), output forecast() excludes values time-varying parameters period covered data. include_estimates TRUE, output includes values. Setting include_estimates TRUE can helpful creating graphs combine estimates forecasts.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/forecast.bage_mod.html","id":"using-data-in-forecasts","dir":"Reference","previous_headings":"","what":"Using data in forecasts","title":"Use a Model to Make a Forecast — forecast.bage_mod","text":"forecast() typically used fitted model, .e. model parameter values estimated data. resulting forecasts reflect data priors. forecast() can, however, used unfitted model. case, forecasts based entirely priors. See example. Experimenting forecasts based entirely priors can helpful designing model. See LINK WORKFLOW VIGNETTE details.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/forecast.bage_mod.html","id":"warning","dir":"Reference","previous_headings":"","what":"Warning","title":"Use a Model to Make a Forecast — forecast.bage_mod","text":"interface forecast() finalised likely change near future.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/forecast.bage_mod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Use a Model to Make a Forecast — forecast.bage_mod","text":"","code":"## specify and fit model mod <- mod_pois(injuries ~ age * sex + ethnicity + year,                 data = injuries,                 exposure = popn) |>   fit(mod) mod #> -- Fitted Poisson model -- #>  #>    injuries ~ age * sex + ethnicity + year #>  #> (Intercept) ~ NFix() #>         age ~ RW() #>         sex ~ NFix() #>   ethnicity ~ NFix() #>        year ~ RW() #>     age:sex ~ ERW() #>  #>      dispersion: mean=1 #>        exposure: popn #>         var_age: age #>   var_sexgender: sex #>        var_time: year #>          n_draw: 1000  ## forecasts mod |>   forecast(labels = 2019:2024) #> # A tibble: 288 × 9 #>    age   sex    ethnicity  year injuries  popn .observed #>    <fct> <chr>  <chr>     <int>    <int> <int>     <dbl> #>  1 0-4   Female Maori      2019       NA    NA        NA #>  2 0-4   Female Maori      2020       NA    NA        NA #>  3 0-4   Female Maori      2021       NA    NA        NA #>  4 0-4   Female Maori      2022       NA    NA        NA #>  5 0-4   Female Maori      2023       NA    NA        NA #>  6 0-4   Female Maori      2024       NA    NA        NA #>  7 0-4   Female Non Maori  2019       NA    NA        NA #>  8 0-4   Female Non Maori  2020       NA    NA        NA #>  9 0-4   Female Non Maori  2021       NA    NA        NA #> 10 0-4   Female Non Maori  2022       NA    NA        NA #> # ℹ 278 more rows #> # ℹ 2 more variables: .fitted <rdbl<1000>>, .expected <rdbl<1000>>  ## combined estimates and forecasts mod |>   forecast(labels = 2019:2024,            include_estimates = TRUE) #> # A tibble: 1,200 × 9 #>    age   sex    ethnicity  year injuries  popn .observed #>    <fct> <chr>  <chr>     <int>    <int> <int>     <dbl> #>  1 0-4   Female Maori      2000       12 35830 0.000335  #>  2 5-9   Female Maori      2000        6 35120 0.000171  #>  3 10-14 Female Maori      2000        3 32830 0.0000914 #>  4 15-19 Female Maori      2000        6 27130 0.000221  #>  5 20-24 Female Maori      2000        6 24380 0.000246  #>  6 25-29 Female Maori      2000        6 24160 0.000248  #>  7 30-34 Female Maori      2000       12 22560 0.000532  #>  8 35-39 Female Maori      2000        3 22230 0.000135  #>  9 40-44 Female Maori      2000        6 18130 0.000331  #> 10 45-49 Female Maori      2000        6 13770 0.000436  #> # ℹ 1,190 more rows #> # ℹ 2 more variables: .fitted <rdbl<1000>>, .expected <rdbl<1000>>  ## hyper-parameters mod |>   forecast(labels = 2019:2024,            output = \"components\") #> # A tibble: 51 × 4 #>    term        component level                    .fitted #>    <chr>       <chr>     <chr>               <rdbl<1000>> #>  1 (Intercept) effect    (Intercept)    -8.2 (-8.2, -8.1) #>  2 age         effect    0-4         -0.44 (-0.51, -0.37) #>  3 age         effect    5-9            -1.7 (-1.8, -1.6) #>  4 age         effect    10-14          -1.3 (-1.4, -1.2) #>  5 age         effect    15-19          0.42 (0.36, 0.47) #>  6 age         effect    20-24           0.54 (0.49, 0.6) #>  7 age         effect    25-29           0.4 (0.34, 0.46) #>  8 age         effect    30-34          0.33 (0.27, 0.38) #>  9 age         effect    35-39          0.33 (0.28, 0.39) #> 10 age         effect    40-44           0.34 (0.28, 0.4) #> # ℹ 41 more rows  ## forecast based on priors only mod_unfitted <- mod_pois(injuries ~ age * sex + ethnicity + year,                          data = injuries,                          exposure = popn) mod_unfitted |>   forecast(labels = 2019:2024) #> ℹ Model not fitted, so values drawn straight from prior distribution. #> # A tibble: 288 × 9 #>    age   sex    ethnicity  year injuries  popn .observed               .fitted #>    <fct> <chr>  <chr>     <int>    <int> <int>     <dbl>          <rdbl<1000>> #>  1 0-4   Female Maori      2019       NA    NA        NA  0.57 (3.1e-05, 2966) #>  2 0-4   Female Maori      2020       NA    NA        NA  0.58 (1.4e-05, 3483) #>  3 0-4   Female Maori      2021       NA    NA        NA  0.54 (3.1e-05, 5223) #>  4 0-4   Female Maori      2022       NA    NA        NA 0.59 (1.3e-05, 12627) #>  5 0-4   Female Maori      2023       NA    NA        NA  0.64 (1.3e-05, 9293) #>  6 0-4   Female Maori      2024       NA    NA        NA  0.62 (7.3e-06, 9676) #>  7 0-4   Female Non Maori  2019       NA    NA        NA  0.56 (4.5e-05, 2669) #>  8 0-4   Female Non Maori  2020       NA    NA        NA  0.58 (9.9e-06, 2336) #>  9 0-4   Female Non Maori  2021       NA    NA        NA  0.57 (2.8e-05, 2974) #> 10 0-4   Female Non Maori  2022       NA    NA        NA   0.6 (1.4e-05, 7514) #> # ℹ 278 more rows #> # ℹ 1 more variable: .expected <rdbl<1000>>"},{"path":"https://bayesiandemography.github.io/bage/reference/generate.bage_ssvd.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Random Age or Age-Sex Profiles — generate.bage_ssvd","title":"Generate Random Age or Age-Sex Profiles — generate.bage_ssvd","text":"Generate random age age-sex profiles object class \"bage_ssvd\". object class \"bage_ssvd\" holds results SVD decomposition demographic data.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/generate.bage_ssvd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Random Age or Age-Sex Profiles — generate.bage_ssvd","text":"","code":"# S3 method for bage_ssvd generate(x, n_draw = 20, n_comp = NULL, joint = NULL, age_labels = NULL, ...)"},{"path":"https://bayesiandemography.github.io/bage/reference/generate.bage_ssvd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate Random Age or Age-Sex Profiles — generate.bage_ssvd","text":"x object class \"bage_ssvd\". n_draw Number random draws generate. n_comp number components use generating profiles. Default half number components x. joint Whether use joint independent SVDs sex/gender. value supplied, SVD sexes/genders combined used. age_labels Age labels desired profile. labels supplied, detailed profile available used. ... currently used.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/generate.bage_ssvd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate Random Age or Age-Sex Profiles — generate.bage_ssvd","text":"tibble","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/generate.bage_ssvd.html","id":"scaled-svds-currently-implemented-in-bage","dir":"Reference","previous_headings":"","what":"Scaled SVDs currently implemented in bage","title":"Generate Random Age or Age-Sex Profiles — generate.bage_ssvd","text":"HMD Mortality rates Human Mortality Database. LFP Labour forcce participation rates OECD.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/generate.bage_ssvd.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate Random Age or Age-Sex Profiles — generate.bage_ssvd","text":"","code":"## SVD for females and males combined generate(HMD) #> # A tibble: 2,220 × 3 #>     draw age   value #>    <int> <chr> <dbl> #>  1     1 0     -3.45 #>  2     1 1     -5.52 #>  3     1 2     -6.35 #>  4     1 3     -6.81 #>  5     1 4     -7.18 #>  6     1 5     -7.44 #>  7     1 6     -7.70 #>  8     1 7     -7.95 #>  9     1 8     -8.17 #> 10     1 9     -8.33 #> # ℹ 2,210 more rows  ## separate SVDs for females and males generate(HMD, joint = FALSE)  #> # A tibble: 4,440 × 4 #>     draw sexgender age   value #>    <int> <chr>     <chr> <dbl> #>  1     1 Female    0     -3.44 #>  2     1 Female    1     -5.77 #>  3     1 Female    2     -6.38 #>  4     1 Female    3     -6.70 #>  5     1 Female    4     -6.97 #>  6     1 Female    5     -7.17 #>  7     1 Female    6     -7.34 #>  8     1 Female    7     -7.48 #>  9     1 Female    8     -7.58 #> 10     1 Female    9     -7.72 #> # ℹ 4,430 more rows  ## specify age groups labels <- poputils::age_labels(type = \"lt\", max = 60) generate(HMD, age_labels = labels) #> # A tibble: 280 × 3 #>     draw age   value #>    <int> <chr> <dbl> #>  1     1 0     -4.80 #>  2     1 1-4   -7.39 #>  3     1 5-9   -8.88 #>  4     1 10-14 -9.33 #>  5     1 15-19 -8.54 #>  6     1 20-24 -7.97 #>  7     1 25-29 -7.76 #>  8     1 30-34 -7.55 #>  9     1 35-39 -7.31 #> 10     1 40-44 -7.03 #> # ℹ 270 more rows"},{"path":"https://bayesiandemography.github.io/bage/reference/households.html","id":null,"dir":"Reference","previous_headings":"","what":"People in one-person households in New Zealand — households","title":"People in one-person households in New Zealand — households","text":"Counts people one-person households, counts people living household, age, region, year.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/households.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"People in one-person households in New Zealand — households","text":"","code":"households"},{"path":"https://bayesiandemography.github.io/bage/reference/households.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"People in one-person households in New Zealand — households","text":"data frame 528 rows following variables: age: Age, 5-year age groups, open age group 65+ region: Region within New Zealand year: Calendar year oneperson: Count people living one-person households total: Count people living types household","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/households.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"People in one-person households in New Zealand — households","text":"Derived data table \"Household composition age group, people households occupied private dwellings, 2006, 2013, 2018 Censuses (RC, TA, DHB, SA2)\" online database NZ.Stat, Statistics New Zealand website. Data downloaded 3 January 2023.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/injuries.html","id":null,"dir":"Reference","previous_headings":"","what":"Fatal injuries in New Zealand — injuries","title":"Fatal injuries in New Zealand — injuries","text":"Counts fatal injuries New Zealand, age, sex, ethnicity, year, plus estimates population risk.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/injuries.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fatal injuries in New Zealand — injuries","text":"","code":"injuries"},{"path":"https://bayesiandemography.github.io/bage/reference/injuries.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Fatal injuries in New Zealand — injuries","text":"data frame 912 rows following variables: age: Age, 5-year age groups, age 55-59. sex: \"Female\" \"Male\" ethnicity: \"Maori\" \"Non Maori\" year: Calendar year injuries: Count injuries, randomly rounded base 3. popn: Population 30 June.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/injuries.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Fatal injuries in New Zealand — injuries","text":"Derived data tables \"Estimated Resident Population Age Sex (1991+) (Annual-Jun)\" \"Maori Ethnic Group Estimated Resident Population Age Sex (1991+) (Annual-Jun)\" online database Infoshare, table \"Count fatal serious non-fatal injuries sex, age group, ethnicity, cause, severity injury, 2000-2021\" online database NZ.Stat, Statistics New Zealand website. Data downloaded 1 January 2023.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/is_fitted.html","id":null,"dir":"Reference","previous_headings":"","what":"Test whether a model has been fitted — is_fitted","title":"Test whether a model has been fitted — is_fitted","text":"Test whether fit() called model object.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/is_fitted.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Test whether a model has been fitted — is_fitted","text":"","code":"is_fitted(x)"},{"path":"https://bayesiandemography.github.io/bage/reference/is_fitted.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Test whether a model has been fitted — is_fitted","text":"x model object.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/is_fitted.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Test whether a model has been fitted — is_fitted","text":"TRUE FALSE","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/is_fitted.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Test whether a model has been fitted — is_fitted","text":"","code":"mod <- mod_pois(injuries ~ age + sex + year,                 data = injuries,                 exposure = popn) is_fitted(mod) #> [1] FALSE mod <- fit(mod) is_fitted(mod) #> [1] TRUE"},{"path":"https://bayesiandemography.github.io/bage/reference/mod_binom.html","id":null,"dir":"Reference","previous_headings":"","what":"Specify a binomial model — mod_binom","title":"Specify a binomial model — mod_binom","text":"Specify model outcome drawn binomial distribution.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/mod_binom.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Specify a binomial model — mod_binom","text":"","code":"mod_binom(formula, data, size)"},{"path":"https://bayesiandemography.github.io/bage/reference/mod_binom.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Specify a binomial model — mod_binom","text":"formula R formula, specifying outcome predictors. data data frame containing outcome, predictors, , number trials size Name variable describing number trials.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/mod_binom.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Specify a binomial model — mod_binom","text":"object class bage_mod.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/mod_binom.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Specify a binomial model — mod_binom","text":"formula specifies outcome predictors, including interactions predictors. follows standard R formula conventions, except include transformations (e.g. sqrt(deaths)). data data frame holding outcome, predictors, number trials. size name (bare quoted) variable data measuring number trials. first level model $$y \\sim \\text{binom}(n, \\pi)$$ \\(\\pi\\) sucess probability, \\(n\\) number trials. TODO - Include error term specification finalised.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/mod_binom.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Specify a binomial model — mod_binom","text":"","code":"mod <- mod_binom(oneperson ~ age:region + age:year,                  data = households,                  size = total)"},{"path":"https://bayesiandemography.github.io/bage/reference/mod_norm.html","id":null,"dir":"Reference","previous_headings":"","what":"Specify a normal model — mod_norm","title":"Specify a normal model — mod_norm","text":"Specify model outcome drawn normal distribution.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/mod_norm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Specify a normal model — mod_norm","text":"","code":"mod_norm(formula, data, weights)"},{"path":"https://bayesiandemography.github.io/bage/reference/mod_norm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Specify a normal model — mod_norm","text":"formula R formula, specifying outcome predictors. data data frame containing outcome, predictors, , optionally, weights. weights Name weights variable, 1. Internally, outcome scaled mean 0 sd 1; weights scaled mean 1.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/mod_norm.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Specify a normal model — mod_norm","text":"object class bage_mod.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/mod_norm.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Specify a normal model — mod_norm","text":"formula specifies outcome predictors, including interactions predictors. follows standard R formula conventions, except include transformations (e.g. sqrt(deaths)). data holds outcome, predictors, , optionally, weights. weights name (bare quoted) variable data used weights, , model include weights, 1. model includes weights, first level model $$y \\sim \\text{norm}(\\mu, \\sigma^2 / w)$$ \\(\\mu\\) underlying rate, \\(w\\) weights. model include weights, first level $$y \\sim \\text{norm}(\\mu, \\sigma^2)$$ TODO - Include error term specification finalised.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/mod_norm.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Specify a normal model — mod_norm","text":"","code":"mod <- mod_norm(value ~ diag:age + year,                 data = expenditure,                 weights = 1)"},{"path":"https://bayesiandemography.github.io/bage/reference/mod_pois.html","id":null,"dir":"Reference","previous_headings":"","what":"Specify a Poisson model — mod_pois","title":"Specify a Poisson model — mod_pois","text":"Specify model outcome drawn Poisson distribution.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/mod_pois.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Specify a Poisson model — mod_pois","text":"","code":"mod_pois(formula, data, exposure)"},{"path":"https://bayesiandemography.github.io/bage/reference/mod_pois.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Specify a Poisson model — mod_pois","text":"formula R formula, specifying outcome predictors. data data frame containing outcome, predictors, , optionally, exposure. exposure Name exposure variable, 1.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/mod_pois.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Specify a Poisson model — mod_pois","text":"object class bage_mod_pois.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/mod_pois.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Specify a Poisson model — mod_pois","text":"formula specifies outcome predictors, including interactions predictors. follows standard R formula conventions, except include transformations (e.g. sqrt(deaths)). data holds outcome, predictors, , optionally, exposure. exposure name (bare quoted) variable data used measure exposure, , model include exposure, 1. model includes exposure, first level model $$y \\sim \\text{Poisson}(\\mu w)$$ \\(\\mu\\) underlying rate, \\(w\\) exposure. model include exposure, first level $$y \\sim \\text{Poisson}(\\mu)$$ TODO - Include error term specification finalised.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/mod_pois.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Specify a Poisson model — mod_pois","text":"","code":"## model with exposure mod <- mod_pois(injuries ~ age:sex + ethnicity + year,                 data = injuries,                 exposure = popn)  ## model without exposure mod <- mod_pois(injuries ~ age:sex + ethnicity + year,                 data = injuries,                 exposure = 1)"},{"path":"https://bayesiandemography.github.io/bage/reference/priors.html","id":null,"dir":"Reference","previous_headings":"","what":"Priors for Intercept, Main Effects, Interactions — priors","title":"Priors for Intercept, Main Effects, Interactions — priors","text":"models rates, probabilities, means created functions mod_pois(), mod_binom(), mod_norm() always include intercept, typically include main effects, interactions. models, instance include age effect, many include interaction age sex/gender, age time.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/priors.html","id":"ordinary-priors","dir":"Reference","previous_headings":"","what":"Ordinary Priors","title":"Priors for Intercept, Main Effects, Interactions — priors","text":"intercept, main effects, interactions prior models capture expected behavior term. Current choices prior models summarised . Priors links help implemented. Priors without links next queue implementation.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/priors.html","id":"composite-priors","dir":"Reference","previous_headings":"","what":"Composite Priors","title":"Priors for Intercept, Main Effects, Interactions — priors","text":"Time main effects, interactions involving time, can modelled using prior built several components. composite time prior specified using compose_time(). elements prior follows. elements trend optional.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/reexports.html","id":null,"dir":"Reference","previous_headings":"","what":"Objects exported from other packages — reexports","title":"Objects exported from other packages — reexports","text":"objects imported packages. Follow links see documentation. generics augment, components, equation, fit, forecast, generate, tidy","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/replicate_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Draw from the Prior Predictive Distribution of a Model — replicate_data","title":"Draw from the Prior Predictive Distribution of a Model — replicate_data","text":"Draw prior predictive distribution model, .e., Create Replicate Data","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/replicate_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Draw from the Prior Predictive Distribution of a Model — replicate_data","text":"","code":"replicate_data(x, condition_on = NULL, n = 19)"},{"path":"https://bayesiandemography.github.io/bage/reference/replicate_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Draw from the Prior Predictive Distribution of a Model — replicate_data","text":"x fitted model, typically created calling mod_pois(), mod_binom(), mod_norm(), fit(). condition_on Parameters condition . Either \"meanpar\" \"par\". See details. n Number replicate datasets create. Default 19.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/replicate_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Draw from the Prior Predictive Distribution of a Model — replicate_data","text":"tibble following structure:","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/replicate_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Draw from the Prior Predictive Distribution of a Model — replicate_data","text":"Use fitted model create replicate datasets, typically way checking model. Use n draws posterior distribution model parameters generate n simulated datasets. model working well, simulated datasets look similar actual dataset.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/replicate_data.html","id":"","dir":"Reference","previous_headings":"","what":"Draw from the Prior Predictive Distribution of a Model — replicate_data","title":"Draw from the Prior Predictive Distribution of a Model — replicate_data","text":"condition_on argument Poisson binomial models include dispersion terms (default), two options constructing replicate data. condition_on \"par\", replicate data created () drawing values posterior distribution rates probabilities (\\(\\gamma_i\\) defined mod_pois() mod_binom()), (ii)  conditional rates probabilities, drawing values outcome variable. condition_on \"meanpar\", replicate data created () drawing values hyper-parameters governing rates probabilities (\\(\\mu_i\\) \\(\\xi\\) defined mod_pois() mod_binom()), (ii) conditional hyper-parameters, drawing values rates probabilties, finally (iii) conditional rates probabilities, drawing values outcome variable. default condition_on \"meanpar\". \"meanpar\" option provides severe test model \"par\" option, since \"par\" values weighted averages \"meanpar\" values original data. described mod_norm(), normal models slightly different structure Poisson binomial models, distinction \"par\" \"meanpar\" apply.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/replicate_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Draw from the Prior Predictive Distribution of a Model — replicate_data","text":"","code":"mod <- mod_pois(injuries ~ age:sex + ethnicity + year,                 data = injuries,                 exposure = 1) |>   fit()  rep_data <- mod |>   replicate_data()  library(dplyr) #>  #> Attaching package: ‘dplyr’ #> The following objects are masked from ‘package:stats’: #>  #>     filter, lag #> The following objects are masked from ‘package:base’: #>  #>     intersect, setdiff, setequal, union rep_data |>   group_by(.replicate) |>   count(wt = injuries) #> # A tibble: 20 × 2 #> # Groups:   .replicate [20] #>    .replicate       n #>    <fct>        <dbl> #>  1 Original     21588 #>  2 Replicate 1  21513 #>  3 Replicate 2  21512 #>  4 Replicate 3  20871 #>  5 Replicate 4  21591 #>  6 Replicate 5  21277 #>  7 Replicate 6  21654 #>  8 Replicate 7  21356 #>  9 Replicate 8  21851 #> 10 Replicate 9  20542 #> 11 Replicate 10 21957 #> 12 Replicate 11 21789 #> 13 Replicate 12 21070 #> 14 Replicate 13 21624 #> 15 Replicate 14 21641 #> 16 Replicate 15 21377 #> 17 Replicate 16 21234 #> 18 Replicate 17 20684 #> 19 Replicate 18 21527 #> 20 Replicate 19 21875"},{"path":"https://bayesiandemography.github.io/bage/reference/report_sim.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulation study of a model — report_sim","title":"Simulation study of a model — report_sim","text":"Use simulated data assess performance estimated model.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/report_sim.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulation study of a model — report_sim","text":"","code":"report_sim(   mod_est,   mod_sim = NULL,   n_sim = 100,   point_est_fun = c(\"median\", \"mean\"),   widths = c(0.5, 0.95),   report_type = c(\"short\", \"long\", \"full\"),   n_core = 1 )"},{"path":"https://bayesiandemography.github.io/bage/reference/report_sim.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulation study of a model — report_sim","text":"mod_est model whose performance assessed. object class bage_mod. mod_sim model used generate simulated data. value supplied, mod_est used. n_sim Number sets simulated data use. Default 100. point_est_fun Name function use calculate point estimates. options \"mean\" \"median\". default \"mean\". widths Widths credible intervals. vector values interval (0, 1]. Default c(0.5, 0.95). report_type Amount detail return value. Options \"short\" \"long\". Default \"short\". n_core Number cores use parallel processing. n_core 1 (default), parallel processing done.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/report_sim.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulation study of a model — report_sim","text":"report_type \"short\" tibble following columns: component. Part model. See Details. \"par\" rate, probability, mean parameter likelihood. vals_sim. Simulated value parameter, averaged across simulations cells. error_point_est. Point estimate minus simulation-true value, averaged across simulations cells. cover. Actual proportion simulation-true values fall within type interval, averaged across simulations cells. report_type \"long\" tibble following columns: component. Part model. See components(). \"par\" rate, probability, mean parameter likelihood. term. Category within component. level. Category within term. vals_sim. Simulated values parameter, stored rvec. error_point_est. Point estimates minus simulation-true values, stored rvec. cover. Actual proportions simulation-true values falling within type interval, stored rvec.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/report_sim.html","id":"warning","dir":"Reference","previous_headings":"","what":"Warning","title":"Simulation study of a model — report_sim","text":"interface report_sim still experimental, may change future.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/report_sim.html","id":"comparisons-included-in-report","dir":"Reference","previous_headings":"","what":"Comparisons included in report","title":"Simulation study of a model — report_sim","text":"mod_est mod_sim identical, report produced report_sim() following components: \"hyper\" Hyper-parameters priors intercept, main effects, interactions. \"effect\" Intercept, main effects, interactions. \"meanpar\" Expected value rates probabilities. Poisson binomial models . \"disp\" Dispersion term, included model. \"par\" Rates, probabilities, means. mod_est mod_sim differ, report omits \"hyper\", \"effect\", since, model specifications, terms comparable across models.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/report_sim.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simulation study of a model — report_sim","text":"","code":"## results random, so set seed set.seed(0)  ## make data - outcome variable (deaths here) ## needs to be present, but is not used data <- data.frame(region = c(\"A\", \"B\", \"C\", \"D\", \"E\"),                    population = c(100, 200, 300, 400, 500),                    deaths = NA)  ## simulation with estimation model same as ## data-generating model mod_est <- mod_pois(deaths ~ region,                     data = data,                     exposure = population) |>   set_prior(`(Intercept)` ~ Known(0)) report_sim(mod_est = mod_est,            n_sim = 10) ## in practice should use larger value #> $components #> # A tibble: 4 × 7 #>   term        component   .error .cover_50 .cover_95 .length_50 .length_95 #>   <chr>       <chr>        <dbl>     <dbl>     <dbl>      <dbl>      <dbl> #> 1 (Intercept) effect    -0.0159        0.9      1         0.321      0.951 #> 2 region      effect     0.00434       0.4      0.68      0.692      1.99  #> 3 region      hyper     -0.224         0.3      0.7       0.493      1.65  #> 4 disp        disp      -0.853         0.4      0.8       0.567      2.18  #>  #> $augment #> # A tibble: 2 × 7 #>   .var      .observed   .error .cover_50 .cover_95 .length_50 .length_95 #>   <chr>         <dbl>    <dbl>     <dbl>     <dbl>      <dbl>      <dbl> #> 1 .fitted        1.36 -0.00482      0.44      0.94     0.0883      0.258 #> 2 .expected      1.36 -0.508        0.56      0.96     0.907       3.29  #>   ## simulation with estimation model different ## from data-generating model mod_sim <- mod_est |>   set_prior(region ~ N(s = 2)) report_sim(mod_est = mod_est,            mod_sim = mod_sim,            n_sim = 10) #> $components #> # A tibble: 4 × 7 #>   term        component   .error .cover_50 .cover_95 .length_50 .length_95 #>   <chr>       <chr>        <dbl>     <dbl>     <dbl>      <dbl>      <dbl> #> 1 (Intercept) effect     0.0487       0.9        1        0.406       1.22 #> 2 region      effect     0.00330      0.32       0.6      0.906       2.60 #> 3 region      hyper     -0.799        0.1        0.4      0.576       1.87 #> 4 disp        disp      -0.644        0.4        0.9      0.771       2.89 #>  #> $augment #> # A tibble: 2 × 7 #>   .var      .observed   .error .cover_50 .cover_95 .length_50 .length_95 #>   <chr>         <dbl>    <dbl>     <dbl>     <dbl>      <dbl>      <dbl> #> 1 .fitted        8.14  -0.0284      0.48      0.96      0.121      0.350 #> 2 .expected      8.14 -11.9         0.52      0.98      4.99      20.3   #>"},{"path":"https://bayesiandemography.github.io/bage/reference/set_disp.html","id":null,"dir":"Reference","previous_headings":"","what":"Set Mean Parameter for Dispersion — set_disp","title":"Set Mean Parameter for Dispersion — set_disp","text":"Specify mean parameter mean prior dispersion.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/set_disp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set Mean Parameter for Dispersion — set_disp","text":"","code":"set_disp(mod, mean)"},{"path":"https://bayesiandemography.github.io/bage/reference/set_disp.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set Mean Parameter for Dispersion — set_disp","text":"mod bage_mod object, typically created mod_pois(), mod_binom(), mod_norm(). mean Mean value expoential prior. Poisson binomial models, can set 0.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/set_disp.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set Mean Parameter for Dispersion — set_disp","text":"bage_mod object","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/set_disp.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Set Mean Parameter for Dispersion — set_disp","text":"dispersion parameter exponential distribution mean \\(\\mu\\). $$p(\\xi) = \\frac{1}{\\mu}\\exp\\left(\\frac{-\\xi}{\\mu}\\right)$$ Poisson binomial models, mean can set 0, implying dispersion term also 0. normal models, mean must non-negative. mod argument set_disp fitted model, set_disp 'unfits' model, deleting existing estimates.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/set_disp.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Set Mean Parameter for Dispersion — set_disp","text":"","code":"mod <- mod_pois(injuries ~ age:sex + ethnicity + year,                 data = injuries,                 exposure = popn) mod #> -- Unfitted Poisson model -- #>  #>    injuries ~ age:sex + ethnicity + year #>  #> (Intercept) ~ NFix() #>   ethnicity ~ NFix() #>        year ~ RW() #>     age:sex ~ ERW() #>  #>      dispersion: mean=1 #>        exposure: popn #>         var_age: age #>   var_sexgender: sex #>        var_time: year #>          n_draw: 1000 mod |> set_disp(mean = 0.1) #> -- Unfitted Poisson model -- #>  #>    injuries ~ age:sex + ethnicity + year #>  #> (Intercept) ~ NFix() #>   ethnicity ~ NFix() #>        year ~ RW() #>     age:sex ~ ERW() #>  #>      dispersion: mean=0.1 #>        exposure: popn #>         var_age: age #>   var_sexgender: sex #>        var_time: year #>          n_draw: 1000 mod |> set_disp(mean = 0) #> -- Unfitted Poisson model -- #>  #>    injuries ~ age:sex + ethnicity + year #>  #> (Intercept) ~ NFix() #>   ethnicity ~ NFix() #>        year ~ RW() #>     age:sex ~ ERW() #>  #>      dispersion: mean=0 #>        exposure: popn #>         var_age: age #>   var_sexgender: sex #>        var_time: year #>          n_draw: 1000"},{"path":"https://bayesiandemography.github.io/bage/reference/set_n_draw.html","id":null,"dir":"Reference","previous_headings":"","what":"Set the number of draws — set_n_draw","title":"Set the number of draws — set_n_draw","text":"Specify number draws posterior distribution used model output. newly-created bage_mod object n_draw value 1000. Higher values may appropriate characterising tails distributions, publication-quality graphics summaries.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/set_n_draw.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set the number of draws — set_n_draw","text":"","code":"set_n_draw(mod, n_draw = 1000L)"},{"path":"https://bayesiandemography.github.io/bage/reference/set_n_draw.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set the number of draws — set_n_draw","text":"mod bage_mod object, typically created mod_pois(), mod_binom(), mod_norm(). n_draw Number draws.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/set_n_draw.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set the number of draws — set_n_draw","text":"bage_mod object","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/set_n_draw.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Set the number of draws — set_n_draw","text":"value n_draw affect model fitting: affects posterior summaries.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/set_n_draw.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Set the number of draws — set_n_draw","text":"","code":"mod <- mod_pois(injuries ~ age:sex + ethnicity + year,                 data = injuries,                 exposure = popn) mod #> -- Unfitted Poisson model -- #>  #>    injuries ~ age:sex + ethnicity + year #>  #> (Intercept) ~ NFix() #>   ethnicity ~ NFix() #>        year ~ RW() #>     age:sex ~ ERW() #>  #>      dispersion: mean=1 #>        exposure: popn #>         var_age: age #>   var_sexgender: sex #>        var_time: year #>          n_draw: 1000  mod |>   set_n_draw(n_draw = 5000) #> -- Unfitted Poisson model -- #>  #>    injuries ~ age:sex + ethnicity + year #>  #> (Intercept) ~ NFix() #>   ethnicity ~ NFix() #>        year ~ RW() #>     age:sex ~ ERW() #>  #>      dispersion: mean=1 #>        exposure: popn #>         var_age: age #>   var_sexgender: sex #>        var_time: year #>          n_draw: 5000"},{"path":"https://bayesiandemography.github.io/bage/reference/set_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Change the prior for a model term — set_prior","title":"Change the prior for a model term — set_prior","text":"Specify non-default prior distribution intercept, main effect, interaction.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/set_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Change the prior for a model term — set_prior","text":"","code":"set_prior(mod, formula)"},{"path":"https://bayesiandemography.github.io/bage/reference/set_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Change the prior for a model term — set_prior","text":"mod bage_mod object, created mod_pois(), mod_binom(), mod_norm(). formula formula giving term function creating prior.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/set_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Change the prior for a model term — set_prior","text":"modified bage_mod object.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/set_prior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Change the prior for a model term — set_prior","text":"mod argument set_prior fitted model, set_disp 'unfits' model, deleting existing estimates. formula gives name main effect interaction, function specifying prior, eg age ~ RW2().","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/set_prior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Change the prior for a model term — set_prior","text":"","code":"mod <- mod_pois(injuries ~ age + year,                 data = injuries,                 exposure = popn) mod #> -- Unfitted Poisson model -- #>  #>    injuries ~ age + year #>  #> (Intercept) ~ NFix() #>         age ~ RW() #>        year ~ RW() #>  #>      dispersion: mean=1 #>        exposure: popn #>         var_age: age #>        var_time: year #>          n_draw: 1000 mod |> set_prior(age ~ RW2()) #> -- Unfitted Poisson model -- #>  #>    injuries ~ age + year #>  #> (Intercept) ~ NFix() #>         age ~ RW2() #>        year ~ RW() #>  #>      dispersion: mean=1 #>        exposure: popn #>         var_age: age #>        var_time: year #>          n_draw: 1000"},{"path":"https://bayesiandemography.github.io/bage/reference/set_var_age.html","id":null,"dir":"Reference","previous_headings":"","what":"Set the age variable — set_var_age","title":"Set the age variable — set_var_age","text":"Specify variable () represents age. Functions mod_pois(), mod_binom(), mod_norm() try infer age variable variable names, always get right.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/set_var_age.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set the age variable — set_var_age","text":"","code":"set_var_age(mod, name)"},{"path":"https://bayesiandemography.github.io/bage/reference/set_var_age.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set the age variable — set_var_age","text":"mod bage_mod object, typically created mod_pois(), mod_binom(), mod_norm(). name name age variable.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/set_var_age.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set the age variable — set_var_age","text":"bage_mod object","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/set_var_age.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Set the age variable — set_var_age","text":"R formula, 'variable' different 'term'. instance, ~ age + region + age:region contains variables age region, terms age, region, age:region. default, age main effect random walk (RW()) prior, interaction involving age exchangeable random walk (ERW()) prior. Changing age variable via set_var_age() can change priors: see example. mod argument set_var_age fitted model, set_var_age 'unfits' model, deleting existing estimates.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/set_var_age.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Set the age variable — set_var_age","text":"","code":"## rename 'age' variable to something unusual injuries2 <- injuries injuries2$age_last_birthday <- injuries2$age  ## mod_pois does not recognize age variable mod <- mod_pois(injuries ~ age_last_birthday * ethnicity + year,                 data = injuries2,                 exposure = popn) mod #> -- Unfitted Poisson model -- #>  #>                    injuries ~ age_last_birthday * ethnicity + year #>  #>                 (Intercept) ~ NFix() #>           age_last_birthday ~ N() #>                   ethnicity ~ NFix() #>                        year ~ RW() #> age_last_birthday:ethnicity ~ N() #>  #>      dispersion: mean=1 #>        exposure: popn #>        var_time: year #>          n_draw: 1000  ## so we set the age variable explicitly ## (which, as a side effect, changes the prior on ## the age main effect) mod |>   set_var_age(name = \"age_last_birthday\") #> -- Unfitted Poisson model -- #>  #>                    injuries ~ age_last_birthday * ethnicity + year #>  #>                 (Intercept) ~ NFix() #>           age_last_birthday ~ RW() #>                   ethnicity ~ NFix() #>                        year ~ RW() #> age_last_birthday:ethnicity ~ N() #>  #>      dispersion: mean=1 #>        exposure: popn #>         var_age: age_last_birthday #>        var_time: year #>          n_draw: 1000"},{"path":"https://bayesiandemography.github.io/bage/reference/set_var_sexgender.html","id":null,"dir":"Reference","previous_headings":"","what":"Set a sex or gender variable — set_var_sexgender","title":"Set a sex or gender variable — set_var_sexgender","text":"Specify variable () represents sex gender. Functions mod_pois(), mod_binom(), mod_norm() try find sex gender variable using variable names, always get right.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/set_var_sexgender.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set a sex or gender variable — set_var_sexgender","text":"","code":"set_var_sexgender(mod, name)"},{"path":"https://bayesiandemography.github.io/bage/reference/set_var_sexgender.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set a sex or gender variable — set_var_sexgender","text":"mod bage_mod object, typically created mod_pois(), mod_binom(), mod_norm(). name name sex gender variable.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/set_var_sexgender.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set a sex or gender variable — set_var_sexgender","text":"\"bage_mod\" object","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/set_var_sexgender.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Set a sex or gender variable — set_var_sexgender","text":"R formula, 'variable' different 'term'. instance, ~ gender + region + gender:region contains variables gender region, terms gender, region, gender:region. mod argument set_var_sexgender fitted model, set_var_sexgender 'unfits' model, deleting existing estimates.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/set_var_sexgender.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Set a sex or gender variable — set_var_sexgender","text":"","code":"## rename 'sex' variable to something unexpected injuries2 <- injuries injuries2$biological_sex <- injuries2$sex  ## mod_pois does not recognize sex variable mod <- mod_pois(injuries ~ age * biological_sex + year,                 data = injuries2,                 exposure = popn) mod #> -- Unfitted Poisson model -- #>  #>           injuries ~ age * biological_sex + year #>  #>        (Intercept) ~ NFix() #>                age ~ RW() #>     biological_sex ~ NFix() #>               year ~ RW() #> age:biological_sex ~ ERW() #>  #>      dispersion: mean=1 #>        exposure: popn #>         var_age: age #>        var_time: year #>          n_draw: 1000  ## so we set the sex variable explicitly mod |>   set_var_sexgender(name = \"biological_sex\") #> -- Unfitted Poisson model -- #>  #>           injuries ~ age * biological_sex + year #>  #>        (Intercept) ~ NFix() #>                age ~ RW() #>     biological_sex ~ NFix() #>               year ~ RW() #> age:biological_sex ~ ERW() #>  #>      dispersion: mean=1 #>        exposure: popn #>         var_age: age #>   var_sexgender: biological_sex #>        var_time: year #>          n_draw: 1000"},{"path":"https://bayesiandemography.github.io/bage/reference/set_var_time.html","id":null,"dir":"Reference","previous_headings":"","what":"Set the time variable — set_var_time","title":"Set the time variable — set_var_time","text":"Specify variable () represents time. Functions mod_pois(), mod_binom(), mod_norm() try infer time variable variable names, always get right.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/set_var_time.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set the time variable — set_var_time","text":"","code":"set_var_time(mod, name)"},{"path":"https://bayesiandemography.github.io/bage/reference/set_var_time.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set the time variable — set_var_time","text":"mod bage_mod object, typically created mod_pois(), mod_binom(), mod_norm(). name name time variable.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/set_var_time.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set the time variable — set_var_time","text":"bage_mod object","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/set_var_time.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Set the time variable — set_var_time","text":"R formula, 'variable' different 'term'. instance, ~ time + region + time:region contains variables time region, terms time, region, time:region. default, time main effect random walk (RW()) prior interaction involving time exchangeable random walk (ERW()) prior. Changing time variable via set_var_time() can change priors: see example. mod argument set_var_time fitted model, set_var_time 'unfits' model, deleting existing estimates.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/set_var_time.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Set the time variable — set_var_time","text":"","code":"## rename time variable to something unusual injuries2 <- injuries injuries2$calendar_year <- injuries2$year  ## mod_pois does not recognize time variable mod <- mod_pois(injuries ~ age * ethnicity + calendar_year,                 data = injuries2,                 exposure = popn) mod #> -- Unfitted Poisson model -- #>  #>      injuries ~ age * ethnicity + calendar_year #>  #>   (Intercept) ~ NFix() #>           age ~ RW() #>     ethnicity ~ NFix() #> calendar_year ~ N() #> age:ethnicity ~ ERW() #>  #>      dispersion: mean=1 #>        exposure: popn #>         var_age: age #>          n_draw: 1000  ## so we set the time variable explicitly ## (which, as a side effect, changes the prior on ## the time main effect) mod |>   set_var_time(name = \"calendar_year\") #> -- Unfitted Poisson model -- #>  #>      injuries ~ age * ethnicity + calendar_year #>  #>   (Intercept) ~ NFix() #>           age ~ RW() #>     ethnicity ~ NFix() #> calendar_year ~ RW() #> age:ethnicity ~ ERW() #>  #>      dispersion: mean=1 #>        exposure: popn #>         var_age: age #>        var_time: calendar_year #>          n_draw: 1000"},{"path":"https://bayesiandemography.github.io/bage/reference/ssvd.html","id":null,"dir":"Reference","previous_headings":"","what":"Create an Object to Hold Data from a Scaled SVD — ssvd","title":"Create an Object to Hold Data from a Scaled SVD — ssvd","text":"Create object class \"bage_ssvd\" hold results scaled Singular Value Decomposition (SVD) n_comp components.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ssvd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create an Object to Hold Data from a Scaled SVD — ssvd","text":"","code":"ssvd(data)"},{"path":"https://bayesiandemography.github.io/bage/reference/ssvd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create an Object to Hold Data from a Scaled SVD — ssvd","text":"data data frame. See Details description.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ssvd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create an Object to Hold Data from a Scaled SVD — ssvd","text":"object class \"bage_ssvd\".","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ssvd.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create an Object to Hold Data from a Scaled SVD — ssvd","text":"data following columns: type Type decomposition. Choices \"total\", \"joint\", \"indep\". labels_age Age labels individual rows matrices within matrix individual elements vectors within offset. labels_sexgender Sex/gender labels individual rows matrices within matrix individual elements vectors within offset, NULL. NULL sexgender \"total\", since case results average across sexes/genders. matrix List column sparse matrices created ssvd_comp(). Must rownames. Must NAs. type \"total\" \"joint\", matrix n_comp columns. \"type\" \"indep\", matrix 2 * n_comp columns. offset List column vectors created ssvd_comp(). Must names, identical rownames corresponding element matrix.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ssvd_comp.html","id":null,"dir":"Reference","previous_headings":"","what":"Create components needed by a ssvd object — ssvd_comp","title":"Create components needed by a ssvd object — ssvd_comp","text":"Use Singular Value Decomposition (SVD) construct parsimonious representation set rates, probabilities, means, values.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ssvd_comp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create components needed by a ssvd object — ssvd_comp","text":"","code":"ssvd_comp(x, transform = c(\"log\", \"logit\", \"none\"), n_comp = 10)"},{"path":"https://bayesiandemography.github.io/bage/reference/ssvd_comp.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create components needed by a ssvd object — ssvd_comp","text":"x matrix value rates, probabilities, means. transform \"log\", \"logit\", \"none\". Defaults \"log\". n_comp Number components.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ssvd_comp.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create components needed by a ssvd object — ssvd_comp","text":"named list two elements: matrix, numeric matrix offset, numeric vector","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ssvd_comp.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create components needed by a ssvd object — ssvd_comp","text":"`ssvd_comp() typically proceeds follows: transform values matrix x (eg take logs) carry SVD transformed version x centre scale results SVD produce matrix matrix vector offset. \\(X\\) matrix transformed values x \\(F\\) matrix called matrix, \\(g\\) vector called offset, \\(\\alpha\\) vector standard normal variates, $$\\beta = F \\alpha + g$$ \\(\\beta\\) look like randomly-selected column \\(X\\). Matrix x typically age along rows, combination classification variables, country time, along columns. One exception SVD used capture relationship female male rates, case rows formed interacting sex age. See example. scale \"log\" \"logit\", ssvd_comp() converts 0s x values just 0 applying log logit function. scale \"logit\", ssvd_comp() also converts 1s values just 1`.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ssvd_comp.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create components needed by a ssvd object — ssvd_comp","text":"","code":"x <- matrix(rgamma(n = 150, shape = 1),             nrow = 10,             ncol = 15) x #>            [,1]       [,2]      [,3]      [,4]       [,5]       [,6]       [,7] #>  [1,] 0.3461946 1.03866812 0.8579223 2.4071455 0.22348067 1.29610902 2.26126133 #>  [2,] 0.3808581 4.33830316 1.5465257 3.8493147 0.03111293 0.24186057 1.62900859 #>  [3,] 0.1322578 0.54018009 0.7448412 1.0412970 0.10103279 0.83996486 1.61608163 #>  [4,] 3.3337419 3.12327092 1.1877186 0.7645732 0.13476688 0.58809071 0.22140288 #>  [5,] 1.9723722 0.95796616 0.3339474 3.9915602 0.09195434 0.29414449 1.16626890 #>  [6,] 0.4721629 0.93864619 1.2104465 0.6163676 0.75614498 0.23744885 3.81129852 #>  [7,] 2.2137929 1.08033117 0.7900078 0.6284162 0.33953181 0.28484718 0.09012904 #>  [8,] 1.4950270 0.24336074 0.1557304 0.3548268 2.64119344 0.31428904 1.50147280 #>  [9,] 0.3364508 0.71140853 1.6842143 2.4260707 0.28416797 0.04176534 0.53004726 #> [10,] 0.5694015 0.03882585 1.0423669 1.7074622 0.30445829 1.54406522 0.02112217 #>            [,8]        [,9]      [,10]      [,11]      [,12]       [,13] #>  [1,] 0.3822741 0.358186804 1.03017219 0.13138214 1.59065031 1.783046793 #>  [2,] 0.2311672 1.708678861 0.71605141 1.06306892 1.05826921 0.790463654 #>  [3,] 1.6914218 0.006869335 1.41342362 0.66824690 0.84118473 0.825461866 #>  [4,] 0.1318079 1.761283438 0.06667042 3.78653029 1.81067276 0.160614300 #>  [5,] 3.1174828 4.853258682 1.19781461 1.11596393 0.98859076 0.411382575 #>  [6,] 0.6635328 1.229702735 0.18267094 2.13337871 0.64599525 0.007829091 #>  [7,] 0.7096522 0.184874734 0.08703218 1.28287837 0.02297977 0.702652982 #>  [8,] 1.1517015 0.206969435 0.09997737 0.55639790 4.28366827 2.336699324 #>  [9,] 1.9698156 1.460254436 1.46346324 0.07726084 2.03069035 0.332754370 #> [10,] 0.2820437 0.540422716 0.21811531 0.02305563 0.89419669 0.423643541 #>            [,14]     [,15] #>  [1,] 2.27439929 0.8925609 #>  [2,] 0.07845103 0.2282912 #>  [3,] 0.27417139 0.4914270 #>  [4,] 1.73025638 0.3643840 #>  [5,] 2.31180756 0.7661803 #>  [6,] 0.72931908 0.1156978 #>  [7,] 0.93378084 0.2319514 #>  [8,] 0.25141280 1.3064909 #>  [9,] 0.73427656 1.1965033 #> [10,] 0.77107322 0.2114691 ssvd_comp(x) #> $matrix #> 10 x 10 sparse Matrix of class \"dgCMatrix\" #>                                                                            #>  [1,] 0.1673454  0.41030164  0.4292109  0.20143535  0.13715794  0.07662589 #>  [2,] 0.4618001 -0.45058292  0.8229403  0.11607090  0.46592816  0.39045169 #>  [3,] 0.4186056  0.77078809  0.8040155 -0.82586076  0.05703270 -0.17911507 #>  [4,] 0.4370270 -0.82028442 -0.4093244 -0.03208771  0.20041534  0.46942760 #>  [5,] 0.1611690 -0.44435467  0.2843709  0.47744379  0.10312800 -0.05561233 #>  [6,] 0.4714580 -0.92069392  0.1058578 -0.30635077 -0.83918158 -0.34127873 #>  [7,] 0.5671986 -0.07782588 -0.6819546 -0.56964097  0.50044600 -0.27980234 #>  [8,] 0.1043730  0.47179738 -0.1727047 -0.41559238 -0.59253095  0.77696912 #>  [9,] 0.3603144  0.14867128  0.4974068  0.67875732 -0.34495230 -0.11228490 #> [10,] 0.7158273  0.86929276 -0.6700956  0.64514843 -0.09538405 -0.04942423 #>                                                       #>  [1,] -0.26231989 -0.26996470 -0.25614383  0.37597340 #>  [2,] -0.07851500  0.38400166  0.17692192  0.06771365 #>  [3,] -0.09545652 -0.20314908  0.02483615 -0.20148864 #>  [4,] -0.25250096 -0.25781023 -0.23008879 -0.20476221 #>  [5,]  0.43979582 -0.50415683  0.27918124  0.02263371 #>  [6,] -0.21929427  0.03259973  0.05281229  0.11930027 #>  [7,]  0.48642421  0.09336759 -0.07930730  0.14373294 #>  [8,]  0.35499629 -0.02044537  0.06251044  0.09065075 #>  [9,]  0.47320865  0.15956818 -0.31084305 -0.13296436 #> [10,] -0.30801261  0.03229974  0.18424290 -0.03258780 #>  #> $offset #>  [1] -0.197231416 -0.501209667 -0.784071580 -0.421968022  0.009749737 #>  [6] -0.692738775 -0.963333035 -0.454625164 -0.449037316 -1.187039031 #>  ssvd_comp(x, transform = \"none\") #> $matrix #> 10 x 10 sparse Matrix of class \"dgCMatrix\" #>                                                                             #>  [1,] 0.4327321  0.34366846  0.27062062  0.34150655  0.01171887 -0.47963892 #>  [2,] 0.5562370 -0.41403530 -0.02193286  0.75807996  0.37209155  0.27781250 #>  [3,] 0.2704592  0.24582460  0.20855937  0.18433888 -0.16933802 -0.10495549 #>  [4,] 0.5302481 -0.30255736 -1.05719132 -0.25130029  0.10215106 -0.08120471 #>  [5,] 0.6986508 -0.53081339  0.59531080 -0.62676374 -0.19110664  0.08976653 #>  [6,] 0.3684973  0.12181192 -0.23197540  0.35473516 -0.78525077  0.09627665 #>  [7,] 0.2417867 -0.08533488 -0.38701627 -0.18009102  0.05670324 -0.21964220 #>  [8,] 0.3832416  1.20785763 -0.18530928 -0.25334017  0.15413364  0.25306357 #>  [9,] 0.4168738  0.10756791  0.46948497 -0.07801618  0.20003456  0.11783604 #> [10,] 0.2186941  0.06577901  0.17241450 -0.02620374  0.21171734 -0.30509938 #>                                                         #>  [1,]  0.190793238 -0.02200785 -0.153996299 -0.04142857 #>  [2,]  0.087893305 -0.06327824  0.053098220  0.01051819 #>  [3,] -0.330896254 -0.16865020 -0.004448699  0.16154519 #>  [4,] -0.060675253  0.10053406 -0.111880720  0.05689472 #>  [5,]  0.160834863 -0.06206493  0.005255647  0.03272854 #>  [6,] -0.001499619  0.10860803  0.069035031 -0.05221435 #>  [7,] -0.108009890 -0.23760226  0.151285601 -0.14126579 #>  [8,]  0.121512350 -0.03655492  0.035171650  0.01374517 #>  [9,] -0.342439304  0.15108476 -0.078922141 -0.12093375 #> [10,]  0.003205145  0.22333155  0.234862671  0.06353519 #>  #> $offset #>  [1] 1.1248969 1.1927617 0.7485241 1.2777190 1.5713797 0.9167095 0.6388572 #>  [8] 1.1266145 1.0186096 0.5727815 #>  ssvd_comp(x, n_comp = 2) #> $matrix #> 10 x 2 sparse Matrix of class \"dgCMatrix\" #>                             #>  [1,] 0.1673454  0.41030164 #>  [2,] 0.4618001 -0.45058292 #>  [3,] 0.4186056  0.77078809 #>  [4,] 0.4370270 -0.82028442 #>  [5,] 0.1611690 -0.44435467 #>  [6,] 0.4714580 -0.92069392 #>  [7,] 0.5671986 -0.07782588 #>  [8,] 0.1043730  0.47179738 #>  [9,] 0.3603144  0.14867128 #> [10,] 0.7158273  0.86929276 #>  #> $offset #>  [1] -0.3273475 -0.5953393 -0.7691142 -0.4867607 -0.1519088 -0.5181469 #>  [7] -0.8237598 -0.2461755 -0.5618450 -1.2278814 #>"},{"path":"https://bayesiandemography.github.io/bage/reference/ssvd_hmd.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a Scaled SVD Object from a Human Mortality Database File — ssvd_hmd","title":"Create a Scaled SVD Object from a Human Mortality Database File — ssvd_hmd","text":"Create object class \"bage_ssvd\" zipped file downloaded Human Mortality Database.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ssvd_hmd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a Scaled SVD Object from a Human Mortality Database File — ssvd_hmd","text":"","code":"ssvd_hmd(zipfile)"},{"path":"https://bayesiandemography.github.io/bage/reference/ssvd_hmd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a Scaled SVD Object from a Human Mortality Database File — ssvd_hmd","text":"zipfile name zipped file downloaded Human Mortality Database. path name can handled utils::unzip(). Defaults \"log\".","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ssvd_hmd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a Scaled SVD Object from a Human Mortality Database File — ssvd_hmd","text":"object class \"bage_ssvd\"","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ssvd_hmd.html","id":"warning","dir":"Reference","previous_headings":"","what":"Warning","title":"Create a Scaled SVD Object from a Human Mortality Database File — ssvd_hmd","text":"function, associated functions, probably moved separate package future.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/ssvd_hmd.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a Scaled SVD Object from a Human Mortality Database File — ssvd_hmd","text":"Step 1: Download data Register log Human Mortality Database, go page Downloading HMD zipped data files. Go \"Previous Versions\" table bottom page, download file \"Statistics\" column, eg file https://www.mortality.org/File/Download/hmd.v6/zip/all_hmd/hmd_statistics_20240226.zip download file, need register Human Mortality Databse log . Step 2: Call function 'svd_hmd' Put file working directory, supply name file function svd_hmd(), eg   Step 3: Use object create prior","code":"MyHMD <- svd_hmd(\"hmd_statistcs_20240226\") mod |>   set_prior(age ~ SVD(MyHMD))"},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/tidy.bage_mod.html","id":null,"dir":"Reference","previous_headings":"","what":"Main effects and interactions from a fitted model — tidy.bage_mod","title":"Main effects and interactions from a fitted model — tidy.bage_mod","text":"Main effects interactions fitted model","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/tidy.bage_mod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Main effects and interactions from a fitted model — tidy.bage_mod","text":"","code":"# S3 method for bage_mod tidy(x, ...)"},{"path":"https://bayesiandemography.github.io/bage/reference/tidy.bage_mod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Main effects and interactions from a fitted model — tidy.bage_mod","text":"x fitted bage_mod object. ... Unused. Included generic consistency .","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/tidy.bage_mod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Main effects and interactions from a fitted model — tidy.bage_mod","text":"tibble.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/reference/tidy.bage_mod.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Main effects and interactions from a fitted model — tidy.bage_mod","text":"","code":"mod <- mod_pois(injuries ~ age + sex + year,                 data = injuries,                 exposure = popn) mod <- fit(mod) tidy(mod) #> # A tibble: 4 × 4 #>   term        spec       n      sd #>   <chr>       <chr>  <int>   <dbl> #> 1 (Intercept) NFix()     1 NA      #> 2 age         RW()      12  0.763  #> 3 sex         NFix()     2  0.714  #> 4 year        RW()      19  0.0935"},{"path":"https://bayesiandemography.github.io/bage/reference/us_acc_deaths.html","id":null,"dir":"Reference","previous_headings":"","what":"Accidental deaths in the USA — us_acc_deaths","title":"Accidental deaths in the USA — us_acc_deaths","text":"Counts accidental deaths USA, month, 1973-1978.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/us_acc_deaths.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Accidental deaths in the USA — us_acc_deaths","text":"","code":"us_acc_deaths"},{"path":"https://bayesiandemography.github.io/bage/reference/us_acc_deaths.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Accidental deaths in the USA — us_acc_deaths","text":"data frame 72 rows following variables: month: Year month. deaths: Count deaths.","code":""},{"path":"https://bayesiandemography.github.io/bage/reference/us_acc_deaths.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Accidental deaths in the USA — us_acc_deaths","text":"Reformatted version datasets::USAccDeaths.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/news/index.html","id":"new-functions-0-4-1","dir":"Changelog","previous_headings":"","what":"New functions","title":"bage 0.4.1","text":"Added ‘bage_ssvd’ method components().","code":""},{"path":"https://bayesiandemography.github.io/bage/news/index.html","id":"changes-to-interface-0-4-1","dir":"Changelog","previous_headings":"","what":"Changes to interface","title":"bage 0.4.1","text":"augment() method bage_mod objects now calculated value .fitted cases outcome exposure/size NA, rather setting value .fitted NA.","code":""},{"path":"https://bayesiandemography.github.io/bage/news/index.html","id":"internal-calculations-0-4-1","dir":"Changelog","previous_headings":"","what":"Internal calculations","title":"bage 0.4.1","text":"Standardization effects done components() called. augment() uses linear predictor (need standardization.) Internally, draws linear predictor, hyper-parameters (included model) disp stored, rather full standardized components. Standardization algorithm repeats 100 times, residuals less 0.0001. new configuration, calculations large matrices previously failed now running.","code":""},{"path":"https://bayesiandemography.github.io/bage/news/index.html","id":"simulations-0-4-1","dir":"Changelog","previous_headings":"","what":"Simulations","title":"bage 0.4.1","text":"drawing prior, intercept always set 0. Terms SVD Known priors touched. terms centered.","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/news/index.html","id":"changes-to-back-end-for-svd-priors-0-4-0","dir":"Changelog","previous_headings":"","what":"Changes to back-end for SVD priors","title":"bage 0.4.0","text":"Move functions creating ‘bage_ssvd’ objects package ‘bssvd’.","code":""},{"path":"https://bayesiandemography.github.io/bage/news/index.html","id":"bug-fixes-0-4-0","dir":"Changelog","previous_headings":"","what":"Bug fixes","title":"bage 0.4.0","text":"Corrected error calculation logit ssvd_comp().","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/news/index.html","id":"new-functions-0-3-2","dir":"Changelog","previous_headings":"","what":"New functions","title":"bage 0.3.2","text":"forecast.bage_mod() Forecasting. Interface yet finalised.","code":""},{"path":"https://bayesiandemography.github.io/bage/news/index.html","id":"bug-fixes-0-3-2","dir":"Changelog","previous_headings":"","what":"Bug fixes","title":"bage 0.3.2","text":"Corrected error C++ template Lin ELin priors (due use integer arithmetic.)","code":""},{"path":[]},{"path":"https://bayesiandemography.github.io/bage/news/index.html","id":"new-functions-0-2-2","dir":"Changelog","previous_headings":"","what":"New functions","title":"bage 0.2.2","text":"generate.bage_ssvd() Generate random age-sex profiles SVD.","code":""},{"path":"https://bayesiandemography.github.io/bage/news/index.html","id":"bug-fixes-0-2-2","dir":"Changelog","previous_headings":"","what":"Bug fixes","title":"bage 0.2.2","text":"Internal function draw_vals_effect_mod() malfunctioning models contained SVD priors.","code":""}]
